window.__require=function t(e,n,s){function i(r,c){if(!n[r]){if(!e[r]){var a=r.split("/");if(a=a[a.length-1],!e[a]){var h="function"==typeof __require&&__require;if(!c&&h)return h(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+r+"'")}r=a}var l=n[r]={exports:{}};e[r][0].call(l.exports,function(t){return i(e[r][1][t]||t)},l,l.exports,t,e,n,s)}return n[r].exports}for(var o="function"==typeof __require&&__require,r=0;r<s.length;r++)i(s[r]);return i}({AdmobAndroid:[function(t,e){"use strict";cc._RF.push(e,"19ab3x0/+JHlaXnJaJhA4db","AdmobAndroid");var n=t("AndroidConstant"),s=function(){function t(){}var e=t.prototype;return e.init=function(t){jsb.reflection.callStaticMethod(n.GAME_JNI_PATH,"initAds","(Ljava/lang/String;)V",JSON.stringify(t))},e.showBanner=function(){jsb.reflection.callStaticMethod(n.GAME_JNI_PATH,"showBanner","()V")},e.hideBanner=function(){jsb.reflection.callStaticMethod(n.GAME_JNI_PATH,"hideBanner","()V")},e.showRewardVideo=function(t){hf.onRewardVideoResult=t,jsb.reflection.callStaticMethod(n.GAME_JNI_PATH,"showRewardVideo","()V")},e.isRewardVideoLoaded=function(){return jsb.reflection.callStaticMethod(n.GAME_JNI_PATH,"isRewardVideoLoaded","()Z")},e.showInterstitialAd=function(){jsb.reflection.callStaticMethod(n.GAME_JNI_PATH,"showInterstitialAd","()V")},t}();e.exports=new s,cc._RF.pop()},{AndroidConstant:"AndroidConstant"}],AdmobIOS:[function(t,e){"use strict";cc._RF.push(e,"f35f3vS+u9EoJMK9FQZn0P3","AdmobIOS"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],AdsMgr:[function(t,e){"use strict";cc._RF.push(e,"72256/8IqVJPq76Z650/FqN","AdsMgr");var n={LOAD_AD_FAIL:1,NOT_SUPPORTED:2,QUIT_MIDWAY:3,SUCCESS:4},s=function(){function t(){var t=this;this.REWARD_RESULT=n,hf.platformMgr.config.ads&&(this.m_rewardId=hf.platformMgr.config.ads.rewardId,this.m_interstitialId=hf.platformMgr.config.ads.interstitialId,this.m_portalId=hf.platformMgr.config.ads.portalId,this.m_bannerId=hf.platformMgr.config.ads.bannerId),cc.sys.platform===cc.sys.WECHAT_GAME?(this.m_instance=hf.platformMgr.wxMgr,this.preloadAds()):cc.sys.platform===cc.sys.OPPO_GAME?(this.m_instance=hf.platformMgr.oppoMgr.oppoAds,this.m_rewardId="",this.m_interstitialId="",qg.initAdService({appId:"30074725",isDebug:!1,success:function(){console.log("init ad success"),t.preloadAds()},fail:function(t){console.log("fail:"+t.code+t.msg)},complete:function(){console.log("complete")}})):cc.sys.platform===cc.sys.ANDROID?(this.m_instance=hf.platformMgr.androidMgr.admobAndroid,this.m_instance.init(hf.platformMgr.config.ads)):this.m_instance=void 0}var e=t.prototype;return e.preloadAds=function(){this.loadInterstitial(),this.loadRewardVideo(),this.loadPortalAd()},e.loadRewardVideo=function(){this.m_rewardId&&this.m_instance.loadRewardVideo(this.m_rewardId)},e.loadInterstitial=function(){this.m_interstitialId&&this.m_instance.loadInterstitial(this.m_interstitialId)},e.loadPortalAd=function(){this.m_portalId&&this.m_instance.createPortalAd(this.m_portalId)},e.hasBanner=function(){return this.m_bannerId},e.hasVideo=function(){return this.m_rewardId},e.hasInterstitial=function(){return this.m_interstitialId},e.hasPortalAd=function(){return this.m_portalId},e.showBanner=function(){this.m_bannerId&&this.m_instance.showBanner()},e.hideBanner=function(){this.m_bannerId&&this.m_instance.hideBanner()},e.showRewardVideo=function(t){var e=t;this.m_rewardId?(cc.log("AdsHelper showRewardVideo"),this.m_instance.showRewardVideo(function(t){cc.log("AdsHelper showRewardVideo result",t),t===n.SUCCESS?e(!0,!0):t===n.QUIT_MIDWAY?e(!0,!1):e(!1)})):cc.sys.isBrowser?e(!0,!0):e(!1)},e.isRewardVideoLoaded=function(){return!!this.m_rewardId&&this.m_instance.isRewardVideoLoaded()},e.showInterstitialAd=function(){this.m_interstitialId&&this.m_instance.showInterstitialAd()},e.getRealBannerHeight=function(){if(this.m_bannerId&&this.m_instance.getRealBannerHeight)return this.m_instance.getRealBannerHeight()},e.showPortalAd=function(t){this.m_hasPortalAd&&this.m_instance.showPortalAd(t)},t}();e.exports=new s,cc._RF.pop()},{}],AnalysisConstant:[function(t,e){"use strict";cc._RF.push(e,"a9620tQWoZF2oqG1q4di3ZO","AnalysisConstant");e.exports={EVENT_TYPE:{ADD_PAYMENT_INFO:"add_payment_info",ADD_TO_CART:"add_to_cart",ADD_TO_WISHLIST:"add_to_wishlist",APP_OPEN:"app_open",BEGIN_CHECKOUT:"begin_checkout",CAMPAIGN_DETAILS:"campaign_details",ECOMMERCE_PURCHASE:"ecommerce_purchase",GENERATE_LEAD:"generate_lead",JOIN_GROUP:"join_group",LEVEL_END:"level_end",LEVEL_START:"level_start",LEVEL_UP:"level_up",LOGIN:"login",POST_SCORE:"post_score",PRESENT_OFFER:"present_offer",PURCHASE_REFUND:"purchase_refund",SEARCH:"search",SELECT_CONTENT:"select_content",SHARE:"share",SIGN_UP:"sign_up",SPEND_VIRTUAL_CURRENCY:"spend_virtual_currency",TUTORIAL_BEGIN:"tutorial_begin",TUTORIAL_COMPLETE:"tutorial_complete",UNLOCK_ACHIEVEMENT:"unlock_achievement",VIEW_ITEM:"view_item",VIEW_ITEM_LIST:"view_item_list",VIEW_SEARCH_RESULTS:"view_search_results",EARN_VIRTUAL_CURRENCY:"earn_virtual_currency",REMOVE_FROM_CART:"remove_from_cart",CHECKOUT_PROGRESS:"checkout_progress",SET_CHECKOUT_OPTION:"set_checkout_option",JS_ERROR_REPORT:"js_error_report",LEVEL_FAIL:"level_fail",SQUARE_CRUSH:"square_crush"},PARAM_TYPE:{ACHIEVEMENT_ID:"achievement_id",CHARACTER:"character",TRAVEL_CLASS:"travel_class",CONTENT_TYPE:"content_type",CURRENCY:"currency",COUPON:"coupon",START_DATE:"start_date",END_DATE:"end_date",EXTEND_SESSION:"extend_session",FLIGHT_NUMBER:"flight_number",GROUP_ID:"group_id",ITEM_CATEGORY:"item_category",ITEM_ID:"item_id",ITEM_LOCATION_ID:"item_location_id",ITEM_NAME:"item_name",LOCATION:"location",LEVEL:"level",LEVEL_NAME:"level_name",SIGN_UP_METHOD:"sign_up_method",METHOD:"method",NUMBER_OF_NIGHTS:"number_of_nights",NUMBER_OF_PASSENGERS:"number_of_passengers",NUMBER_OF_ROOMS:"number_of_rooms",DESTINATION:"destination",ORIGIN:"origin",PRICE:"price",QUANTITY:"quantity",SCORE:"score",SHIPPING:"shipping",TRANSACTION_ID:"transaction_id",SEARCH_TERM:"search_term",SUCCESS:"success",TAX:"tax",VALUE:"value",VIRTUAL_CURRENCY_NAME:"virtual_currency_name",CAMPAIGN:"campaign",SOURCE:"source",MEDIUM:"medium",TERM:"term",CONTENT:"content",ACLID:"aclid",CP1:"cp1",ITEM_BRAND:"item_brand",ITEM_VARIANT:"item_variant",ITEM_LIST:"item_list",CHECKOUT_STEP:"checkout_step",CHECKOUT_OPTION:"checkout_option",CREATIVE_NAME:"creative_name",CREATIVE_SLOT:"creative_slot",AFFILIATION:"affiliation",INDEX:"index",USED_MOVES:"used_moves"}},cc._RF.pop()},{}],AnalysisMgr:[function(t,e){"use strict";cc._RF.push(e,"cdd88BLM8FDXI0vmx++jWrc","AnalysisMgr");var n=t("AnalysisConstant"),s=function(){function t(){for(var t in n)this[t]=n[t]}var e=t.prototype;return e.logEvent=function(t,e){cc.log("AnalysisMgr logEvent",t,e),cc.sys.platform===cc.sys.ANDROID&&hf.platformMgr.androidMgr.firebaseLogEvent(t,e)},e.logCrash=function(t){cc.log("AnalysisMgr logCrash",t),cc.assert("string"==typeof t,"AnalysisMgr logCrash"),cc.sys.platform===cc.sys.ANDROID&&hf.platformMgr.androidMgr.firebaseLogCrash(t)},e.setCustomKey=function(t,e){cc.log("AnalysisMgr setCustomKey",t,e),cc.assert("string"==typeof t&&"string"==typeof e,"AnalysisMgr setCustomKey"),cc.sys.platform===cc.sys.ANDROID&&hf.platformMgr.androidMgr.firebaseSetCustomKey(t,e)},t}();e.exports=new s,cc._RF.pop()},{AnalysisConstant:"AnalysisConstant"}],AndroidConstant:[function(t,e){"use strict";cc._RF.push(e,"62df9N1Mm5AbLAAfxuz41US","AndroidConstant"),e.exports={GAME_JNI_PATH:"org/cocos2dx/javascript/GameJni"},cc._RF.pop()},{}],AndroidMgr:[function(t,e){"use strict";cc._RF.push(e,"1eae9RmmxJPG7s5a5JcEA51","AndroidMgr");var n=t("AndroidConstant"),s={};s.admobAndroid=t("AdmobAndroid"),s.googleIAP=t("GoogleIAP"),s.getPackageName=function(){return jsb.reflection.callStaticMethod(n.GAME_JNI_PATH,"getPackageName","()Ljava/lang/String;")},s.isPackageInstall=function(t){return jsb.reflection.callStaticMethod(n.GAME_JNI_PATH,"isPackageInstall","(Ljava/lang/String;)Z",t)},s.firebaseLogEvent=function(t,e){jsb.reflection.callStaticMethod(n.GAME_JNI_PATH,"firebaseLogEvent","(Ljava/lang/String;)V",JSON.stringify({event:t,params:e}))},s.firebaseLogCrash=function(t){jsb.reflection.callStaticMethod(n.GAME_JNI_PATH,"firebaseLogCrash","(Ljava/lang/String;)V",t)},s.firebaseSetCustomKey=function(t,e){jsb.reflection.callStaticMethod(n.GAME_JNI_PATH,"firebaseSetCustomKey","(Ljava/lang/String;Ljava/lang/String;)V",t,e)},s.vibrate=function(t){jsb.reflection.callStaticMethod(n.GAME_JNI_PATH,"vibrate","(I)V",t)},s.shareLink=function(t,e){jsb.reflection.callStaticMethod(n.GAME_JNI_PATH,"shareLink","(Ljava/lang/String;Ljava/lang/String;)V",t,e)},e.exports=s,cc._RF.pop()},{AdmobAndroid:"AdmobAndroid",AndroidConstant:"AndroidConstant",GoogleIAP:"GoogleIAP"}],BackGround:[function(t,e){"use strict";cc._RF.push(e,"27bb63g+uRLx5VKYA82Fvy9","BackGround"),cc.Class({extends:cc.Component,properties:{bg1:{default:null,type:cc.Node},bg2:{default:null,type:cc.Node},moveSpeed:18},onLoad:function(){var t=cc.winSize,e=this.bg1.getContentSize(),n=t.width/e.width;t.height/e.height>n&&(n=t.height/e.height);var s=Math.floor(e.height*n);this.bg1.width=t.width,this.bg1.height=s,this.bg2.width=t.width,this.bg2.height=s,this.bg2.y=s,this.bgHeight=s,this.scroll=!0},start:function(){},setScroll:function(t){this.scroll=t},update:function(t){if(this.scroll){var e=t*this.moveSpeed;this.bg1.y=this.bg1.y-e,this.bg2.y=this.bg2.y-e,this.bg1.y+this.bgHeight<=0&&(this.bg1.y=this.bg2.y+this.bgHeight),this.bg2.y+this.bgHeight<=0&&(this.bg2.y=this.bg1.y+this.bgHeight)}}}),cc._RF.pop()},{}],Block:[function(t,e){"use strict";var n;cc._RF.push(e,"4f328bQpqpOF74GOq1QpUPi","Block"),cc.Class(((n={extends:cc.Component,properties:{clearAnim:cc.Animation},onLoad:function(){},init:function(t,e){this.clearAnim.stop(),this.node.opacity=255,this.node.getComponent("cc.Sprite").spriteFrame=hf.keyFramesContainer.getBlockFrame(t,e)},setPosition:function(t,e){this.node.x=t,this.node.y=e},getWidth:function(){return this.node.width},getHeight:function(){return this.node.height}}).onLoad=function(){},n.start=function(){},n.onClear=function(){this.m_isClearing=!0,this.clearAnim.play()},n)),cc._RF.pop()},{}],Board:[function(t,e){"use strict";cc._RF.push(e,"5e0e4s2mOBMo7s932a0XWMy","Board"),t("Constants");var n=function(){function t(t,e){this.m_width=t,this.m_height=e,this.m_blocksArr=[],this.m_visible=!0;for(var n=0;n<t;n++){this.m_blocksArr[n]=[];for(var s=0;s<e;s++)this.m_blocksArr[n][s]=null}}var e=t.prototype;return e.clearForReborn=function(){for(var t=0;t<this.m_width;t++)for(var e=0;e<this.m_height-3;e++)this.m_blocksArr[t][e]=null},e.clear=function(){for(var t=0;t<this.m_width;t++)for(var e=0;e<this.m_height;e++)this.m_blocksArr[t][e]=null},e.setBlock=function(t,e,n,s){this.m_blocksArr[t][e]={type:n,shape:s}},e.getBlockArr=function(){return this.m_blocksArr},e.lockPiece=function(t){for(var e=t.getBlockArr(),n=t.getShape(),s=t.getBlockType(),i=0;i<e.length;i++)for(var o=0;o<e[i].length;o++)if(0!==e[i][o]){var r=t.getBlockX(o),c=t.getBlockY(i);this.m_blocksArr[r][c]={type:s,shape:n}}},e.isPieceValid=function(t){for(var e=t.getBlockArr(),n=0;n<e.length;n++)for(var s=0;s<e[n].length;s++)if(0!==e[n][s]){var i=t.getBlockX(s),o=t.getBlockY(n);if(i>=this.m_width||i<0||o>=this.m_height)return!1;if(null!==this.m_blocksArr[i][o])return!1}return!0},e.isFull=function(){for(var t=0;t<this.m_width;t++)if(null!==this.m_blocksArr[t][0])return!0;return!1},e.pushRight=function(){for(var t=0;t<this.m_height;t++){for(var e=this.m_blocksArr[this.m_width-1][t],n=this.m_width-1;n>0;n--)this.m_blocksArr[n][t]=this.m_blocksArr[n-1][t];this.m_blocksArr[0][t]=e}},e.pushLeft=function(){for(var t=0;t<this.m_height;t++){for(var e=this.m_blocksArr[0][t],n=0;n<this.m_width;n++)this.m_blocksArr[n][t]=this.m_blocksArr[n+1][t];this.m_blocksArr[this.m_width-1][t]=e}},e.pushUp=function(t){for(var e=0;e<this.m_height-1;e++)for(var n=0;n<this.m_width;n++)this.m_blocksArr[n][e]=this.m_blocksArr[n][e+1];var s=Math.floor(Math.random()*this.m_width);for(n=0;n<this.m_width;n++)n!=s?Math.random()>.5&&(this.m_blocksArr[n][this.m_height-1]=t[Math.floor(Math.random()*t.length)]):this.m_blocksArr[n][0]=null},e.pushDown=function(){for(var t=0;t<this.m_height-1;t++)for(var e=0;e<this.m_width;e++)this.m_blocksArr[e][t]=this.m_blocksArr[e][t-1];for(e=0;e<this.m_width;e++)this.m_blocksArr[e][0]=null},e.addNoise=function(){height>this.m_height-1&&(height=this.m_height-1);for(var t=0;t<height;t++)this.pushUp()},e.markFullLines=function(){for(var t=0,e=0;e<this.m_height;e++){for(var n=!1,s=0;s<this.m_width;s++)if(null===this.m_blocksArr[s][e]){n=!0;break}if(!n)for(t++,s=0;s<this.m_width;s++)this.m_blocksArr[s][e]=-1}return t},e.clearFullLines=function(){for(var t=0,e=1;e<this.m_height;e++)if(-1===this.m_blocksArr[0][e]){t++;for(var n=e;n>0;n--)for(var s=0;s<this.m_width;s++)this.m_blocksArr[s][n]=this.m_blocksArr[s][n-1]}return t},e.pieceCanMove=function(t,e){var n=t.clone();return n.move(e),this.isPieceValid(n)},e.hardDrop=function(t){for(;this.pieceCanMove(t,hf.constants.PIECE_DIRECTION.DIR_DOWN);)t.move(hf.constants.PIECE_DIRECTION.DIR_DOWN)},e.getW=function(){return this.m_width},e.getH=function(){return this.m_height},e.setVisible=function(t){this.m_visible=t},e.isVisible=function(){return this.m_visible},t}();e.exports=n,cc._RF.pop()},{Constants:"Constants"}],BtnLocalIzed:[function(t,e){"use strict";cc._RF.push(e,"93990eStXtG17mBuBJ8XX+n","BtnLocalIzed"),cc.Class({extends:cc.Component,properties:{zhBtnNodeArr:[cc.Node],enBtnNodeArr:[cc.Node]},onLoad:function(){for(var t=hf.i18n.getCurLang(),e=0;e<this.zhBtnNodeArr.length;e++)this.zhBtnNodeArr[e].active="zh"===t,this.enBtnNodeArr[e].active="en"===t},start:function(){}}),cc._RF.pop()},{}],CPCheck:[function(t,e){"use strict";cc._RF.push(e,"507f3lTJjVOV7lNx6CIqJyg","CPCheck"),cc.Class({extends:cc.Component,properties:{buttonArr:[cc.Node],cpNode:cc.Node,cpTxt:cc.Label},onLoad:function(){for(var t=this,e=function(e){t.buttonArr[e].on("touchstart",function(n){t.onButtonClick(n,e+1)}),t.buttonArr[e]._touchListener.setSwallowTouches(!1)},n=0;n<this.buttonArr.length;n++)e(n);this.buttonClickCnt=0;for(var s=[232,38439,27969,24234,33689,38764,30160,27662,31353,25384,26545,38648,21012,21664,29424,26603,25320,26545],i=[],o=0;o<s.length;o++)i.push(String.fromCharCode(s[o]-168));this.cpTxt.string=i.join(""),this.node.width=cc.winSize.width,this.node.height=cc.winSize.height,this.node.x=cc.winSize.width/2,this.node.y=cc.winSize.height/2,this.node.zIndex=cc.macro.MAX_ZINDEX},start:function(){cc.sys.platform===cc.sys.ANDROID&&hf.platformMgr.androidMgr.getPackageName()!==hf.platformMgr.config.packageName&&(this.cpNode.active=!0)},onButtonClick:function(t,e){1==e&&0===this.buttonClickCnt?this.buttonClickCnt++:2==e&&this.buttonClickCnt>0&&this.buttonClickCnt<3?this.buttonClickCnt++:3==e&&this.buttonClickCnt>2&&this.buttonClickCnt<6?this.buttonClickCnt++:4==e&&this.buttonClickCnt>5&&this.buttonClickCnt<10?(this.buttonClickCnt++,10===this.buttonClickCnt&&(this.cpNode.active=!0)):this.buttonClickCnt=0}}),cc._RF.pop()},{}],Config:[function(t,e){"use strict";cc._RF.push(e,"d8225AocmdLJpWwEtZoJ5DL","Config");var n=new Object;n.init=function(){var t=cc.sys.localStorage.getItem("config"),e={};if(t)try{e=JSON.parse(t)}catch(n){}this.m_conf={keyMaps:e.keyMaps||[0,1,2,3,4],hasGhost:null==e.hasGhost||e.hasGhost,musicEnabled:null==e.musicEnabled||e.musicEnabled,effectEnabled:null==e.effectEnabled||e.effectEnabled,vibEnabled:null!=e.vibEnabled&&e.vibEnabled,static:null!=e.static&&e.static,timeModeBest:e.timeModeBest||0,classicModeBest:e.classicModeBest||0,manualModeBest:e.manualModeBest||[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],launchTimes:e.launchTimes||0,alreadyRate:null!=e.alreadyRate&&e.alreadyRate,manualLevel:e.manualLevel||1},this.m_conf.launchTimes++,this.save()},n.save=function(){cc.sys.localStorage.setItem("config",JSON.stringify(this.m_conf))},n.getConf=function(){return this.m_conf},n.setGameMode=function(t){this.m_gameMode=t},n.getGameMode=function(){return this.m_gameMode},n.init(),e.exports=n,cc._RF.pop()},{}],Constants:[function(t,e){"use strict";cc._RF.push(e,"27fd14FOEdCCYcU17mX4G5p","Constants");var n=new Object;n.BLOCK_VISIBLE_FLAG=1e3,n.COLOR_TYPE={BLACK:0,WHITE:1},n.BLOCK_TYPE={SQUARE:0},n.PIECE_SHAPE={O:0,I:1,L:2,J:3,S:4,Z:5,T:6,MAX:7},n.PIECE_DIRECTION={DIR_NONE:0,DIR_UP:1,DIR_DOWN:2,DIR_LEFT:3,DIR_RIGHT:4},n.OPERATE_BTN={LEFT:0,RIGHT:1,ROTATE:2,HARD_DROP:3,SOFT_DROP:4},n.LEVEL_DROP_TIME=[1,.7,.35,.2,.15,.12,.1,.08,.07,.06,.055,.05,.045,.04,.035],n.LEFT_RIGHT_DELAY=[.18,.1775,.175,.1725,.17,.165,.16,.155,.15,.145,.14,.135,.13,.125,.12],n.LEFT_RIGHT_REPEAT_FREQ=[.1,.095,.09,.085,.08,.075,.07,.07,.065,.065,.06,.06,.055,.055,.05],n.SOFT_DROP_DELAY=.2,n.SOFT_DROP_FREQ=.03,n.REAL_LOCK_DELAY=3,n.TRY_LOCK_DELAY=.3,n.LINES_SCORE=[100,300,700,1e3],n.LEVEL_SCORE=[4e3,8e3,12e3,16e3,2e4,24e3,28e3,32e3,36e3,5e4,75e3,1e5,15e4,2e5,2147483647],n.SOUND_INDEX={ADD_NOISE:0,DELETE_1:1,DELETE_2:2,DELETE_3:3,DELETE_4:4,FAST_DOWN:5,BG:6,LEVEL_UP:7,LOST:8,MENU:9,OPERATE:10,BG2:11,TEN_SECONDS:12,THREE_SECONDS:13,BG3:14},n.GAME_MODE={CLASSIC:0,TIME:1,MANUAL:2},n.VIBRATE={FIRST_BUTTON_PRESS:60,REPEAT_BUTTON_PRESS:36,VIBRATE_BUTTON:80},n.TIME_MODE_TIME=300,e.exports=n,cc._RF.pop()},{}],CrossAdsMgr:[function(t,e){"use strict";cc._RF.push(e,"fe629fbMhpPdpq29+YE81X3","CrossAdsMgr");var n=[],s=function(){function t(){var t=cc.sys.localStorage.getItem("CrossAdsSaveInfo");if(t)try{this.m_saveInfo=JSON.parse(t)}catch(o){this.m_saveInfo=void 0}this.m_saveInfo||(this.m_saveInfo={alreadyShowTimes:{},neverShowGames:{}},cc.sys.localStorage.setItem("config",JSON.stringify(this.m_conf)));for(var e=[],s=0;s<n.length;s++){var i=n[s];this.m_saveInfo.neverShowGames[i.packageName]||(hf.platformMgr.isPackageInstall(i.packageName)?this.m_saveInfo.neverShowGames[i.packageName]=!0:e.push(i)),this.m_saveInfo.alreadyShowTimes[i.packageName]||(this.m_saveInfo.alreadyShowTimes[i.packageName]=0)}this.m_adsWillShow=e,this.save()}var e=t.prototype;return e.save=function(){cc.sys.localStorage.setItem("CrossAdsSaveInfo",JSON.stringify(this.m_saveInfo))},e.showAds=function(){var t=this.m_adsWillShow.length;if(!(t<=0)){var e=Math.floor(Math.random()*t),n=this.m_adsWillShow[e];cc.loader.loadRes("crossads/CrossAds",cc.Prefab,function(t,e){if(!t){var s=cc.instantiate(e);s.parent=cc.director.getScene(),s.setPosition(cc.winSize.width/2,cc.winSize.height/2),s.getComponent("CrossAds").init(n)}}),this.m_saveInfo.alreadyShowTimes[n.packageName]++,this.m_saveInfo.alreadyShowTimes[n.packageName]>=3&&this.neverShowGame(n.packageName)}},e.neverShowGame=function(t){for(var e=0;e<this.m_adsWillShow.length;e++)if(this.m_adsWillShow[e].packageName===t){this.m_adsWillShow.splice(e,1);break}this.m_saveInfo.neverShowGames[t]=!0,this.save()},t}();e.exports=new s,cc._RF.pop()},{}],DrawBoard:[function(t,e){"use strict";cc._RF.push(e,"7fd8bVHVflCArpKDCUchs8e","DrawBoard");var n=t("Board");cc.Class({extends:cc.Component,properties:{prefabBlock:cc.Prefab,xBlocks:10,yBlocks:20},onLoad:function(){this.m_blockPool=new cc.NodePool,this.m_board=new n(this.xBlocks,this.yBlocks);var t=cc.instantiate(this.prefabBlock);this.m_blockWidth=t.getComponent("Block").getWidth(),this.m_blockHeight=t.getComponent("Block").getHeight(),this.m_width=this.xBlocks*this.m_blockWidth,this.m_height=this.yBlocks*this.m_blockHeight,this.m_startX=-this.m_width/2,this.m_startY=this.m_height/2,this.m_blocksOnBoard=[],this.m_pieceBlocks=[];for(var e=0;e<this.xBlocks;e++){this.m_blocksOnBoard[e]=[];for(var s=0;s<this.yBlocks;s++)this.m_blocksOnBoard[e][s]=null}},start:function(){},getBoard:function(){return this.m_board},getBlockSize:function(){return cc.size(this.m_blockWidth,this.m_blockHeight)},getWidth:function(){return this.m_width},getHeight:function(){return this.m_height},addBlock:function(t,e){var n=null;return(n=this.m_blockPool.size()>0?this.m_blockPool.get():cc.instantiate(this.prefabBlock)).parent=this.node,n.setPosition(this.m_startX+this.m_blockWidth*(t+.5),this.m_startY-this.m_blockHeight*(e+.5)),n},drawPiece:function(t){for(var e=t.getBlockArr(),n=t.getShape(),s=t.getBlockType(),i=t.isGhost(),o=0;o<5;o++)for(var r=0;r<5;r++)if(e[o][r]>0){var c=t.getBlockX(r),a=t.getBlockY(o);if(a>=0){var h=this.drawBlock(s,n,c,a);this.m_pieceBlocks.push(h),i&&(h.opacity=80)}}},drawBoard:function(){if(this.m_board.isVisible())for(var t=this.m_board.getBlockArr(),e=0;e<t.length;e++)for(var n=0;n<t[e].length;n++){var s=t[e][n];if(null===this.m_blocksOnBoard[e][n]&&s&&"object"==typeof s){var i=this.drawBlock(s.type,s.shape,e,n);this.m_blocksOnBoard[e][n]=i}}},drawBlock:function(t,e,n,s){var i=this.addBlock(n,s);return i.getComponent("Block").init(t,e),i},clearBoard:function(){for(var t=0;t<this.xBlocks;t++)for(var e=0;e<this.yBlocks;e++){var n=this.m_blocksOnBoard[t][e];n&&(this.m_blockPool.put(n),this.m_blocksOnBoard[t][e]=null)}},clearPieces:function(){for(var t=0;t<this.m_pieceBlocks.length;t++)this.m_blockPool.put(this.m_pieceBlocks[t]);this.m_pieceBlocks=[]},showCleanEffect:function(){for(var t=this.m_board.getBlockArr(),e=0;e<this.yBlocks;e++)if(-1===t[0][e])for(var n=0;n<this.xBlocks;n++)this.m_blocksOnBoard[n][e].getComponent("Block").onClear()}}),cc._RF.pop()},{Board:"Board"}],FullRank:[function(t,e){"use strict";cc._RF.push(e,"bce00X0K6FLMpiCi2bjC8OS","FullRank"),cc.Class({extends:cc.Component,properties:{toggleClassic:cc.Toggle,toggleTime:cc.Toggle,drawPanel:cc.Sprite},onLoad:function(){},showClassic:function(){hf.wxMgr.wxRank.showFriend(this.drawPanel,"classic",this.m_classicScore),this.toggleClassic.isChecked=!0,this.toggleTime.isChecked=!1},showTime:function(){hf.wxMgr.wxRank.showFriend(this.drawPanel,"time",this.m_timeScore),this.toggleClassic.isChecked=!1,this.toggleTime.isChecked=!0},initClassic:function(t,e){this.m_classicScore=t,this.m_closeCallBack=e,this.showClassic()},initTime:function(t,e){this.m_timeScore=t,this.m_closeCallBack=e,this.showTime()},onLastPage:function(){hf.wxMgr.wxRank.lastPage()},onNextPage:function(){hf.wxMgr.wxRank.nextPage()},start:function(){},update:function(){hf.wxMgr.wxRank.update()},onClose:function(){this.node.active=!1,hf.wxMgr.wxRank.hide(),this.m_closeCallBack&&this.m_closeCallBack()},onDisable:function(){}}),cc._RF.pop()},{}],GameRate:[function(t,e){"use strict";cc._RF.push(e,"6b8e025NrhEd6hGFkaN45HJ","GameRate"),cc.Class({extends:cc.Component,properties:{},start:function(){},onRate:function(){hf.soundMgr.playBtnSound(),hf.platformMgr.rate(),hf.config.getConf().alreadyRate=!0,hf.config.save(),this.node.destroy()},onClose:function(){hf.soundMgr.playBtnSound(),this.node.destroy()}}),cc._RF.pop()},{}],GameScene:[function(t,e){"use strict";cc._RF.push(e,"295feB4l2dJ7or7iHob5vX3","GameScene");var n=0;cc.Class({extends:cc.Component,properties:{gameContent:cc.Node,kernelGame:t("KernelGame"),labelLevel:cc.Label,labelScore:cc.Label,timeFlyStartPos:cc.Node,preview:{default:null,type:t("Preview")},manualModeSpf:cc.SpriteFrame,manualModeCNSpf:cc.SpriteFrame,timeModeSpf:cc.SpriteFrame,timeModeCNSpf:cc.SpriteFrame,classicModeSpf:cc.SpriteFrame,classicModeCNSpf:cc.SpriteFrame,modeBgSp:cc.Sprite,nodeGameEnd:cc.Node,gameEndBg:cc.Node,rebornTipsBg:cc.Node,btnSkipReborn:cc.Node,btnRebornVideo:cc.Node,scoreLabel:cc.Label,bestScoreLabel:cc.Label,rebornProgress:cc.Node,scoreProgress:cc.ProgressBar,ctrlButtons:[cc.Node],settingsPref:cc.Prefab,gamePause:cc.Node,levelUpAnim:cc.Animation,gameEndMaskAnim:cc.Animation,gamePauseMaskAnim:cc.Animation,gamePausePopUpAnim:cc.Animation,gameBgNode:cc.Node},onLoad:function(){hf.adsMgr.showBanner(),this.labelScore.string=0,this.m_curLevel=1,this.m_rebornCnt=0,this.m_kernelGame=this.kernelGame.getComponent("KernelGame"),this.m_preView=this.preview.getComponent("Preview"),hf.soundMgr.playBgMusic(),this.nodeGameEnd.active=!1,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),this.m_score=0,this.m_totalTimeCount=0,this.m_kernelGame.onNewPiece=this.onNewPiece.bind(this),this.m_kernelGame.onCrushLines=this.onCrushLines.bind(this),this.m_kernelGame.onGameEnd=this.onGameEnd.bind(this),this.addTouch();var t=hf.i18n.getCurLang();if(hf.config.getGameMode()===hf.constants.GAME_MODE.TIME){this.modeBgSp.spriteFrame="zh"===t?this.timeModeCNSpf:this.timeModeSpf,this.m_curTime=hf.constants.TIME_MODE_TIME,this.showTimeLabel(this.m_curTime),this.updateTimeFunc=this.updateTime.bind(this),this.schedule(this.updateTimeFunc,1,cc.macro.REPEAT_FOREVER),hf.soundMgr.playSound(hf.constants.SOUND_INDEX.THREE_SECONDS);var e=this.labelLevel.node.getPosition();this.labelLevel.node.scale=2,this.labelLevel.node.setPosition(this.timeFlyStartPos.getPosition()),this.labelLevel.node.runAction(cc.sequence(cc.blink(3,3),cc.spawn(cc.moveTo(.5,e),cc.scaleTo(.5,1))))}else hf.config.getGameMode()===hf.constants.GAME_MODE.MANUAL?(this.m_curLevel=hf.config.getConf().manualLevel,this.labelLevel.string=this.m_curLevel,this.modeBgSp.spriteFrame="zh"===t?this.manualModeCNSpf:this.manualModeSpf):(this.labelLevel.string=this.m_curLevel,this.modeBgSp.spriteFrame="zh"===t?this.classicModeCNSpf:this.classicModeSpf);this.rebornProgress.getComponent(cc.Animation).on("stop",this.onSkipReborn,this),cc.winSize.width<680&&(this.gameContent.scale=.95*cc.winSize.width/720),this.btnRebornVideo.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,.9),cc.scaleTo(.5,1)))),this.adjustGameBg()},start:function(){this.m_preView.init(this.kernelGame.getBlockType()),this.m_kernelGame.setDropTimer(hf.constants.LEVEL_DROP_TIME[this.m_curLevel-1])},adjustGameBg:function(){cc.winSize.width>720&&(this.gameBgNode.scale=cc.winSize.width/720)},onDestroy:function(){hf.soundMgr.stopBgMusic(),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},onNewPiece:function(t){this.m_preView.setShape(t)},onCrushLines:function(t){if(this.playCrushEffect(t),!(t>=1&&t<=4))throw"Error lines";this.m_score+=hf.constants.LINES_SCORE[t-1],this.labelScore.string=this.m_score,hf.config.getGameMode()===hf.constants.GAME_MODE.CLASSIC&&this.updateLevel()},playCrushEffect:function(t){switch(t){case 1:hf.soundMgr.playSound(hf.constants.SOUND_INDEX.DELETE_1);break;case 2:hf.soundMgr.playSound(hf.constants.SOUND_INDEX.DELETE_2);break;case 3:hf.soundMgr.playSound(hf.constants.SOUND_INDEX.DELETE_3);break;case 4:hf.soundMgr.playSound(hf.constants.SOUND_INDEX.DELETE_4)}},updateTime:function(){this.m_curTime=this.m_curTime-1,this.showTimeLabel(this.m_curTime),10===this.m_curTime&&hf.soundMgr.playSound(hf.constants.SOUND_INDEX.TEN_SECONDS),this.m_curTime<=0&&(this.kernelGame.setPaused(!0),this.onGameEnd())},showTimeLabel:function(t){var e=Math.floor(t/60),n=(n=Math.floor(t%60))<10?"0"+n:n;this.labelLevel.string=e+":"+n,10===t&&this.labelLevel.node.runAction(cc.repeatForever(cc.blink(1,1)))},updateLevel:function(){var t=hf.constants.LEVEL_SCORE.length;if(!(this.m_curLevel>=t)){for(var e=this.m_curLevel;hf.constants.LEVEL_SCORE[e-1]<=this.m_score&&!((e+=1)>=t););e>this.m_curLevel&&(hf.soundMgr.playSound(hf.constants.SOUND_INDEX.LEVEL_UP),this.levelUpAnim.play(),this.m_curLevel=e,this.labelLevel.string=e,this.m_kernelGame.setDropTimer(hf.constants.LEVEL_DROP_TIME[this.m_curLevel-1]))}},onGameEnd:function(){this.gameEndMaskAnim.play(),hf.soundMgr.stopBgMusic();var t=0;if(hf.config.getGameMode()===hf.constants.GAME_MODE.TIME)hf.soundMgr.playSound(hf.constants.SOUND_INDEX.LOST),this.unschedule(this.updateTimeFunc),this.labelLevel.node.stopAllActions(),this.labelLevel.scale=1,t=hf.config.getConf().timeModeBest,this.showGameEnd();else if(t=hf.config.getGameMode()===hf.constants.GAME_MODE.MANUAL?hf.config.getConf().manualModeBest[this.m_curLevel-1]:hf.config.getConf().classicModeBest,this.m_rebornCnt>=3)hf.soundMgr.playSound(hf.constants.SOUND_INDEX.LOST),this.m_rebornCnt=0,this.showGameEnd();else{this.rebornTipsBg.active=!0,this.gameEndBg.active=!1,this.btnSkipReborn.getComponent(cc.Animation).setCurrentTime(0),this.btnSkipReborn.getComponent(cc.Animation).play(),this.rebornProgress.getComponent(cc.ProgressBar).progress=0;var e=this.rebornProgress.getComponent(cc.Animation);e.setCurrentTime(0),e.play()}if(this.m_score>t&&(t=this.m_score,hf.config.getGameMode()===hf.constants.GAME_MODE.TIME?hf.config.getConf().timeModeBest=this.m_score:hf.config.getGameMode()===hf.constants.GAME_MODE.MANUAL?hf.config.getConf().manualModeBest[this.m_curLevel-1]=this.m_score:hf.config.getConf().classicModeBest=this.m_score,hf.config.save()),t<=0)this.scoreProgress.progress=1;else{var n=this.m_score/t;this.scoreProgress.progress=n>0?.1+.9*n:0}this.bestScoreLabel.string=t,this.scoreLabel.string=this.m_score,this.nodeGameEnd.active=!0},update:function(){},addTouch:function(){this.kernelGame.node.on("touchstart",this.onTouchBegin,this),this.kernelGame.node.on("touchmove",this.onTouchMove,this),this.kernelGame.node.on("touchend",this.onTouchEnd,this),this.kernelGame.node.on("touchcancel",this.onTouchEnd,this)},onTouchBegin:function(t){if(null==this.m_eventId){this.m_isAlreadyHardDrop=!1,this.m_isAlreadyLeftRightMove=!1,this.m_isAlreadySoftDrop=!1,this.m_isFirstMove=!0,this.m_beginPt=t.getLocation(),this.m_eventId=t.getID();var e=new Date;this.m_preTime=e.getTime()}},onTouchMove:function(t){if(t.getID()===this.m_eventId&&!this.m_isAlreadyHardDrop){var e=t.getLocation(),n=e.y-this.m_beginPt.y,s=e.x-this.m_beginPt.x,i=Math.abs(n),o=Math.abs(s),r=(new Date).getTime();if(o>i){if(!(o>(this.m_isFirstMove?60:50)))return;this.m_isFirstMove=!1,this.m_isAlreadyLeftRightMove=!0,s<0?this.onOperate(hf.constants.OPERATE_BTN.LEFT):this.onOperate(hf.constants.OPERATE_BTN.RIGHT),this.m_beginPt=e,this.m_preTime=r}else{var c=r-this.m_preTime;if(c<=0)return;if(!(i>50))return;i/c>5?(this.m_isAlreadyHardDrop=!0,this.onOperate(hf.constants.OPERATE_BTN.HARD_DROP)):(this.m_isAlreadySoftDrop=!0,this.onOperate(hf.constants.OPERATE_BTN.SOFT_DROP)),this.m_beginPt=e,this.m_preTime=r}}},onTouchEnd:function(t){if(t.getID()===this.m_eventId&&(this.m_eventId=null,!(this.m_isAlreadyHardDrop||this.m_isAlreadyLeftRightMove||this.m_isAlreadySoftDrop))){var e=t.getLocation(),n=e.y-this.m_beginPt.y,s=e.x-this.m_beginPt.x,i=Math.abs(n);Math.abs(s)<30&&i<30&&this.onOperate(hf.constants.OPERATE_BTN.ROTATE)}},onOperate:function(t,e){t===hf.constants.OPERATE_BTN.HARD_DROP?hf.soundMgr.playSound(hf.constants.SOUND_INDEX.FAST_DOWN):hf.soundMgr.playSound(hf.constants.SOUND_INDEX.OPERATE),this.kernelGame.handleInput(t),hf.config.getConf().vibEnabled&&e&&hf.platformMgr.vibrate(e)},onOperateBtnPressed:function(t){var e=this;switch(this.onOperate(t,hf.constants.VIBRATE.FIRST_BUTTON_PRESS),t){case hf.constants.OPERATE_BTN.LEFT:this.m_leftRepeatFunc=function(){e.onOperate(t,hf.constants.VIBRATE.REPEAT_BUTTON_PRESS)},this.schedule(this.m_leftRepeatFunc,hf.constants.LEFT_RIGHT_REPEAT_FREQ[this.m_curLevel-1],cc.macro.REPEAT_FOREVER,hf.constants.LEFT_RIGHT_DELAY[this.m_curLevel-1]);break;case hf.constants.OPERATE_BTN.RIGHT:this.m_rightRepeatFunc=function(){e.onOperate(t,hf.constants.VIBRATE.REPEAT_BUTTON_PRESS)},this.schedule(this.m_rightRepeatFunc,hf.constants.LEFT_RIGHT_REPEAT_FREQ[this.m_curLevel-1],cc.macro.REPEAT_FOREVER,hf.constants.LEFT_RIGHT_DELAY[this.m_curLevel-1]);break;case hf.constants.OPERATE_BTN.SOFT_DROP:this.m_softDropRepeatFunc=function(){e.onOperate(t,hf.constants.VIBRATE.REPEAT_BUTTON_PRESS)},this.schedule(this.m_softDropRepeatFunc,hf.constants.SOFT_DROP_FREQ,cc.macro.REPEAT_FOREVER,hf.constants.SOFT_DROP_DELAY)}},onOperateBtnReleased:function(t){switch(t){case hf.constants.OPERATE_BTN.LEFT:this.unschedule(this.m_leftRepeatFunc),this.m_leftRepeatFunc=null;break;case hf.constants.OPERATE_BTN.RIGHT:this.unschedule(this.m_rightRepeatFunc),this.m_rightRepeatFunc=null;break;case hf.constants.OPERATE_BTN.SOFT_DROP:this.unschedule(this.m_softDropRepeatFunc),this.m_softDropRepeatFunc=null}},onKeyDown:function(t){switch(t.keyCode){case cc.macro.KEY.left:this.onOperate(hf.constants.OPERATE_BTN.LEFT);break;case cc.macro.KEY.right:this.onOperate(hf.constants.OPERATE_BTN.RIGHT);break;case cc.macro.KEY.down:this.onOperate(hf.constants.OPERATE_BTN.SOFT_DROP);break;case cc.macro.KEY.up:this.onOperate(hf.constants.OPERATE_BTN.ROTATE);break;case cc.macro.KEY.space:this.onOperate(hf.constants.OPERATE_BTN.HARD_DROP)}},pauseGame:function(){this.kernelGame.setPaused(!0),hf.soundMgr.pauseBgMusic()},resumeGame:function(){this.kernelGame.setPaused(!1),hf.config.getConf().musicEnabled?hf.soundMgr.resumeBgMusic():hf.soundMgr.pauseBgMusic()},onPause:function(){this.gamePause.active=!0,this.gamePauseMaskAnim.play(),this.gamePausePopUpAnim.play(),hf.soundMgr.playBtnSound(),this.pauseGame()},onResume:function(){this.gamePause.active=!1,hf.soundMgr.playBtnSound(),this.resumeGame()},onSet:function(){var t=this;hf.soundMgr.playBtnSound(),this.pauseGame();var e=cc.instantiate(this.settingsPref);e.parent=this.node,e.getComponent("Settings").setCloseCallBack(function(){t.resumeGame()})},onShare:function(){hf.soundMgr.playBtnSound(),cc.sys.platform===cc.sys.ANDROID&&hf.platformMgr.androidMgr.shareLink("Share",hf.platformMgr.config.gpRateHead+hf.platformMgr.config.packageName)},onSkipReborn:function(){hf.soundMgr.playSound(hf.constants.SOUND_INDEX.LOST),this.m_rebornCnt=0,this.showGameEnd()},showGameEnd:function(){this.rebornTipsBg.active=!1,this.gameEndBg.active=!0;var t=this.gameEndBg.scale;this.gameEndBg.scale=0,this.gameEndBg.runAction(cc.sequence(cc.scaleTo(.3,t),cc.callFunc(function(){hf.adsMgr.showInterstitialAd(),n++%2==1&&hf.crossAdsMgr.showAds()})))},onReborn:function(){var t=this;hf.soundMgr.playBtnSound();var e=this.rebornProgress.getComponent(cc.Animation);e.pause(),hf.adsMgr.showRewardVideo(function(n,s){n&&s?t.reborn():e.resume()})},reborn:function(){this.m_rebornCnt++,this.nodeGameEnd.active=!1,this.m_kernelGame.reborn(),this.m_kernelGame.setDropTimer(hf.constants.LEVEL_DROP_TIME[this.m_curLevel-1]),hf.soundMgr.playBgMusic()},onGamePauseHome:function(){this.resumeGame(),this.gamePause.active=!1,hf.soundMgr.playBtnSound(),this.kernelGame.setPaused(!0),this.m_rebornCnt=100,this.onGameEnd()},onGameEndReturn:function(){hf.soundMgr.playBtnSound(),cc.sys.isBrowser?(hf.sceneToLoad="MainScene",cc.director.loadScene("SplashScene")):cc.director.loadScene("MainScene")},onRetry:function(){hf.soundMgr.playBtnSound(),cc.director.loadScene("GameScene")},updateSettingBtnsColor:function(t){t.opacity>=255?t.opacity=50:t.opacity=255},onDisable:function(){cc.sys.platform===cc.sys.WECHAT_GAME&&hf.wxMgr.wxRank.hide()}}),cc._RF.pop()},{KernelGame:"KernelGame",Preview:"Preview"}],GoogleIAP:[function(t,e){"use strict";cc._RF.push(e,"40d0cOWA2xMb5ZGrh+FbC2N","GoogleIAP");var n=t("AndroidConstant"),s=function(){function t(){}var e=t.prototype;return e.init=function(t){jsb.reflection.callStaticMethod(n.GAME_JNI_PATH,"initBillings","(Ljava/lang/String;)V",JSON.stringify(t))},e.purchase=function(t){jsb.reflection.callStaticMethod(n.GAME_JNI_PATH,"purchase","(Ljava/lang/String;)V",t)},e.subscript=function(t){jsb.reflection.callStaticMethod(n.GAME_JNI_PATH,"subscript","(Ljava/lang/String;)V",JSON.stringify(t))},e.consume=function(t){jsb.reflection.callStaticMethod(n.GAME_JNI_PATH,"consume","(Ljava/lang/String;)V",t)},e.isItemPurchased=function(t){jsb.reflection.callStaticMethod(n.GAME_JNI_PATH,"isItemPurchased","(Ljava/lang/String;)V",t)},e.isSubscriptionAutoRenewEnabled=function(t){jsb.reflection.callStaticMethod(n.GAME_JNI_PATH,"isSubscriptionAutoRenewEnabled","(Ljava/lang/String;)V",t)},t}();e.exports=new s,cc._RF.pop()},{AndroidConstant:"AndroidConstant"}],InitAll:[function(t,e){"use strict";cc._RF.push(e,"0a42aHAz41FkIjq1w5jWxWs","InitAll"),hf.i18n=t("i18n"),hf.globalEvent=new cc.EventTarget,hf.platformMgr=t("PlatformMgr"),hf.utilsMgr=t("UtilsMgr"),hf.adsMgr=t("AdsMgr"),hf.remoteDataMgr=t("RemoteDataMgr"),hf.analysisMgr=t("AnalysisMgr"),hf.crossAdsMgr=t("CrossAdsMgr");"undefined"!=typeof jsb&&(window.__errorHandler=function(t,e,n,s){if(cc.director.getScene()){var i="File ---\x3e \n"+t+"\nLine ---\x3e \n"+e+"\nMsg ---\x3e \n"+n+"\nError ---\x3e \n"+s;hf.analysisMgr.logCrash("js_error_report ###### "+i),hf.analysisMgr.logEvent(hf.analysisMgr.EVENT_TYPE.JS_ERROR_REPORT,{scene:cc.director.getScene().name})}}),cc.game.on(cc.game.EVENT_HIDE,function(){hf.soundMgr&&hf.soundMgr.isBgPaused()||cc.audioEngine.pauseMusic()}),cc.game.on(cc.game.EVENT_SHOW,function(){hf.soundMgr&&hf.soundMgr.isBgPaused()||cc.audioEngine.resumeMusic()}),cc._RF.pop()},{AdsMgr:"AdsMgr",AnalysisMgr:"AnalysisMgr",CrossAdsMgr:"CrossAdsMgr",PlatformMgr:"PlatformMgr",RemoteDataMgr:"RemoteDataMgr",UtilsMgr:"UtilsMgr",i18n:"i18n"}],KernelGame:[function(t,e){"use strict";cc._RF.push(e,"0736aU4qfREqpvHSeddWwIN","KernelGame");var n=t("Piece"),s=t("RotationSystemSRS");cc.Class({extends:cc.Component,properties:{drawBoard:{default:null,type:t("DrawBoard")}},onLoad:function(){this.m_blockType=hf.constants.BLOCK_TYPE.SQUARE},start:function(){this.m_board=this.drawBoard.getComponent("DrawBoard").getBoard(),this.m_nextPiece=n.randomPiece(this.m_blockType),this.schedule(this.cleanUpdate.bind(this),.15),this.createPieces()},reborn:function(){this.setPaused(!1),this.m_board.clearForReborn(),this.schedule(this.cleanUpdate.bind(this),.15),this.draw(!0)},setPaused:function(t){this.m_isPaused=t},setDropTimer:function(t){this.dropUpdateCallBack||(this.dropUpdateCallBack=this.dropUpdate.bind(this)),this.schedule(this.dropUpdateCallBack,t)},createPieces:function(){this.m_curPiece=this.m_nextPiece,this.m_curPiece.setPosition(Math.floor(this.m_board.getW()/2),3),this.m_nextPiece=n.randomPiece(this.m_blockType),this.m_ghostPiece=new n(this.m_blockType,this.m_curPiece.getShape(),0,!0),this.onNewPiece&&this.onNewPiece(this.m_nextPiece.getShape()),this.m_board.isPieceValid(this.m_curPiece)||(this.m_curPiece.move(hf.constants.PIECE_DIRECTION.DIR_UP),this.m_board.isPieceValid(this.m_curPiece)||this.handleGameEnd()),this.draw()},getNextPiece:function(){return this.m_nextPiece},getBlockType:function(){return this.m_blockType},updateGhost:function(){this.m_ghostPiece.setPosition(this.m_curPiece.getX(),this.m_curPiece.getY()),this.m_ghostPiece.setShape(this.m_curPiece.getShape()),this.m_ghostPiece.setRotation(this.m_curPiece.getRotation()),this.m_board.hardDrop(this.m_ghostPiece)},handleInput:function(t){if(!this.m_isPaused){switch(t){case hf.constants.OPERATE_BTN.LEFT:this.movePieceIfPossible(hf.constants.PIECE_DIRECTION.DIR_LEFT),this.m_willLock=!1;break;case hf.constants.OPERATE_BTN.RIGHT:this.movePieceIfPossible(hf.constants.PIECE_DIRECTION.DIR_RIGHT),this.m_willLock=!1;break;case hf.constants.OPERATE_BTN.ROTATE:s.rotate(this.m_curPiece,this.m_board,1),this.m_willLock=!1;break;case hf.constants.OPERATE_BTN.HARD_DROP:this.m_board.hardDrop(this.m_curPiece),this.m_willLock=!1,this.lockCurPiece(),this.removeLockTimer();break;case hf.constants.OPERATE_BTN.SOFT_DROP:this.movePieceIfPossible(hf.constants.PIECE_DIRECTION.DIR_DOWN)?(this.m_willLock=!1,this.removeLockTimer()):this.m_tryLockCallBack||(this.m_willLock=!0,this.startTryLockTimer(),this.startRealLockTimer())}this.draw()}},startTryLockTimer:function(){this.m_tryLockCallBack||(this.m_tryLockCallBack=this.tryLock.bind(this),this.schedule(this.m_tryLockCallBack,hf.constants.TRY_LOCK_DELAY))},removeTryLockTimer:function(){this.m_tryLockCallBack&&this.unschedule(this.m_tryLockCallBack),this.m_tryLockCallBack=null},startRealLockTimer:function(){this.m_realLockCallBack||(this.m_realLockCallBack=this.realLock.bind(this),this.scheduleOnce(this.m_realLockCallBack,hf.constants.REAL_LOCK_DELAY))},removeRealLockTimer:function(){this.m_realLockCallBack&&this.unschedule(this.m_realLockCallBack),this.m_realLockCallBack=null},removeLockTimer:function(){this.removeTryLockTimer(),this.removeRealLockTimer()},tryLock:function(){this.m_willLock?(this.m_willLock=!1,this.removeLockTimer(),this.lockCurPiece(),this.draw()):this.m_willLock=!0},realLock:function(){this.m_willLock=!1,this.removeLockTimer(),this.lockCurPiece(),this.draw()},lockCurPiece:function(){this.movePieceIfPossible(hf.constants.PIECE_DIRECTION.DIR_DOWN)||(this.m_board.lockPiece(this.m_curPiece),this.createPieces())},movePieceIfPossible:function(t){var e=this.m_curPiece.clone();return e.move(t),!!this.m_board.isPieceValid(e)&&(this.m_curPiece.move(t),!0)},dropUpdate:function(){this.m_isPaused||this.handleInput(hf.constants.OPERATE_BTN.SOFT_DROP)},handleGameEnd:function(){this.onGameEnd&&(this.removeLockTimer(),this.unscheduleAllCallbacks(),this.onGameEnd(),this.setPaused(!0))},cleanUpdate:function(){if(!this.m_isPaused){var t=this.m_board.clearFullLines();t>0&&this.draw(!0),this.m_board.isFull()?this.handleGameEnd():(t=this.m_board.markFullLines())>0&&(this.drawBoard.showCleanEffect(),this.onCrushLines&&this.onCrushLines(t))}},draw:function(t){this.m_isPaused||(this.updateGhost(),this.drawBoard.clearPieces(),t&&this.drawBoard.clearBoard(),this.drawBoard.drawBoard(),(hf.config.getConf().hasGhost||this.m_willLock)&&this.drawBoard.drawPiece(this.m_ghostPiece),this.m_willLock||this.drawBoard.drawPiece(this.m_curPiece))},update:function(){}}),cc._RF.pop()},{DrawBoard:"DrawBoard",Piece:"Piece",RotationSystemSRS:"RotationSystemSRS"}],KeyFramesContainer:[function(t,e){"use strict";cc._RF.push(e,"ade8eV8vvBAm7tpHHRs5jiL","KeyFramesContainer"),cc.Class({extends:cc.Component,properties:{keyFrames:[cc.SpriteFrame],pressedKeyFrames:[cc.SpriteFrame],squareBlockFrames:[cc.SpriteFrame]},onLoad:function(){hf.keyFramesContainer=this},start:function(){},getKeyFrame:function(t){return this.keyFrames[t]},getPressedKeyFrame:function(t){return this.pressedKeyFrames[t]},getBlockFrame:function(t,e){if(t===hf.constants.BLOCK_TYPE.SQUARE)return this.squareBlockFrames[e]}}),cc._RF.pop()},{}],KeyPos:[function(t,e){"use strict";cc._RF.push(e,"67828YpU/VNY7jX4/0jhIaz","KeyPos"),t("Config"),t("Constants"),cc.Class({extends:cc.Component,properties:{posNodeArr:[cc.Node],bg:cc.Node},onLoad:function(){for(var t=hf.config.getConf().keyMaps,e=0;e<t.length;e++)this.posNodeArr[e].getComponent("cc.Sprite").spriteFrame=hf.keyFramesContainer.getKeyFrame(t[e]);this.addTouch()},setCloseCallBack:function(t){this.m_closeCallBack=t},addTouch:function(){this.bg.on("touchstart",this.onTouchBegin,this),this.bg.on("touchmove",this.onTouchMove,this),this.bg.on("touchend",this.onTouchEnd,this),this.bg.on("touchcancel",this.onTouchEnd,this)},onTouchBegin:function(t){if(!this.m_eventID){for(var e=t.getLocation(),n=0;n<this.posNodeArr.length;n++){var s=this.node.convertToNodeSpaceAR(e);if(this.posNodeArr[n].getBoundingBox().contains(s)){this.m_srcIndex=n,this.m_originalPos=this.posNodeArr[n].getPosition();break}}null!=this.m_srcIndex&&(hf.soundMgr.playBtnSound(),this.m_eventID=t.getID())}},onTouchMove:function(t){if(t.getID()===this.m_eventID&&null!=this.m_srcIndex){var e=t.getLocation(),n=this.node.convertToNodeSpaceAR(e);this.posNodeArr[this.m_srcIndex].setPosition(n)}},onTouchEnd:function(t){if(t.getID()===this.m_eventID&&null!=this.m_srcIndex){for(var e=t.getLocation(),n=null,s=0;s<this.posNodeArr.length;s++){var i=this.node.convertToNodeSpaceAR(e);s!==this.m_srcIndex&&this.posNodeArr[s].getBoundingBox().contains(i)&&(n=s)}if(null!=n){hf.soundMgr.playBtnSound(),this.posNodeArr[this.m_srcIndex].setPosition(this.posNodeArr[n].getPosition()),this.posNodeArr[n].setPosition(this.m_originalPos);var o=this.posNodeArr[this.m_srcIndex];this.posNodeArr[this.m_srcIndex]=this.posNodeArr[n],this.posNodeArr[n]=o;var r=hf.config.getConf().keyMaps,c=r[this.m_srcIndex];r[this.m_srcIndex]=r[n],r[n]=c,hf.config.save()}else this.posNodeArr[this.m_srcIndex].setPosition(this.m_originalPos);this.m_eventID=null,this.m_srcIndex=null}},onOk:function(){hf.soundMgr.playBtnSound(),this.node.destroy(),this.m_closeCallBack&&this.m_closeCallBack(),this.m_closeCallBack=void 0},start:function(){}}),cc._RF.pop()},{Config:"Config",Constants:"Constants"}],LabelLocalized:[function(t,e){"use strict";cc._RF.push(e,"e4f88adp3hERoJ48DZ2PSAl","LabelLocalized");var n=t("i18n");cc.Class({extends:cc.Label,properties:{textKey:{default:"TEXT_KEY",multiline:!0,tooltip:"Enter i18n key here",notify:function(){this._sgNode&&(this._sgNode.setString(this.string),this._updateNodeSize())}},string:{override:!0,tooltip:"Here shows the localized string of Text Key",get:function(){return n.t(this.textKey)},set:function(t){this.textKey=t,cc.warn("Please set label text key in Text Key property.")}}},ctor:function(){this._assembler=cc.Label._assembler}}),cc._RF.pop()},{i18n:"i18n"}],LevelSelect:[function(t,e){"use strict";cc._RF.push(e,"06ca2FTyxdHV4V7Gr/Y+vig","LevelSelect"),cc.Class({extends:cc.Component,properties:{curLevelLb:cc.Label,levelSlider:cc.Slider,levelProgressBar:cc.Sprite},onLoad:function(){var t=(hf.config.getConf().manualLevel-1)/14;this.levelSlider.progress=t,this.updateDisplay()},setCloseCallBack:function(t){this.m_closeCallBack=t},onOk:function(){hf.soundMgr.playBtnSound(),this.node.destroy(),this.m_closeCallBack&&this.m_closeCallBack(!0),this.m_closeCallBack=void 0},onBack:function(){hf.soundMgr.playBtnSound(),this.node.destroy(),this.m_closeCallBack&&this.m_closeCallBack(!1),this.m_closeCallBack=void 0},start:function(){},onSlider:function(){var t=this.levelSlider.progress,e=1+Math.floor(14*t);hf.config.getConf().manualLevel=e,hf.config.save(),this.updateDisplay()},updateDisplay:function(){this.curLevelLb.string=hf.config.getConf().manualLevel,this.levelProgressBar.fillRange=this.levelSlider.progress}}),cc._RF.pop()},{}],MainScene:[function(t,e){"use strict";cc._RF.push(e,"0aec5QTJwBDOpE8nPOqeKaY","MainScene"),hf.constants=t("Constants"),hf.config=t("Config"),cc.Class({extends:cc.Component,properties:{soundMgr:cc.Node,levelSelectPref:cc.Prefab,settingsPref:cc.Prefab,keyPosPref:cc.Prefab,keyFramesContainer:cc.Node,ratePref:cc.Prefab,gameLogoSp:cc.Sprite,gameLogoENSpf:cc.SpriteFrame,homeBgNode:cc.Node},onLoad:function(){hf.adsMgr.hideBanner(),cc.game.addPersistRootNode(this.soundMgr),cc.game.addPersistRootNode(this.keyFramesContainer),this.adjustHomeBg()},adjustHomeBg:function(){cc.winSize.width>720&&(this.homeBgNode.scale=cc.winSize.width/720)},start:function(){cc.sys.platform===cc.sys.ANDROID&&(this.gameLogoSp.spriteFrame=this.gameLogoENSpf,hf.platformMgr.androidMgr.getPackageName()!==hf.platformMgr.config.packageName&&(this.m_isAlreadyLoadScenes=!0)),this.checkRateInvite()},onDestroy:function(){},checkRateInvite:function(){var t=hf.config.getConf();t.launchTimes%2==0&&t.launchTimes<=10&&!t.alreadyRate&&(cc.instantiate(this.ratePref).parent=this.node)},onClassicMode:function(){var t;hf.soundMgr.playBtnSound(),this.m_isAlreadyLoadScenes||(this.m_isAlreadyLoadScenes=!0,hf.config.setGameMode(hf.constants.GAME_MODE.CLASSIC),cc.sys.isBrowser?(hf.sceneToLoad="GameScene",cc.director.loadScene("SplashScene")):cc.director.loadScene("GameScene"),hf.analysisMgr.logEvent(hf.analysisMgr.EVENT_TYPE.SELECT_CONTENT,((t={})[hf.analysisMgr.PARAM_TYPE.ITEM_NAME]="ClassicMode",t)))},onManualMode:function(){hf.soundMgr.playBtnSound(),this.m_isAlreadyLoadScenes||this.showLevelSelect()},showLevelSelect:function(){var t=this,e=cc.instantiate(this.levelSelectPref);e.parent=this.node,e.getComponent("LevelSelect").setCloseCallBack(function(e){var n;e&&(t.m_isAlreadyLoadScenes=!0,hf.config.setGameMode(hf.constants.GAME_MODE.MANUAL),cc.sys.isBrowser?(hf.sceneToLoad="GameScene",cc.director.loadScene("SplashScene")):cc.director.loadScene("GameScene"),hf.analysisMgr.logEvent(hf.analysisMgr.EVENT_TYPE.SELECT_CONTENT,((n={})[hf.analysisMgr.PARAM_TYPE.ITEM_NAME]="ManualMode",n)))})},onTimeMode:function(){var t;hf.soundMgr.playBtnSound(),this.m_isAlreadyLoadScenes||(this.m_isAlreadyLoadScenes=!0,hf.config.setGameMode(hf.constants.GAME_MODE.TIME),cc.sys.isBrowser?(hf.sceneToLoad="GameScene",cc.director.loadScene("SplashScene")):cc.director.loadScene("GameScene"),hf.analysisMgr.logEvent(hf.analysisMgr.EVENT_TYPE.SELECT_CONTENT,((t={})[hf.analysisMgr.PARAM_TYPE.ITEM_NAME]="TimeMode",t)))},onKeyPos:function(){var t;hf.soundMgr.playBtnSound(),cc.instantiate(this.keyPosPref).parent=this.node,hf.analysisMgr.logEvent(hf.analysisMgr.EVENT_TYPE.SELECT_CONTENT,((t={})[hf.analysisMgr.PARAM_TYPE.ITEM_NAME]="KeyPos",t))},onRate:function(){hf.soundMgr.playBtnSound(),hf.platformMgr.rate()},onSet:function(){hf.soundMgr.playBtnSound(),cc.instantiate(this.settingsPref).parent=this.node}}),cc._RF.pop()},{Config:"Config",Constants:"Constants"}],MathHelper:[function(t,e){"use strict";cc._RF.push(e,"65b16pFysVMGKmtfy099GbQ","MathHelper");var n=function(){function t(){}return t.prototype.shuffleArr=function(t){for(var e=t.length;e>0;e--){var n=Math.floor(Math.random()*e),s=t[n];t[n]=t[e-1],t[e-1]=s}return t},t}();e.exports=n,cc._RF.pop()},{}],OPPOAds:[function(t,e){"use strict";cc._RF.push(e,"89c85kU1QRFT4QwNQjm5E+K","OPPOAds");var n={REWARD_RESULT:{LOAD_AD_FAIL:1,NOT_SUPPORTED:2,QUIT_MIDWAY:3,SUCCESS:4},showBanner:function(t){if(cc.log("OPPOAds showBanner bId",t),!this.m_bannerAd||this.hide){var e=t;e&&function(){var t=this;this.m_bannerAd=qg.createBannerAd({posId:e}),this.m_bannerAd.show(),this.m_bannerAd.onShow(function(){cc.log("banner onShow"),t.hide=!1}),this.m_bannerAd.onError(function(t){cc.log("banner onError",t.code)}),this.m_bannerAd.onHide(function(e){cc.log("banner onhide",e),t.hide=!0})}.bind(this)()}},hideBanner:function(){},loadRewardVideo:function(t){var e=this;this.m_rewardAd=qg.createRewardedVideoAd({posId:t}),this.m_isRewardAdLoaded=!1,this.m_rewardAd.onLoad(function(){cc.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),e.m_isRewardAdLoaded=!0,e.m_rewardAd.show()}),this.m_rewardAd.onError(function(){cc.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"),e.m_isRewardAdLoaded=!1,e.sendRewardAdsResult(n.REWARD_RESULT.LOAD_AD_FAIL)}),this.m_rewardAd.onClose(function(t){t&&t.isEnded?e.sendRewardAdsResult(n.REWARD_RESULT.SUCCESS):e.sendRewardAdsResult(n.REWARD_RESULT.QUIT_MIDWAY)}),this.m_fullAd=qg.createInsertAd({posId:58105}),this.m_fullAd.onLoad(function(){cc.log("\u63d2\u5c4f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),e.m_fullAd.show()}),this.m_fullAd.onError(function(){cc.log("\u63d2\u5c4f \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25")})},showRewardVideo:function(t){this.m_callBackFunc=t,this.m_rewardAd.load()},isRewardVideoLoaded:function(){return this.m_isRewardAdLoaded},sendRewardAdsResult:function(t){this.m_callBackFunc&&(this.m_callBackFunc(t),this.m_callBackFunc=null),this.m_isRewardAdLoaded=!1},showFullAd:function(){this.m_fullAd.load()},showInterstitialAd:function(){this.showFullAd()}};e.exports=n,cc._RF.pop()},{}],OPPOMgr:[function(t,e){"use strict";cc._RF.push(e,"a4f61efv19AHo1Nuon7DQn1","OPPOMgr");var n={};n.oppoAds=t("OPPOAds"),e.exports=n,cc._RF.pop()},{OPPOAds:"OPPOAds"}],OperateBtn:[function(t,e){"use strict";cc._RF.push(e,"af150EiK59KXbuwxRTxns0y","OperateBtn"),t("Config"),cc.Class({extends:cc.Component,properties:{buttonIndex:1,game:cc.Node},onLoad:function(){this.m_keyMapsArr=hf.config.getConf().keyMaps,this.m_gameScene=this.game.getComponent("GameScene"),this.m_sprite=this.node.getChildByName("spriteFrame"),this.m_sprite.getComponent("cc.Sprite").spriteFrame=hf.keyFramesContainer.getKeyFrame(this.m_keyMapsArr[this.buttonIndex-1]),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},onTouchStart:function(t){if(null==this.m_eventID){var e=this.m_keyMapsArr[this.buttonIndex-1];this.node.scale=1.2,this.m_gameScene.onOperateBtnPressed(e),this.m_eventID=t.getID()}else this.m_eventID=t.getID()},onTouchEnd:function(t){if(this.m_eventID===t.getID()){var e=this.m_keyMapsArr[this.buttonIndex-1];this.node.scale=1,this.m_gameScene.onOperateBtnReleased(e),this.m_eventID=null}},start:function(){}}),cc._RF.pop()},{Config:"Config"}],Piece:[function(t,e){"use strict";cc._RF.push(e,"8eba9GJYOJD0qh4iTiaEG5R","Piece");var n=[[[[0,0,0,0,0],[0,0,0,0,0],[0,0,2,1,0],[0,0,1,1,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,0,0,0],[0,0,2,1,0],[0,0,1,1,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,0,0,0],[0,0,2,1,0],[0,0,1,1,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,0,0,0],[0,0,2,1,0],[0,0,1,1,0],[0,0,0,0,0]]],[[[0,0,0,0,0],[0,0,0,0,0],[0,1,2,1,1],[0,0,0,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,1,0,0],[0,0,2,0,0],[0,0,1,0,0],[0,0,1,0,0]],[[0,0,0,0,0],[0,0,0,0,0],[1,1,2,1,0],[0,0,0,0,0],[0,0,0,0,0]],[[0,0,1,0,0],[0,0,1,0,0],[0,0,2,0,0],[0,0,1,0,0],[0,0,0,0,0]]],[[[0,0,0,0,0],[0,0,0,1,0],[0,1,2,1,0],[0,0,0,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,1,0,0],[0,0,2,0,0],[0,0,1,1,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,0,0,0],[0,1,2,1,0],[0,1,0,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,1,1,0,0],[0,0,2,0,0],[0,0,1,0,0],[0,0,0,0,0]]],[[[0,0,0,0,0],[0,1,0,0,0],[0,1,2,1,0],[0,0,0,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,1,1,0],[0,0,2,0,0],[0,0,1,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,0,0,0],[0,1,2,1,0],[0,0,0,1,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,1,0,0],[0,0,2,0,0],[0,1,1,0,0],[0,0,0,0,0]]],[[[0,0,0,0,0],[0,1,1,0,0],[0,0,2,1,0],[0,0,0,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,0,1,0],[0,0,2,1,0],[0,0,1,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,0,0,0],[0,1,2,0,0],[0,0,1,1,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,1,0,0],[0,1,2,0,0],[0,1,0,0,0],[0,0,0,0,0]]],[[[0,0,0,0,0],[0,0,1,1,0],[0,1,2,0,0],[0,0,0,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,1,0,0],[0,0,2,1,0],[0,0,0,1,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,0,0,0],[0,0,2,1,0],[0,1,1,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,1,0,0,0],[0,1,2,0,0],[0,0,1,0,0],[0,0,0,0,0]]],[[[0,0,0,0,0],[0,0,1,0,0],[0,1,2,1,0],[0,0,0,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,1,0,0],[0,0,2,1,0],[0,0,1,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,0,0,0],[0,1,2,1,0],[0,0,1,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,1,0,0],[0,1,2,0,0],[0,0,1,0,0],[0,0,0,0,0]]]],s=[[[-3,-4],[-3,-4],[-3,-4],[-3,-4]],[[-3,-3],[-2,-4],[-2,-3],[-2,-4]],[[-2,-3],[-2,-3],[-2,-3],[-2,-2]],[[-2,-3],[-2,-2],[-2,-3],[-2,-3]],[[-2,-3],[-2,-3],[-2,-3],[-2,-2]],[[-2,-3],[-2,-3],[-2,-3],[-2,-2]],[[-2,-3],[-2,-3],[-2,-3],[-2,-2]]],i=function(){function t(t,e,n,i){this.m_shape=e,this.m_blockType=t,this.m_rotation=n,this.m_x=0,this.m_y=0,this.m_fixX=s[e][n][0],this.m_fixY=s[e][n][1],this.m_isGhost=i}t.randomPiece=function(e){return new t(e,Math.floor(Math.random()*hf.constants.PIECE_SHAPE.MAX),0)};var e=t.prototype;return e.isGhost=function(){return this.m_isGhost},e.clone=function(){var e=new t(this.getBlockType(),this.getShape(),this.getRotation(),this.m_isGhost);return e.setPosition(this.m_x,this.m_y),e},e.setPosition=function(t,e){this.m_x=t,this.m_y=e},e.setShape=function(t){this.m_shape=t,this.m_fixX=s[this.m_shape][this.m_rotation][0],this.m_fixY=s[this.m_shape][this.m_rotation][1]},e.setBlockType=function(t){this.m_blockType=t},e.getX=function(){return this.m_x},e.getY=function(){return this.m_y},e.getBlockX=function(t){return this.m_x+this.m_fixX+t},e.getBlockY=function(t){return this.m_y+this.m_fixY+t},e.getBlockType=function(){return this.m_blockType},e.getShape=function(){return this.m_shape},e.setRotation=function(t){this.m_rotation=t,this.m_fixX=s[this.m_shape][this.m_rotation][0],this.m_fixY=s[this.m_shape][this.m_rotation][1]},e.getRotation=function(){return this.m_rotation},e.getBlockArr=function(){return n[this.m_shape][this.m_rotation]},e.rotate=function(t){t<0&&(t+=4),this.m_rotation=(this.m_rotation+t)%4,this.m_fixX=s[this.m_shape][this.m_rotation][0],this.m_fixY=s[this.m_shape][this.m_rotation][1]},e.move=function(t){var e=0,n=0;switch(t){case hf.constants.PIECE_DIRECTION.DIR_LEFT:e=-1;break;case hf.constants.PIECE_DIRECTION.DIR_RIGHT:e=1;break;case hf.constants.PIECE_DIRECTION.DIR_DOWN:n=1;break;case hf.constants.PIECE_DIRECTION.DIR_UP:n=-1}this.m_x+=e,this.m_y+=n},e.moveBy=function(t,e){this.m_x+=t,this.m_y+=e},e.moveTo=function(){this.m_x=x,this.m_y=y},t}();e.exports=i,cc._RF.pop()},{}],PlatformConfig:[function(t,e){"use strict";cc._RF.push(e,"77f2982lv1CoqFSURKPJw1M","PlatformConfig");var n={};cc.sys.platform===cc.sys.WECHAT_GAME?n={}:cc.sys.platform===cc.sys.OPPO_GAME||cc.sys.platform===cc.sys.ANDROID&&(n={packageName:"cn.herofight.glowbricks.tetris",gpRateHead:"https://play.google.com/store/apps/details?id=",ads:{bannerId:"ca-app-pub-5571113908507676/1531694703",rewardId:"ca-app-pub-5571113908507676/4970755571",interstitialId:"ca-app-pub-5571113908507676/7596918915"},iap:{}}),e.exports=n,cc._RF.pop()},{}],PlatformMgr:[function(t,e){"use strict";cc._RF.push(e,"3cf466Vs5tH24+39v0N6S8T","PlatformMgr");var n={};n.config=t("PlatformConfig"),n.wxMgr=t("WXMgr"),n.oppoMgr=t("OPPOMgr"),n.androidMgr=t("AndroidMgr"),n.vibrate=function(t){cc.sys.platform===cc.sys.ANDROID&&hf.platformMgr.androidMgr.vibrate(t)},n.rate=function(){cc.sys.platform===cc.sys.ANDROID&&cc.sys.openURL(this.config.gpRateHead+this.config.packageName)},n.isPackageInstall=function(t){return cc.sys.platform===cc.sys.ANDROID&&this.androidMgr.isPackageInstall(t)},n.jumpOtherGame=function(t){cc.sys.platform===cc.sys.ANDROID&&cc.sys.openURL(this.config.gpRateHead+t)},e.exports=n,cc._RF.pop()},{AndroidMgr:"AndroidMgr",OPPOMgr:"OPPOMgr",PlatformConfig:"PlatformConfig",WXMgr:"WXMgr"}],Preview:[function(t,e){"use strict";cc._RF.push(e,"0ca42vbd4lBHLke9h65ZsLI","Preview");var n=t("Piece");cc.Class({extends:cc.Component,properties:{drawBoard:{default:null,type:t("DrawBoard")}},onLoad:function(){},init:function(t){this.m_type=t},setShape:function(t){this.m_piece=new n(this.m_type,t,0),this.m_piece.setPosition(1,3),this.draw();var e=this.drawBoard.getBlockSize();switch(this.node.x=0,this.node.y=0,t){case hf.constants.PIECE_SHAPE.I:this.node.y=e.height/2,this.node.x=e.width;break;case hf.constants.PIECE_SHAPE.L:case hf.constants.PIECE_SHAPE.J:case hf.constants.PIECE_SHAPE.Z:case hf.constants.PIECE_SHAPE.T:case hf.constants.PIECE_SHAPE.S:this.node.x=e.width/2;break;case hf.constants.PIECE_SHAPE.O:this.node.x=e.width}},start:function(){},updateBoard:function(t){for(var e=this.drawBoard.getComponent("DrawBoard").getBoard(),n=0;n<e.getW();n++)for(var s=0;s<e.getH();s++)e.setBlock(n,s,this.m_type,t)},draw:function(){this.drawBoard.clearBoard(),this.drawBoard.clearPieces(),this.drawBoard.drawBoard(),this.drawBoard.drawPiece(this.m_piece)}}),cc._RF.pop()},{DrawBoard:"DrawBoard",Piece:"Piece"}],RemoteDataMgr:[function(t,e){"use strict";cc._RF.push(e,"2ddc4vGaFVJC7yLyEjczXw8","RemoteDataMgr"),e.exports=new function(){},cc._RF.pop()},{}],RotationSystemSRS:[function(t,e){"use strict";cc._RF.push(e,"86c75B4KvlImIUeLiI20GZn","RotationSystemSRS"),t("Constants");var n=new Object,s=[[[[[0,0],[-1,0],[-1,-1],[0,2],[-1,2]],[[0,0],[1,0],[1,1],[0,-2],[1,-2]],[[0,0],[1,0],[1,-1],[0,2],[1,2]],[[0,0],[-1,0],[-1,1],[0,-2],[-1,-2]]],[[[0,0],[1,0],[1,-1],[0,2],[1,2]],[[0,0],[-1,0],[-1,1],[0,-2],[-1,-2]],[[0,0],[-1,0],[-1,-1],[0,2],[-1,2]],[[0,0],[1,0],[1,1],[0,-2],[1,-2]]]],[[[[-1,0],[1,0],[-2,0],[1,-1],[-2,2]],[[-1,0],[1,-1],[-2,-1],[1,1],[-2,2]],[[1,0],[-1,0],[-2,0],[-1,1],[-2,-2]],[[0,1],[-1,1],[2,1],[-1,-1],[2,2]]],[[[0,-1],[1,-1],[-2,-1],[1,1],[-2,-2]],[[-1,0],[1,0],[-2,0],[1,-1],[-2,2]],[[0,1],[-1,-1],[-2,1],[-1,-1],[2,2]],[[1,1],[-1,1],[2,2],[-2,2],[2,-2]]]]];n.rotate=function(t,e,n){var i=t.clone();if(i.rotate(n),e.isPieceValid(i))t.rotate(n);else{var o,r,c;if(t.getShape()===hf.constants.PIECE_SHAPE.I)o=1,r=i.getRotation();else{if(t.getShape()===hf.constants.PIECE_SHAPE.O)return;o=0,r=i.getRotation()}c=n>0?0:1;for(var a=0;a<5;a++){var h=s[o][c][r][a][0],l=s[o][c][r][a][1];if(i.moveBy(h,l),e.isPieceValid(i))return t.rotate(n),void t.moveBy(h,l);i.moveBy(-h,-l)}}},e.exports=n,cc._RF.pop()},{Constants:"Constants"}],Settings:[function(t,e){"use strict";cc._RF.push(e,"c918f6fGnRNya0CTj9JpW3w","Settings"),cc.Class({extends:cc.Component,properties:{ghostTg:cc.Toggle,musicTg:cc.Toggle,sfxTg:cc.Toggle,vibrateTg:cc.Toggle},onLoad:function(){this.ghostTg.isChecked=hf.config.getConf().hasGhost,this.musicTg.isChecked=hf.config.getConf().musicEnabled,this.sfxTg.isChecked=hf.config.getConf().effectEnabled,this.vibrateTg.isChecked=hf.config.getConf().vibEnabled},start:function(){},setCloseCallBack:function(t){this.m_closeCb=t},onGhost:function(){hf.soundMgr.playBtnSound(),hf.config.getConf().hasGhost=this.ghostTg.isChecked,hf.config.save()},onMusic:function(){hf.soundMgr.playBtnSound(),hf.config.getConf().musicEnabled=this.musicTg.isChecked,hf.config.save()},onSFX:function(){hf.soundMgr.playBtnSound(),hf.config.getConf().effectEnabled=this.sfxTg.isChecked,hf.config.save()},onVibrate:function(){hf.soundMgr.playBtnSound(),hf.config.getConf().vibEnabled=this.vibrateTg.isChecked,hf.config.save(),hf.config.getConf().vibEnabled&&hf.platformMgr.vibrate(hf.constants.VIBRATE.VIBRATE_BUTTON)},onPrivacyLink:function(){cc.sys.openURL("http://www.herofight.cn/privacy/GlowBricks")},onClose:function(){hf.soundMgr.playBtnSound(),this.node.destroy(),this.m_closeCb&&this.m_closeCb(),this.m_closeCb=void 0}}),cc._RF.pop()},{}],ShaderHelper:[function(t,e,n){"use strict";cc._RF.push(e,"4e5f2lQIeBBmZyWdmXWaXT/","ShaderHelper");var s,i=this&&this.__extends||(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__decorate||function(t,e,n,s){var i,o=arguments.length,r=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,s);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(o<3?i(r):o>3?i(e,n,r):i(e,n))||r);return o>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ShaderProperty=void 0;var r=cc._decorator,c=r.ccclass,a=r.property,h=r.executeInEditMode,l=function(){function t(){this.key="",this.value=0}return o([a({readonly:!0})],t.prototype,"key",void 0),o([a(cc.Float)],t.prototype,"value",void 0),o([c("ShaderProperty")],t)}();n.ShaderProperty=l;var d=cc.Enum({}),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._effectName="",e._program=0,e._props=[],e.material=null,e}var n;return i(e,t),n=e,Object.defineProperty(e.prototype,"program",{get:function(){return this._program},set:function(t){this._program!==t&&(this._program=t,console.log(d),this.applyEffect())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"props",{get:function(){return this._props},set:function(t){this._props=t,this.applyEffect()},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.applyEffect()},e.prototype.applyEffect=function(){var t=this.node.getComponent(cc.Sprite);if(t){var e=n.effectAssets[this.program],s=new cc.Material;s.effectAsset=e,s.name=e.name,!!e.shaders.find(function(t){return t.defines.find(function(t){return"USE_TEXTURE"===t.name})})&&s.define("USE_TEXTURE",!0),t.setMaterial(0,s),this.material=t.getMaterial(0),this.setProperty(e),this.node.emit("effect-changed",this,this.material)}},e.prototype.setProperty=function(){var t=this;this._props.length&&this._props.forEach(function(e){return e.key&&t.material.setProperty(e.key,e.value||0)}),cc.Class.Attr.setClassAttr(n,"props","visible",!!this._props.length)},e.prototype.next=function(){this.program=(this.program+1)%n.effectAssets.length},e.prototype.prev=function(){0!==this.program?this.program=(this.program-1)%n.effectAssets.length:this.program=n.effectAssets.length-1},e.effectAssets=null,o([a],e.prototype,"_program",void 0),o([a({type:d})],e.prototype,"program",null),o([a({type:[l]})],e.prototype,"_props",void 0),o([a({type:[l]})],e.prototype,"props",null),n=o([c,h],e)}(cc.Component);n.default=u,cc.game.on(cc.game.EVENT_ENGINE_INITED,function(){cc.resources.loadDir("effect",cc.EffectAsset,function(t,e){u.effectAssets=e,u.effectAssets.sort(function(t,e){return t._name<e._name?-1:1});var n=u.effectAssets.map(function(t,e){return{name:t._name,value:e}});cc.Class.Attr.setClassAttr(u,"program","enumList",n)})}),cc._RF.pop()},{}],ShaderMouse:[function(t,e,n){"use strict";cc._RF.push(e,"fe8c6qtdlJN17J4XctpF/uO","ShaderMouse");var s,i=this&&this.__extends||(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__decorate||function(t,e,n,s){var i,o=arguments.length,r=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,s);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(o<3?i(r):o>3?i(e,n,r):i(e,n))||r);return o>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,a=r.executeInEditMode,h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.on("effect-changed",function(e,n){if(n.effect.passes[0]._properties.iResolution){var s=t.node.getBoundingBox().size;n.effect.setProperty("iResolution",cc.v2(s.width,s.height)),t._material=n}else t._material=null},this)},e.prototype.onDestroy=function(){this.node.targetOff(this)},e.prototype._onTouchMove=function(t){this._material&&this._material.effect.setProperty("mouse",t.getLocation())},o([c,a],e)}(cc.Component);n.default=h,cc._RF.pop()},{}],ShaderNameLabel:[function(t,e,n){"use strict";cc._RF.push(e,"58fabyfmOtDQ6Q40t2JPneD","ShaderNameLabel");var s,i=this&&this.__extends||(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__decorate||function(t,e,n,s){var i,o=arguments.length,r=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,s);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(o<3?i(r):o>3?i(e,n,r):i(e,n))||r);return o>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./ShaderHelper"),c=cc._decorator,a=c.ccclass,h=c.property,l=c.executeInEditMode,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shaderHelper=null,e}return i(e,t),e.prototype.start=function(){var t=this;this.shaderHelper&&setTimeout(function(){var e=r.default.effectAssets[t.shaderHelper.program];t.getComponent(cc.Label).string=e.name},1e3)},o([h(r.default)],e.prototype,"shaderHelper",void 0),o([a,l],e)}(cc.Component);n.default=d,cc._RF.pop()},{"./ShaderHelper":"ShaderHelper"}],ShaderTime:[function(t,e,n){"use strict";cc._RF.push(e,"09037ZagL9OzILZk7bSl9tP","ShaderTime");var s,i=this&&this.__extends||(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__decorate||function(t,e,n,s){var i,o=arguments.length,r=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,s);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(r=(o<3?i(r):o>3?i(e,n,r):i(e,n))||r);return o>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,a=r.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._max=65535,e.step=.01,e.startTime=0,e}return i(e,t),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},set:function(t){this._max=t},enumerable:!1,configurable:!0}),e.prototype.update=function(t){this._material=this.node.getComponent(cc.Sprite).getMaterials()[0],this.node.active&&this._material&&this._material.effect.passes[0]._properties.time&&this._setShaderTime(t)},e.prototype._setShaderTime=function(){var t=this.startTime;t>this.max&&(t=0),t+=this.step,this._material.effect.setProperty("time",t),this.startTime=t},o([a],e.prototype,"_max",void 0),o([a],e.prototype,"step",void 0),o([a],e.prototype,"startTime",void 0),o([a],e.prototype,"max",null),o([c],e)}(cc.Component);n.default=h,cc._RF.pop()},{}],SoundMgr:[function(t,e){"use strict";cc._RF.push(e,"cda4anXGC9NuqA9fpczoIn/","SoundMgr"),cc.Class({extends:cc.Component,properties:{audio:{type:[cc.AudioClip],default:[]}},onLoad:function(){hf.soundMgr=this},start:function(){},playSound:function(t){hf.config.getConf().effectEnabled&&cc.audioEngine.play(this.audio[t],!1,1)},playBtnSound:function(){this.playSound(hf.constants.SOUND_INDEX.MENU)},playBgMusic:function(){if(hf.config.getConf().musicEnabled){var t=[hf.constants.SOUND_INDEX.BG,hf.constants.SOUND_INDEX.BG2],e=t[Math.floor(Math.random()*t.length)];this.bgMusicID=cc.audioEngine.playMusic(this.audio[e],!0)}},pauseBgMusic:function(){this.m_bgPaused=!0,null!=this.bgMusicID&&cc.audioEngine.pauseMusic()},resumeBgMusic:function(){this.m_bgPaused=!1,hf.config.getConf().musicEnabled&&(null==this.bgMusicID?this.playBgMusic():cc.audioEngine.resumeMusic())},stopBgMusic:function(){this.m_bgPaused=!1,cc.audioEngine.stopMusic(),this.bgMusicID=null},isBgPaused:function(){return this.m_bgPaused}}),cc._RF.pop()},{}],SplashScene:[function(t,e){"use strict";cc._RF.push(e,"444aeKuj7tG0b712am7towa","SplashScene"),hf.sceneToLoad="MainScene",cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=this;this.scheduleOnce(function(){t.m_oneSecondPassed=!0,t.checkSceneJump()},1)},start:function(){var t=this;cc.director.preloadScene(hf.sceneToLoad,function(){t.m_sceneLoaded=!0,t.checkSceneJump()})},checkSceneJump:function(){this.m_sceneLoaded&&this.m_oneSecondPassed&&(cc.director.loadScene(hf.sceneToLoad),hf.sceneToLoad=void 0)}}),cc._RF.pop()},{}],SpriteLocalized:[function(t,e){"use strict";cc._RF.push(e,"6b5e5MipvhOR59c4c2aN6kr","SpriteLocalized"),cc.Class({extends:cc.Component,properties:{cnFrame:cc.SpriteFrame,enFrame:cc.SpriteFrame},onLoad:function(){var t;t="zh"===hf.i18n.getCurLang()?this.cnFrame:this.enFrame,this.node.getComponent("cc.Sprite").spriteFrame=t},start:function(){}}),cc._RF.pop()},{}],ToggleNoBackGround:[function(t,e){"use strict";cc._RF.push(e,"28c83RupGJOL6l2vhozHn7O","ToggleNoBackGround"),cc.Class({extends:cc.Toggle,properties:{},onEnable:function(){cc.Toggle.prototype.onEnable.bind(this)(),this._updateCheckMark()},_updateCheckMark:function(){cc.Toggle.prototype._updateCheckMark.bind(this)(),this.target.active=!this.isChecked}}),cc._RF.pop()},{}],UIContainer:[function(t,e){"use strict";cc._RF.push(e,"b45dfGg1HJMpqFuIpwcdGlf","UIContainer"),cc.Class({extends:cc.Component,properties:{tips:cc.Node},onLoad:function(){hf.uiContainer=this},start:function(){},showTips:function(t){var e=cc.instantiate(this.tips);e.getChildByName("str").getComponent(cc.Label).string=t;var n=cc.view.getVisibleSize();e.parent=cc.director.getScene(),e.x=n.width/2,e.y=0,e.runAction(cc.sequence(cc.moveTo(.3,cc.v2(n.width/2,n.height/2)),cc.delayTime(.8),cc.moveTo(.3,cc.v2(n.width/2,n.height)),cc.callFunc(function(){e.destroy()})))}}),cc._RF.pop()},{}],UtilsMgr:[function(t,e){"use strict";cc._RF.push(e,"573fe2Hoz1GNIwGdAOfXdlC","UtilsMgr");var n=t("MathHelper"),s={};s.mathHelper=new n,e.exports=s,cc._RF.pop()},{MathHelper:"MathHelper"}],WXAds:[function(t,e){"use strict";cc._RF.push(e,"cd8b1IBK6lJYqmB/GzbpfsU","WXAds");var n=t("WXTools"),s={REWARD_RESULT:{LOAD_AD_FAIL:1,NOT_SUPPORTED:2,QUIT_MIDWAY:3,SUCCESS:4},config:function(t,e){this.m_bannerId=t,this.m_videoId=e},showBanner:function(t){cc.log("WXAds showBanner bId",t),n.isWXAdsSupported()&&(tt?this.showTTBanner(t):this.showWXBanner(t))},showWXBanner:function(t){var e=this;cc.log("WXAds showWXBanner xxxxxxxxxx"),this.m_bannerAd&&this.m_bannerAd.destroy();var n=t||this.m_bannerId;if(n){var s=wx.getSystemInfoSync();cc.log("bannerId",n),this.m_bannerAd=wx.createBannerAd({adUnitId:n,style:{left:0,top:.8*s.screenHeight,width:s.screenWidth,height:.2*s.screenHeight},adIntervals:60}),this.m_bannerRealHeight=.2*s.screenHeight,this.m_readHeight=parseInt(cc.winSize.height*this.m_bannerRealHeight/s.screenHeight),this.m_bannerAd.onLoad(function(){cc.log("WXAds showBanner onLoad")}),this.m_bannerAd.onResize(function(){e.m_bannerRealHeight=e.m_bannerAd.style.realHeight,e.m_bannerAd.style.left=(s.screenWidth-e.m_bannerAd.style.realWidth)/2,e.m_bannerAd.style.top=s.screenHeight-e.m_bannerRealHeight,cc.log("WXAds showBanner bannerRealHeight",e.m_bannerRealHeight),e.m_bannerRealHeight/s.screenHeight>.2&&(e.m_bannerAd.style.width=s.screenWidth*s.screenHeight*.198/e.m_bannerRealHeight);var t=parseInt(cc.winSize.height*e.m_bannerRealHeight/s.screenHeight);cc.director.emit("bannerResize",{height:t}),e.m_readHeight=t}),this.m_bannerAd.onError(function(t){cc.log("WXAds showBanner",t)}),this.m_bannerAd.show()}},showTTBanner:function(t){var e=this;this.m_bannerAd&&this.m_bannerAd.destroy();var n=t||this.m_bannerId;if(n){var s=wx.getSystemInfoSync();this.m_bannerRealHeight=.2*s.screenHeight;var i=16*this.m_bannerRealHeight/9;this.m_readHeight=parseInt(cc.winSize.height*this.m_bannerRealHeight/s.screenHeight),this.m_bannerAd=wx.createBannerAd({adUnitId:n,style:{left:(s.screenWidth-i)/2,top:s.screenHeight-this.m_bannerRealHeight,width:i}}),this.m_bannerAd.onLoad(function(){cc.log("WXAds showBanner onLoad",i)}),this.m_bannerAd.onResize(function(t){cc.log("WXAds banner onResize",t.width,t.height),i>t.width&&(i=t.width,e.m_bannerRealHeight=t.height,e.m_bannerAd.style.top=s.screenHeight-t.width/16*9,e.m_bannerAd.style.left=(s.screenWidth-t.width)/2);var n=parseInt(cc.winSize.height*e.m_bannerRealHeight/s.screenHeight);e.m_readHeight=n,cc.director.emit("bannerResize",{height:n})}),this.m_bannerAd.onError(function(t){cc.log("WXAds showBanner",t)}),this.m_bannerAd.show()}},getRealBannerHeight:function(){return this.m_readHeight},hideBanner:function(){n.isWXAdsSupported()&&this.m_bannerAd&&(this.m_bannerAd.destroy(),this.m_bannerAd=void 0)},loadRewardVideo:function(t){var e=this;this.m_rewardAd=wx.createRewardedVideoAd({adUnitId:t}),this.m_isRewardAdLoaded=!1,this.m_rewardAd.onLoad(function(){cc.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),e.m_isRewardAdLoaded=!0}),this.m_rewardAd.onError(function(){cc.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"),e.m_isRewardAdLoaded=!1}),this.m_rewardAd.onClose(function(t){t&&t.isEnded||void 0===t?e.sendRewardAdsResult(s.REWARD_RESULT.SUCCESS):e.sendRewardAdsResult(s.REWARD_RESULT.QUIT_MIDWAY)})},showRewardVideo:function(t){var e=this;n.isWXAdsSupported()?(this.m_callBackFunc=t,this.m_rewardAd.load().then(function(){e.m_rewardAd.show()}).catch(function(){e.sendRewardAdsResult(s.REWARD_RESULT.LOAD_AD_FAIL)})):t(s.REWARD_RESULT.NOT_SUPPORTED)},isRewardVideoLoaded:function(){return this.m_isRewardAdLoaded},sendRewardAdsResult:function(t){this.m_callBackFunc&&(this.m_callBackFunc(t),this.m_callBackFunc=null),this.m_isRewardAdLoaded=!1},loadInterstitialAd:function(t){this.m_interstitialAd=wx.createInterstitialAd({adUnitId:t}),this.m_interstitialAd.onLoad(function(){cc.log("\u63d2\u5c4f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),this.m_interstitialAd.onError(function(){cc.log("\u63d2\u5c4f \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25")}),this.m_interstitialAd.onClose(function(){})},showInterstitialAd:function(){n.isWXAdsSupported()&&this.m_interstitialAd&&this.m_interstitialAd.show().catch(function(t){console.error("showInterstitialAd",t)})},createIconAd:function(t){var e;if(wx.createGameIcon){var n=wx.getSystemInfoSync();e=wx.createGameIcon({adUnitId:t,count:2,style:[{left:10,top:.225*n.screenHeight,size:50},{left:n.screenWidth-80,top:.225*n.screenHeight,size:50}]})}return e},showIconAd:function(t){t&&t.load().then(function(){t.show(),console.log("showIconAd success",t)}).catch(function(t){console.error("WXAds showIconAd",t)})},hideIconAd:function(t){t&&t.hide().then(function(){console.log("hideIconAd success",t)}).catch(function(t){console.error("WXAds hideIconAd",t)})},destroyIconAd:function(t){console.log("destroyIconAd",t),t&&t.destroy().then(function(){}).catch(function(t){console.error("WXAds destroyIconAd",t)})},createPortalAd:function(t){wx.createGamePortal&&(this.m_portalAd=wx.createGamePortal({adUnitId:t}))},showPortalAd:function(t){var e=this;this.m_portalAd&&this.m_portalAd.load().then(function(){e.m_portalAd.show(),t&&t(!0)}).catch(function(e){console.error(e),t&&t(!1)})}};e.exports=s,cc._RF.pop()},{WXTools:"WXTools"}],WXMgr:[function(t,e){"use strict";cc._RF.push(e,"3fdb43XlftFQK9HjW6KLmFE","WXMgr");var n={};n.wxRank=t("WXRank"),n.wxAds=t("WXAds"),n.wxTools=t("WXTools"),e.exports=n,cc._RF.pop()},{WXAds:"WXAds",WXRank:"WXRank",WXTools:"WXTools"}],WXRankConstants:[function(t,e){"use strict";cc._RF.push(e,"d0d9e95YI5NLqZGpond3XPU","WXRankConstants");e.exports={CMD_TYPE:{SHOW_FRIEND:0,SHOW_GROUP:1,SUBMIT_SCORE:2,SHOW_THREE_PLAYER:3,TOUCH_MOVE:4,NEXT_PAGE:5,LAST_PAGE:6,SHOW_FIRST:7,SET_MY_DATA:8}},cc._RF.pop()},{}],WXRank:[function(t,e){"use strict";cc._RF.push(e,"47f102rvr5ASo19wXhGpX4T","WXRank");var n=t("WXRankConstants"),s=new Object;s.setMyData=function(t){wx.postMessage({cmd:n.CMD_TYPE.SET_MY_DATA,data:t})},s.showFriend=function(t,e){cc.log("WXRank.showFriend"),this.init(t),wx.postMessage({cmd:n.CMD_TYPE.SHOW_FRIEND,data:e})},s.showGroup=function(t,e){cc.log("WXRank.showGroup"),wx.postMessage({cmd:n.CMD_TYPE.SHOW_GROUP,data:{shareTicket:shareTicket,key:e}}),this.init(t)},s.showThreePlayer=function(t,e,s){this.init(t),wx.postMessage({cmd:n.CMD_TYPE.SHOW_THREE_PLAYER,data:{key:e,score:s}})},s.showFirstPlayer=function(t,e){cc.log("WXRank.showFirstPlayer"),this.init(t),e.avatarSize=e.avatarSize||t.node.width,wx.postMessage({cmd:n.CMD_TYPE.SHOW_FIRST,data:e})},s.submitScore=function(t,e,s,i){wx.postMessage({cmd:n.CMD_TYPE.SUBMIT_SCORE,data:{key:t,value:e,isMainRank:s,keepBigValue:i}})},s.nextPage=function(){wx.postMessage({cmd:n.CMD_TYPE.NEXT_PAGE})},s.lastPage=function(){wx.postMessage({cmd:n.CMD_TYPE.LAST_PAGE})},s.init=function(t){t.spriteFrame||(t.spriteFrame=new cc.SpriteFrame),this.m_tex=new cc.Texture2D,this.m_isShow=!0,this.m_spriteRank=t,this.m_spriteRank.node.active=!0,this.initSubDomain()},s.initSubDomain=function(){var t=wx.getOpenDataContext().canvas;t.width=this.m_spriteRank.node.width,t.height=this.m_spriteRank.node.height},s.hide=function(){this.m_isShow&&(this.m_tex=null,this.m_isShow=!1,this.m_spriteRank.node.active=!1)},s.isShow=function(){return this.m_isShow},s.update=function(){this.updateSubDomainCanvas()},s.updateSubDomainCanvas=function(){if(this.m_tex){var t=wx.getOpenDataContext().canvas;this.m_tex.initWithElement(t),this.m_tex.handleLoadedTexture(),this.m_spriteRank.spriteFrame=new cc.SpriteFrame(this.m_tex)}},e.exports=s,cc._RF.pop()},{WXRankConstants:"WXRankConstants"}],WXTools:[function(t,e){"use strict";cc._RF.push(e,"1ada1Av8nNM6YbN4JZ3ttgh","WXTools");var n={};function s(t,e){t=t.split("."),e=e.split(".");for(var n=Math.max(t.length,e.length);t.length<n;)t.push("0");for(;e.length<n;)e.push("0");for(var s=0;s<n;s++){var i=parseInt(t[s]),o=parseInt(e[s]);if(i>o)return 1;if(i<o)return-1}return 0}n.isWXRankSupported=function(){var t;return t=tt?"1.3.0":"1.9.92",-1!==s(wx.getSystemInfoSync().SDKVersion,t)},n.isWXAdsSupported=function(){var t;return t=tt?"1.11.0":"2.0.4",-1!==s(wx.getSystemInfoSync().SDKVersion,t)},n.isGameClubSupported=function(){return cc.sys.platform===cc.sys.WECHAT_GAME&&-1!==s(wx.getSystemInfoSync().SDKVersion,"2.0.3")},n.registerOnShow=function(t,e){var n=this;this.m_registerFuncArr||(this.m_registerFuncArr=[],wx.onShow(function(t){for(var e=0;e<n.m_registerFuncArr.length;e++)for(var s=n.m_registerFuncArr[e],i=0;i<s.m_wxOnShowRegTargetArr.length;i++){var o=s.m_wxOnShowRegTargetArr[i];s.apply(o,[t])}})),this.m_registerFuncArr.indexOf(t)>=0?t.m_wxOnShowRegTargetArr.push(e):t.m_wxOnShowRegTargetArr?cc.error('WXTools.registerOnShow Func already have a "m_wxOnShowRegTargetArr" name key, please change it'):(this.m_registerFuncArr.push(t),t.m_wxOnShowRegTargetArr=[],t.m_wxOnShowRegTargetArr.push(e))},n.unRegisterOnShow=function(t,e){var n=this.m_registerFuncArr.indexOf(t);if(n>=0){var s=this.m_registerFuncArr[n].m_wxOnShowRegTargetArr,i=s.indexOf(e);i>=0?(s.splice(i,1),s.length<=0&&this.m_registerFuncArr.splice(n,1)):cc.error("impossible !")}else cc.error("WXTools.unRegisterOnShow func not registered !")},n.saveImageToPhotosAlbum=function(t,e){cc.sys.platform===cc.sys.WECHAT_GAME&&wx.authorize({scope:"scope.writePhotosAlbum",success:function(){wx.saveImageToPhotosAlbum({filePath:t,success:function(){e(0)},fail:function(){e(-1)}})},fail:function(){e(-2)}})},n.getNodeBoundBoxInCanvas=function(t){console.log("getNodeBoundBoxInCanvas",canvas.width,canvas.height);var e=t.getBoundingBoxToWorld(),n=e.width*canvas.width/cc.winSize.width,s=e.height*canvas.height/cc.winSize.height;return{x:e.xMin*canvas.width/cc.winSize.width,y:(cc.winSize.height-e.yMax)*canvas.height/cc.winSize.height,width:n,height:s}},n.wxCaptureNodeAreaSync=function(t,e,n){var s=this.getNodeBoundBoxInCanvas(t),i=1;return null!=e?i=s.height>e?e/s.height:1:null!=n&&(i=s.width>n?n/s.width:1),s.destWidth=parseInt(s.width*i),s.destHeight=parseInt(s.height*i),s.fileType="png",s.quality=.5,console.log("wxCaptureNodeAreaSync",s),canvas.toTempFilePathSync(s)},n.initGameClub=function(t){if(n.isGameClubSupported()){var e=t&&t.icon||"green",s=wx.getSystemInfoSync(),i=t&&t.style||{left:10,top:.5*s.screenHeight,width:40,height:40};this.m_gameClubButton?cc.error("WXTools iniGameClub already exist !"):this.m_gameClubButton=wx.createGameClubButton({type:"image",icon:e,style:i}),this.m_isGameClubVisible=!0}},n.showGameClub=function(){this.m_gameClubButton&&(this.m_gameClubButton.show(),this.m_isGameClubVisible=!0)},n.isGameClubExist=function(){return null!=this.m_gameClubButton},n.isGameClubVisible=function(){return this.m_isGameClubVisible},n.hideGameClub=function(){n.isGameClubSupported()&&this.m_gameClubButton&&(this.m_gameClubButton.hide(),this.m_isGameClubVisible=!1)},e.exports=n,cc._RF.pop()},{}],en:[function(t,e){"use strict";cc._RF.push(e,"920c5VLzJxKjYCAoIUwUHym","en"),e.exports={speed:"Speed",level:"Level",score:"Score",time:"Time",static:"Static",ghost:"Ghost",vibrate:"Vibrate",music:"Music",effect:"Effect",pause:"Pause",next:"Next",home:"Home",retry:"Retry",share:"Share",challenge:"Challenge",shareVideo:"Share Video",reborn:"Reborn",best:"Best",gameEndTitle:"Game Over",skipReborn:"Skip Reborn",failedToLoadRewardVideo:"reward video load failed, please try later",rebornSuccess:"success to reborn",canNotSkipVideo:"skip the video can not reborn",videoNotSupported:"reborn not supported",functionNotSupported:"Not supported yet !",privacyLink:"Privacy Link",likeIt:"Like",rateInvite:"Do you like take a few minutes to rate this game?"},cc._RF.pop()},{}],i18n:[function(t,e){"use strict";cc._RF.push(e,"93789C/shtIL6entYsZPjee","i18n");var n=t("polyglot"),s=cc.sys.language;"zh"!==s&&(s="en");var i=t(s="zh"),o=new n({phrases:i,allowMissing:!0});e.exports={init:function(e){i=t(s=e),o.replace(i)},getCurLang:function(){return s},t:function(t,e){return o.t(t,e)}},cc._RF.pop()},{polyglot:"polyglot"}],polyglot:[function(t,e,n){(function(t){"use strict";cc._RF.push(e,"69decSgpRlE1rzEKp0RzG3V","polyglot"),function(t,s){"function"==typeof define&&define.amd?define([],function(){return s(t)}):"object"==typeof n?e.exports=s(t):t.Polyglot=s(t)}(void 0!==t?t:void 0,function(t){var e=String.prototype.replace;function n(t){t=t||{},this.phrases={},this.extend(t.phrases||{}),this.currentLocale=t.locale||"en",this.allowMissing=!!t.allowMissing,this.warn=t.warn||f}n.VERSION="1.0.0",n.prototype.locale=function(t){return t&&(this.currentLocale=t),this.currentLocale},n.prototype.extend=function(t,e){var n;for(var s in t)t.hasOwnProperty(s)&&(n=t[s],e&&(s=e+"."+s),"object"==typeof n?this.extend(n,s):this.phrases[s]=n)},n.prototype.unset=function(t,e){var n;if("string"==typeof t)delete this.phrases[t];else for(var s in t)t.hasOwnProperty(s)&&(n=t[s],e&&(s=e+"."+s),"object"==typeof n?this.unset(n,s):delete this.phrases[s])},n.prototype.clear=function(){this.phrases={}},n.prototype.replace=function(t){this.clear(),this.extend(t)},n.prototype.t=function(t,n){var i,o,r,a,l,d,f,_,p;return"number"==typeof(n=null==n?{}:n)&&(n={smart_count:n}),"string"==typeof this.phrases[t]?i=this.phrases[t]:"string"==typeof n._?i=n._:this.allowMissing?i=t:(this.warn('Missing translation for key: "'+t+'"'),o=t),"string"==typeof i&&(n=m(n),o=u((r=i,a=this.currentLocale,null!=(l=n.smart_count)&&r?(_=(f=r.split(s))[h(a,l)]||f[0],p=_,d=e.call(p,c,"")):d=r,o=d),n)),o},n.prototype.has=function(t){return t in this.phrases};var s="||||",i={chinese:function(){return 0},german:function(t){return 1!==t?1:0},french:function(t){return t>1?1:0},russian:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},czech:function(t){return 1===t?0:t>=2&&t<=4?1:2},polish:function(t){return 1===t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},icelandic:function(t){return t%10!=1||t%100==11?1:0}},o={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs","sk"],polish:["pl"],icelandic:["is"]};function r(t){var e,n,s,i={};for(e in t)if(t.hasOwnProperty(e))for(s in n=t[e])i[n[s]]=e;return i}var c=/^\s+|\s+$/g;function a(t){var e=r(o);return e[t]||e.en}function h(t,e){return i[a(t)](e)}var l=/\$/g,d="$$$$";function u(t,n){for(var s in n)if("_"!==s&&n.hasOwnProperty(s)){var i=n[s];"string"==typeof i&&(i=e.call(n[s],l,d)),t=e.call(t,new RegExp("%\\{"+s+"\\}","g"),i)}return t}function f(e){t.console&&t.console.warn&&t.console.warn("WARNING: "+e)}function m(t){var e={};for(var n in t)e[n]=t[n];return e}return n}),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],use_reversed_rotateBy:[function(t,e){"use strict";cc._RF.push(e,"710bdXRNPlI0poxTqY5C8TM","use_reversed_rotateBy"),cc.RotateBy._reverse=!0,cc._RF.pop()},{}],zh:[function(t,e){"use strict";cc._RF.push(e,"87f1fs0gohHDIfNg4aePXbt","zh"),e.exports={speed:"\u901f\u5ea6",level:"\u7b49\u7ea7",score:"\u5206\u6570",time:"\u65f6\u95f4",static:"\u9759\u6b62",ghost:"\u5f71\u5b50",vibrate:"\u632f\u52a8",music:"\u97f3\u4e50",effect:"\u97f3\u6548",pause:"\u6682\u505c",next:"\u4e0b\u4e00\u4e2a",home:"\u4e3b\u9875",reborn:"\u25b6\u514d\u8d39\u590d\u6d3b",retry:"\u91cd\u73a9",share:"\u5206\u4eab\u597d\u53cb",challenge:"\u6311\u6218\u597d\u53cb",shareVideo:"\u5206\u4eab\u89c6\u9891",best:"\u6700\u9ad8",gameEndTitle:"\u6e38\u620f\u7ed3\u675f",skipReborn:"\u8df3\u8fc7\u590d\u6d3b",failedToLoadRewardVideo:"\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",rebornSuccess:"\u590d\u6d3b\u6210\u529f",canNotSkipVideo:"\u5b8c\u6574\u89c2\u770b\u89c6\u9891\u624d\u53ef\u4ee5\u590d\u6d3b",videoNotSupported:"\u5fae\u4fe1\u7248\u672c\u8fc7\u4f4e\uff0c\u8bf7\u5347\u7ea7",functionNotSupported:"\u6b64\u529f\u80fd\u5c1a\u672a\u5f00\u653e\uff0c\u8bf7\u7a0d\u7b49",privacyLink:"\u9690\u79c1\u94fe\u63a5",likeIt:"\u559c\u6b22\u5b83",rateInvite:"\u80fd\u5426\u82b1\u8d39\u4e00\u5206\u949f\u65f6\u95f4\u7ed9\u6211\u4eec\u4e00\u4e2a\u597d\u8bc4\uff0c\u7559\u4e0b\u60a8\u7684\u5efa\u8bae\uff1f"},cc._RF.pop()},{}]},{},["ToggleNoBackGround","LabelLocalized","en","zh","i18n","polyglot","use_reversed_rotateBy","BackGround","Block","Board","BtnLocalIzed","Config","Constants","DrawBoard","FullRank","GameRate","GameScene","KernelGame","KeyFramesContainer","KeyPos","LevelSelect","MainScene","OperateBtn","Piece","Preview","RotationSystemSRS","Settings","SoundMgr","SplashScene","SpriteLocalized","UIContainer","InitAll","AdsMgr","CrossAdsMgr","CPCheck","AnalysisConstant","AnalysisMgr","RemoteDataMgr","PlatformConfig","PlatformMgr","AdmobAndroid","AndroidConstant","AndroidMgr","GoogleIAP","AdmobIOS","OPPOAds","OPPOMgr","WXAds","WXMgr","WXRank","WXRankConstants","WXTools","MathHelper","UtilsMgr","ShaderHelper","ShaderMouse","ShaderNameLabel","ShaderTime"]);