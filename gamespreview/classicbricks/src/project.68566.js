window.__require=function e(t,n,i){function s(c,r){if(!n[c]){if(!t[c]){var a=c.split("/");if(a=a[a.length-1],!t[a]){var h="function"==typeof __require&&__require;if(!r&&h)return h(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var l=n[c]={exports:{}};t[c][0].call(l.exports,function(e){return s(t[c][1][e]||e)},l,l.exports,e,t,n,i)}return n[c].exports}for(var o="function"==typeof __require&&__require,c=0;c<i.length;c++)s(i[c]);return s}({AdmobAndroid:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}cc._RF.push(t,"19ab3x0/+JHlaXnJaJhA4db","AdmobAndroid");var c=e("AndroidConstant"),r=function(){function e(){i(this,e)}return o(e,[{key:"init",value:function(e){jsb.reflection.callStaticMethod(c.GAME_JNI_PATH,"initAds","(Ljava/lang/String;)V",JSON.stringify(e))}},{key:"showBanner",value:function(){jsb.reflection.callStaticMethod(c.GAME_JNI_PATH,"showBanner","()V")}},{key:"hideBanner",value:function(){jsb.reflection.callStaticMethod(c.GAME_JNI_PATH,"hideBanner","()V")}},{key:"showRewardVideo",value:function(e){hf.onRewardVideoResult=e,jsb.reflection.callStaticMethod(c.GAME_JNI_PATH,"showRewardVideo","()V")}},{key:"isRewardVideoLoaded",value:function(){return jsb.reflection.callStaticMethod(c.GAME_JNI_PATH,"isRewardVideoLoaded","()Z")}},{key:"showInterstitialAd",value:function(){jsb.reflection.callStaticMethod(c.GAME_JNI_PATH,"showInterstitialAd","()V")}}]),e}();t.exports=new r,cc._RF.pop()},{AndroidConstant:"AndroidConstant"}],AdmobIOS:[function(e,t,n){"use strict";cc._RF.push(t,"f35f3vS+u9EoJMK9FQZn0P3","AdmobIOS"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],AdsMgr:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}cc._RF.push(t,"72256/8IqVJPq76Z650/FqN","AdsMgr");var c={LOAD_AD_FAIL:1,NOT_SUPPORTED:2,QUIT_MIDWAY:3,SUCCESS:4},r=function(){function e(){var t=this;i(this,e),this.REWARD_RESULT=c,hf.platformMgr.config.ads&&(this.m_rewardId=hf.platformMgr.config.ads.rewardId,this.m_interstitialId=hf.platformMgr.config.ads.interstitialId,this.m_portalId=hf.platformMgr.config.ads.portalId,this.m_bannerId=hf.platformMgr.config.ads.bannerId),cc.sys.platform===cc.sys.WECHAT_GAME?(this.m_instance=hf.platformMgr.wxMgr,this.preloadAds()):cc.sys.platform===cc.sys.OPPO_GAME?(this.m_instance=hf.platformMgr.oppoMgr.oppoAds,this.m_rewardId="",this.m_interstitialId="",qg.initAdService({appId:"30074725",isDebug:!1,success:function(e){console.log("init ad success"),t.preloadAds()},fail:function(e){console.log("fail:"+e.code+e.msg)},complete:function(e){console.log("complete")}})):cc.sys.platform===cc.sys.ANDROID?(this.m_instance=hf.platformMgr.androidMgr.admobAndroid,this.m_instance.init(hf.platformMgr.config.ads)):this.m_instance=void 0}return o(e,[{key:"preloadAds",value:function(){this.loadInterstitial(),this.loadRewardVideo(),this.loadPortalAd()}},{key:"loadRewardVideo",value:function(){this.m_rewardId&&this.m_instance.loadRewardVideo(this.m_rewardId)}},{key:"loadInterstitial",value:function(){this.m_interstitialId&&this.m_instance.loadInterstitial(this.m_interstitialId)}},{key:"loadPortalAd",value:function(){this.m_portalId&&this.m_instance.createPortalAd(this.m_portalId)}},{key:"hasBanner",value:function(){return this.m_bannerId}},{key:"hasVideo",value:function(){return this.m_rewardId}},{key:"hasInterstitial",value:function(){return this.m_interstitialId}},{key:"hasPortalAd",value:function(){return this.m_portalId}},{key:"showBanner",value:function(){this.m_bannerId&&this.m_instance.showBanner()}},{key:"hideBanner",value:function(){this.m_bannerId&&this.m_instance.hideBanner()}},{key:"showRewardVideo",value:function(e){var t=e;this.m_rewardId?(cc.log("AdsHelper showRewardVideo"),this.m_instance.showRewardVideo(function(e){cc.log("AdsHelper showRewardVideo result",e),e===c.SUCCESS?t(!0,!0):e===c.QUIT_MIDWAY?t(!0,!1):t(!1)})):cc.sys.isBrowser?t(!0,!0):t(!1)}},{key:"isRewardVideoLoaded",value:function(){return!!this.m_rewardId&&this.m_instance.isRewardVideoLoaded()}},{key:"showInterstitialAd",value:function(){this.m_interstitialId&&this.m_instance.showInterstitialAd()}},{key:"getRealBannerHeight",value:function(){if(this.m_bannerId&&this.m_instance.getRealBannerHeight)return this.m_instance.getRealBannerHeight()}},{key:"showPortalAd",value:function(e){this.m_hasPortalAd&&this.m_instance.showPortalAd(e)}}]),e}();t.exports=new r,cc._RF.pop()},{}],AnalysisConstant:[function(e,t,n){"use strict";cc._RF.push(t,"a9620tQWoZF2oqG1q4di3ZO","AnalysisConstant");var i={EVENT_TYPE:{ADD_PAYMENT_INFO:"add_payment_info",ADD_TO_CART:"add_to_cart",ADD_TO_WISHLIST:"add_to_wishlist",APP_OPEN:"app_open",BEGIN_CHECKOUT:"begin_checkout",CAMPAIGN_DETAILS:"campaign_details",ECOMMERCE_PURCHASE:"ecommerce_purchase",GENERATE_LEAD:"generate_lead",JOIN_GROUP:"join_group",LEVEL_END:"level_end",LEVEL_START:"level_start",LEVEL_UP:"level_up",LOGIN:"login",POST_SCORE:"post_score",PRESENT_OFFER:"present_offer",PURCHASE_REFUND:"purchase_refund",SEARCH:"search",SELECT_CONTENT:"select_content",SHARE:"share",SIGN_UP:"sign_up",SPEND_VIRTUAL_CURRENCY:"spend_virtual_currency",TUTORIAL_BEGIN:"tutorial_begin",TUTORIAL_COMPLETE:"tutorial_complete",UNLOCK_ACHIEVEMENT:"unlock_achievement",VIEW_ITEM:"view_item",VIEW_ITEM_LIST:"view_item_list",VIEW_SEARCH_RESULTS:"view_search_results",EARN_VIRTUAL_CURRENCY:"earn_virtual_currency",REMOVE_FROM_CART:"remove_from_cart",CHECKOUT_PROGRESS:"checkout_progress",SET_CHECKOUT_OPTION:"set_checkout_option",JS_ERROR_REPORT:"js_error_report",LEVEL_FAIL:"level_fail",SQUARE_CRUSH:"square_crush"},PARAM_TYPE:{ACHIEVEMENT_ID:"achievement_id",CHARACTER:"character",TRAVEL_CLASS:"travel_class",CONTENT_TYPE:"content_type",CURRENCY:"currency",COUPON:"coupon",START_DATE:"start_date",END_DATE:"end_date",EXTEND_SESSION:"extend_session",FLIGHT_NUMBER:"flight_number",GROUP_ID:"group_id",ITEM_CATEGORY:"item_category",ITEM_ID:"item_id",ITEM_LOCATION_ID:"item_location_id",ITEM_NAME:"item_name",LOCATION:"location",LEVEL:"level",LEVEL_NAME:"level_name",SIGN_UP_METHOD:"sign_up_method",METHOD:"method",NUMBER_OF_NIGHTS:"number_of_nights",NUMBER_OF_PASSENGERS:"number_of_passengers",NUMBER_OF_ROOMS:"number_of_rooms",DESTINATION:"destination",ORIGIN:"origin",PRICE:"price",QUANTITY:"quantity",SCORE:"score",SHIPPING:"shipping",TRANSACTION_ID:"transaction_id",SEARCH_TERM:"search_term",SUCCESS:"success",TAX:"tax",VALUE:"value",VIRTUAL_CURRENCY_NAME:"virtual_currency_name",CAMPAIGN:"campaign",SOURCE:"source",MEDIUM:"medium",TERM:"term",CONTENT:"content",ACLID:"aclid",CP1:"cp1",ITEM_BRAND:"item_brand",ITEM_VARIANT:"item_variant",ITEM_LIST:"item_list",CHECKOUT_STEP:"checkout_step",CHECKOUT_OPTION:"checkout_option",CREATIVE_NAME:"creative_name",CREATIVE_SLOT:"creative_slot",AFFILIATION:"affiliation",INDEX:"index",USED_MOVES:"used_moves"}};t.exports=i,cc._RF.pop()},{}],AnalysisMgr:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}cc._RF.push(t,"cdd88BLM8FDXI0vmx++jWrc","AnalysisMgr");var c=e("AnalysisConstant"),r=function(){function e(){for(var t in i(this,e),c)this[t]=c[t]}return o(e,[{key:"logEvent",value:function(e,t){cc.log("AnalysisMgr logEvent",e,t),cc.sys.platform===cc.sys.ANDROID&&hf.platformMgr.androidMgr.firebaseLogEvent(e,t)}},{key:"logCrash",value:function(e){cc.log("AnalysisMgr logCrash",e),cc.assert("string"==typeof e,"AnalysisMgr logCrash"),cc.sys.platform===cc.sys.ANDROID&&hf.platformMgr.androidMgr.firebaseLogCrash(e)}},{key:"setCustomKey",value:function(e,t){cc.log("AnalysisMgr setCustomKey",e,t),cc.assert("string"==typeof e&&"string"==typeof t,"AnalysisMgr setCustomKey"),cc.sys.platform===cc.sys.ANDROID&&hf.platformMgr.androidMgr.firebaseSetCustomKey(e,t)}}]),e}();t.exports=new r,cc._RF.pop()},{AnalysisConstant:"AnalysisConstant"}],AndroidConstant:[function(e,t,n){"use strict";cc._RF.push(t,"62df9N1Mm5AbLAAfxuz41US","AndroidConstant");t.exports={GAME_JNI_PATH:"org/cocos2dx/javascript/GameJni"},cc._RF.pop()},{}],AndroidMgr:[function(e,t,n){"use strict";cc._RF.push(t,"1eae9RmmxJPG7s5a5JcEA51","AndroidMgr");var i=e("AndroidConstant"),s={};s.admobAndroid=e("AdmobAndroid"),s.googleIAP=e("GoogleIAP"),s.getPackageName=function(){return jsb.reflection.callStaticMethod(i.GAME_JNI_PATH,"getPackageName","()Ljava/lang/String;")},s.isPackageInstall=function(e){return jsb.reflection.callStaticMethod(i.GAME_JNI_PATH,"isPackageInstall","(Ljava/lang/String;)Z",e)},s.firebaseLogEvent=function(e,t){jsb.reflection.callStaticMethod(i.GAME_JNI_PATH,"firebaseLogEvent","(Ljava/lang/String;)V",JSON.stringify({event:e,params:t}))},s.firebaseLogCrash=function(e){jsb.reflection.callStaticMethod(i.GAME_JNI_PATH,"firebaseLogCrash","(Ljava/lang/String;)V",e)},s.firebaseSetCustomKey=function(e,t){jsb.reflection.callStaticMethod(i.GAME_JNI_PATH,"firebaseSetCustomKey","(Ljava/lang/String;Ljava/lang/String;)V",e,t)},s.vibrate=function(e){jsb.reflection.callStaticMethod(i.GAME_JNI_PATH,"vibrate","(I)V",e)},s.shareLink=function(e,t){jsb.reflection.callStaticMethod(i.GAME_JNI_PATH,"shareLink","(Ljava/lang/String;Ljava/lang/String;)V",e,t)},t.exports=s,cc._RF.pop()},{AdmobAndroid:"AdmobAndroid",AndroidConstant:"AndroidConstant",GoogleIAP:"GoogleIAP"}],BackGround:[function(e,t,n){"use strict";cc._RF.push(t,"27bb63g+uRLx5VKYA82Fvy9","BackGround"),cc.Class({extends:cc.Component,properties:{bg1:{default:null,type:cc.Node},bg2:{default:null,type:cc.Node},moveSpeed:18},onLoad:function(){var e=cc.winSize,t=this.bg1.getContentSize(),n=e.width/t.width;e.height/t.height>n&&(n=e.height/t.height);var i=Math.floor(t.height*n);this.bg1.width=e.width,this.bg1.height=i,this.bg2.width=e.width,this.bg2.height=i,this.bg2.y=i,this.bgHeight=i,this.scroll=!0},start:function(){},setScroll:function(e){this.scroll=e},update:function(e){if(this.scroll){var t=e*this.moveSpeed;this.bg1.y=this.bg1.y-t,this.bg2.y=this.bg2.y-t,this.bg1.y+this.bgHeight<=0&&(this.bg1.y=this.bg2.y+this.bgHeight),this.bg2.y+this.bgHeight<=0&&(this.bg2.y=this.bg1.y+this.bgHeight)}}}),cc._RF.pop()},{}],Block:[function(e,t,n){"use strict";var i;function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"4f328bQpqpOF74GOq1QpUPi","Block"),cc.Class((s(i={extends:cc.Component,properties:{clearAnim:cc.Animation},onLoad:function(){},init:function(e,t){this.clearAnim.stop(),this.node.opacity=255,this.node.getComponent("cc.Sprite").spriteFrame=hf.keyFramesContainer.getBlockFrame(e,t)},setPosition:function(e,t){this.node.x=e,this.node.y=t},getWidth:function(){return this.node.width},getHeight:function(){return this.node.height}},"onLoad",function(){}),s(i,"start",function(){}),s(i,"onClear",function(){this.m_isClearing=!0,this.clearAnim.play()}),i)),cc._RF.pop()},{}],Board:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}cc._RF.push(t,"5e0e4s2mOBMo7s932a0XWMy","Board");e("Constants");var c=function(){function e(t,n){i(this,e),this.m_width=t,this.m_height=n,this.m_blocksArr=[],this.m_visible=!0;for(var s=0;s<t;s++){this.m_blocksArr[s]=[];for(var o=0;o<n;o++)this.m_blocksArr[s][o]=null}}return o(e,[{key:"clearForReborn",value:function(){for(var e=0;e<this.m_width;e++)for(var t=0;t<this.m_height-3;t++)this.m_blocksArr[e][t]=null}},{key:"clear",value:function(){for(var e=0;e<this.m_width;e++)for(var t=0;t<this.m_height;t++)this.m_blocksArr[e][t]=null}},{key:"setBlock",value:function(e,t,n,i){this.m_blocksArr[e][t]={type:n,shape:i}}},{key:"getBlockArr",value:function(){return this.m_blocksArr}},{key:"lockPiece",value:function(e){for(var t=e.getBlockArr(),n=e.getShape(),i=e.getBlockType(),s=0;s<t.length;s++)for(var o=0;o<t[s].length;o++)if(0!==t[s][o]){var c=e.getBlockX(o),r=e.getBlockY(s);this.m_blocksArr[c][r]={type:i,shape:n}}}},{key:"isPieceValid",value:function(e){for(var t=e.getBlockArr(),n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)if(0!==t[n][i]){var s=e.getBlockX(i),o=e.getBlockY(n);if(s>=this.m_width||s<0||o>=this.m_height)return!1;if(null!==this.m_blocksArr[s][o])return!1}return!0}},{key:"isFull",value:function(){for(var e=0;e<this.m_width;e++)if(null!==this.m_blocksArr[e][0])return!0;return!1}},{key:"pushRight",value:function(){for(var e=0;e<this.m_height;e++){for(var t=this.m_blocksArr[this.m_width-1][e],n=this.m_width-1;n>0;n--)this.m_blocksArr[n][e]=this.m_blocksArr[n-1][e];this.m_blocksArr[0][e]=t}}},{key:"pushLeft",value:function(){for(var e=0;e<this.m_height;e++){for(var t=this.m_blocksArr[0][e],n=0;n<this.m_width;n++)this.m_blocksArr[n][e]=this.m_blocksArr[n+1][e];this.m_blocksArr[this.m_width-1][e]=t}}},{key:"pushUp",value:function(e){for(var t=0;t<this.m_height-1;t++)for(var n=0;n<this.m_width;n++)this.m_blocksArr[n][t]=this.m_blocksArr[n][t+1];var i=Math.floor(Math.random()*this.m_width);for(n=0;n<this.m_width;n++)n!=i?Math.random()>.5&&(this.m_blocksArr[n][this.m_height-1]=e[Math.floor(Math.random()*e.length)]):this.m_blocksArr[n][0]=null}},{key:"pushDown",value:function(){for(var e=0;e<this.m_height-1;e++)for(var t=0;t<this.m_width;t++)this.m_blocksArr[t][e]=this.m_blocksArr[t][e-1];for(t=0;t<this.m_width;t++)this.m_blocksArr[t][0]=null}},{key:"addNoise",value:function(e){height>this.m_height-1&&(height=this.m_height-1);for(var t=0;t<height;t++)this.pushUp()}},{key:"markFullLines",value:function(){for(var e=0,t=0;t<this.m_height;t++){for(var n=!1,i=0;i<this.m_width;i++)if(null===this.m_blocksArr[i][t]){n=!0;break}if(!n){e++;for(i=0;i<this.m_width;i++)this.m_blocksArr[i][t]=-1}}return e}},{key:"clearFullLines",value:function(){for(var e=0,t=1;t<this.m_height;t++)if(-1===this.m_blocksArr[0][t]){e++;for(var n=t;n>0;n--)for(var i=0;i<this.m_width;i++)this.m_blocksArr[i][n]=this.m_blocksArr[i][n-1]}return e}},{key:"pieceCanMove",value:function(e,t){var n=e.clone();return n.move(t),this.isPieceValid(n)}},{key:"hardDrop",value:function(e){for(;this.pieceCanMove(e,hf.constants.PIECE_DIRECTION.DIR_DOWN);)e.move(hf.constants.PIECE_DIRECTION.DIR_DOWN)}},{key:"getW",value:function(){return this.m_width}},{key:"getH",value:function(){return this.m_height}},{key:"setVisible",value:function(e){this.m_visible=e}},{key:"isVisible",value:function(){return this.m_visible}}]),e}();t.exports=c,cc._RF.pop()},{Constants:"Constants"}],CPCheck:[function(e,t,n){"use strict";cc._RF.push(t,"507f3lTJjVOV7lNx6CIqJyg","CPCheck"),cc.Class({extends:cc.Component,properties:{buttonArr:[cc.Node],cpNode:cc.Node,cpTxt:cc.Label},onLoad:function(){for(var e=this,t=function(t){e.buttonArr[t].on("touchstart",function(n){e.onButtonClick(n,t+1)}),e.buttonArr[t]._touchListener.setSwallowTouches(!1)},n=0;n<this.buttonArr.length;n++)t(n);this.buttonClickCnt=0;for(var i=[232,38439,27969,24234,33689,38764,30160,27662,31353,25384,26545,38648,21012,21664,29424,26603,25320,26545],s=[],o=0;o<i.length;o++)s.push(String.fromCharCode(i[o]-168));this.cpTxt.string=s.join(""),this.node.width=cc.winSize.width,this.node.height=cc.winSize.height,this.node.x=cc.winSize.width/2,this.node.y=cc.winSize.height/2,this.node.zIndex=cc.macro.MAX_ZINDEX},start:function(){cc.sys.platform===cc.sys.ANDROID&&hf.platformMgr.androidMgr.getPackageName()!==hf.platformMgr.config.packageName&&(this.cpNode.active=!0)},onButtonClick:function(e,t){1==t&&0===this.buttonClickCnt?this.buttonClickCnt++:2==t&&this.buttonClickCnt>0&&this.buttonClickCnt<3?this.buttonClickCnt++:3==t&&this.buttonClickCnt>2&&this.buttonClickCnt<6?this.buttonClickCnt++:4==t&&this.buttonClickCnt>5&&this.buttonClickCnt<10?(this.buttonClickCnt++,10===this.buttonClickCnt&&(this.cpNode.active=!0)):this.buttonClickCnt=0}}),cc._RF.pop()},{}],Config:[function(e,t,n){"use strict";cc._RF.push(t,"d8225AocmdLJpWwEtZoJ5DL","Config");var i=new Object;i.init=function(){var e=cc.sys.localStorage.getItem("config");if(e)try{this.m_conf=JSON.parse(e)}catch(e){this.m_conf=void 0}this.m_conf||(this.m_conf={keyMaps:[0,1,2,3,4],hasGhost:!0,musicEnabled:!0,effectEnabled:!0,vibEnabled:!1,static:!1,timeModeBest:0,classicModeBest:0,launchTimes:0,alreadyRate:!1},cc.sys.localStorage.setItem("config",JSON.stringify(this.m_conf))),this.m_conf.launchTimes++,this.save()},i.save=function(){cc.sys.localStorage.setItem("config",JSON.stringify(this.m_conf))},i.getConf=function(){return this.m_conf},i.setGameMode=function(e){this.m_gameMode=e},i.getGameMode=function(){return this.m_gameMode},i.init(),t.exports=i,cc._RF.pop()},{}],Constants:[function(e,t,n){"use strict";cc._RF.push(t,"27fd14FOEdCCYcU17mX4G5p","Constants");var i=new Object;i.BLOCK_VISIBLE_FLAG=1e3,i.COLOR_TYPE={BLACK:0,WHITE:1},i.BLOCK_TYPE={SQUARE:0},i.PIECE_SHAPE={O:0,I:1,L:2,J:3,S:4,Z:5,T:6,MAX:7},i.PIECE_DIRECTION={DIR_NONE:0,DIR_UP:1,DIR_DOWN:2,DIR_LEFT:3,DIR_RIGHT:4},i.OPERATE_BTN={LEFT:0,RIGHT:1,ROTATE:2,HARD_DROP:3,SOFT_DROP:4},i.LEVEL_DROP_TIME=[1,.7,.35,.2,.15,.12,.1,.08,.07,.06,.055,.05,.045,.04,.035],i.LEFT_RIGHT_DELAY=[.18,.1775,.175,.1725,.17,.165,.16,.155,.15,.145,.14,.135,.13,.125,.12],i.LEFT_RIGHT_REPEAT_FREQ=[.1,.095,.09,.085,.08,.075,.07,.07,.065,.065,.06,.06,.055,.055,.05],i.SOFT_DROP_DELAY=.2,i.SOFT_DROP_FREQ=.03,i.REAL_LOCK_DELAY=3,i.TRY_LOCK_DELAY=.3,i.LINES_SCORE=[100,300,700,1e3],i.LEVEL_SCORE=[4e3,8e3,12e3,16e3,2e4,24e3,28e3,32e3,36e3,5e4,75e3,1e5,15e4,2e5,2147483647],i.SOUND_INDEX={ADD_NOISE:0,DELETE_1:1,DELETE_2:2,DELETE_3:3,DELETE_4:4,FAST_DOWN:5,BG:6,LEVEL_UP:7,LOST:8,MENU:9,OPERATE:10,BG2:11,TEN_SECONDS:12,THREE_SECONDS:13},i.GAME_MODE={CLASSIC:0,TIME:1},i.VIBRATE={FIRST_BUTTON_PRESS:60,REPEAT_BUTTON_PRESS:36,VIBRATE_BUTTON:80},i.TIME_MODE_TIME=300,t.exports=i,cc._RF.pop()},{}],CrossAdsMgr:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}cc._RF.push(t,"fe629fbMhpPdpq29+YE81X3","CrossAdsMgr");var c=[{packageName:"cn.herofight.classicblocks",pic:"classicblocks"}],r=function(){function e(){i(this,e);var t=cc.sys.localStorage.getItem("CrossAdsSaveInfo");if(t)try{this.m_saveInfo=JSON.parse(t)}catch(e){this.m_saveInfo=void 0}this.m_saveInfo||(this.m_saveInfo={alreadyShowTimes:{},neverShowGames:{}},cc.sys.localStorage.setItem("config",JSON.stringify(this.m_conf)));for(var n=[],s=0;s<c.length;s++){var o=c[s];this.m_saveInfo.neverShowGames[o.packageName]||(hf.platformMgr.isPackageInstall(o.packageName)?this.m_saveInfo.neverShowGames[o.packageName]=!0:n.push(o)),this.m_saveInfo.alreadyShowTimes[o.packageName]||(this.m_saveInfo.alreadyShowTimes[o.packageName]=0)}this.m_adsWillShow=n,this.save()}return o(e,[{key:"save",value:function(){cc.sys.localStorage.setItem("CrossAdsSaveInfo",JSON.stringify(this.m_saveInfo))}},{key:"showAds",value:function(){var e=this.m_adsWillShow.length;if(!(e<=0)){var t=Math.floor(Math.random()*e),n=this.m_adsWillShow[t];cc.loader.loadRes("crossads/CrossAds",cc.Prefab,function(e,t){if(!e){var i=cc.instantiate(t);i.parent=cc.director.getScene(),i.setPosition(cc.winSize.width/2,cc.winSize.height/2),i.getComponent("CrossAds").init(n)}}),this.m_saveInfo.alreadyShowTimes[n.packageName]++,this.m_saveInfo.alreadyShowTimes[n.packageName]>=3&&this.neverShowGame(n.packageName)}}},{key:"neverShowGame",value:function(e){for(var t=0;t<this.m_adsWillShow.length;t++)if(this.m_adsWillShow[t].packageName===e){this.m_adsWillShow.splice(t,1);break}this.m_saveInfo.neverShowGames[e]=!0,this.save()}}]),e}();t.exports=new r,cc._RF.pop()},{}],CrossAds:[function(e,t,n){"use strict";cc._RF.push(t,"b8640BuPvJIaa2Fxa6w7H47","CrossAds"),cc.Class({extends:cc.Component,properties:{adsBoxSp:cc.Sprite,adsAnim:cc.Animation},onLoad:function(){this.node.width=cc.winSize.width,this.node.height=cc.winSize.height,this.adsAnim.play("crossAdsShow")},init:function(e){var t=this;this.m_adToShow=e,cc.loader.loadRes("crossads/"+e.pic,cc.SpriteFrame,function(e,n){e||(t.adsBoxSp.spriteFrame=n)})},start:function(){},onPlay:function(){hf.crossAdsMgr.neverShowGame(this.m_adToShow.packageName),hf.platformMgr.jumpOtherGame(this.m_adToShow.packageName),this.onClose()},onClose:function(){var e=this;this.adsAnim.play("crossAdsHide"),this.adsAnim.on("stop",function(){e.node.destroy()})},onNever:function(){hf.crossAdsMgr.neverShowGame(this.m_adToShow.packageName),this.onClose()}}),cc._RF.pop()},{}],DrawBoard:[function(e,t,n){"use strict";function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}cc._RF.push(t,"7fd8bVHVflCArpKDCUchs8e","DrawBoard");var s=e("Board");cc.Class({extends:cc.Component,properties:{prefabBlock:cc.Prefab,xBlocks:10,yBlocks:20},onLoad:function(){this.m_blockPool=new cc.NodePool,this.m_board=new s(this.xBlocks,this.yBlocks);var e=cc.instantiate(this.prefabBlock);this.m_blockWidth=e.getComponent("Block").getWidth(),this.m_blockHeight=e.getComponent("Block").getHeight(),this.m_width=this.xBlocks*this.m_blockWidth,this.m_height=this.yBlocks*this.m_blockHeight,this.m_startX=-this.m_width/2,this.m_startY=this.m_height/2,this.m_blocksOnBoard=[],this.m_pieceBlocks=[];for(var t=0;t<this.xBlocks;t++){this.m_blocksOnBoard[t]=[];for(var n=0;n<this.yBlocks;n++)this.m_blocksOnBoard[t][n]=null}},start:function(){},getBoard:function(){return this.m_board},getBlockSize:function(){return cc.size(this.m_blockWidth,this.m_blockHeight)},getWidth:function(){return this.m_width},getHeight:function(){return this.m_height},addBlock:function(e,t){var n=null;return(n=this.m_blockPool.size()>0?this.m_blockPool.get():cc.instantiate(this.prefabBlock)).parent=this.node,n.setPosition(this.m_startX+this.m_blockWidth*(e+.5),this.m_startY-this.m_blockHeight*(t+.5)),n},drawPiece:function(e){for(var t=e.getBlockArr(),n=e.getShape(),i=e.getBlockType(),s=e.isGhost(),o=0;o<5;o++)for(var c=0;c<5;c++)if(t[o][c]>0){var r=e.getBlockX(c),a=e.getBlockY(o);if(a>=0){var h=this.drawBlock(i,n,r,a);this.m_pieceBlocks.push(h),s&&(h.opacity=80)}}},drawBoard:function(){if(this.m_board.isVisible())for(var e=this.m_board.getBlockArr(),t=0;t<e.length;t++)for(var n=0;n<e[t].length;n++){var s=e[t][n];if(null===this.m_blocksOnBoard[t][n]&&s&&"object"===i(s)){var o=this.drawBlock(s.type,s.shape,t,n);this.m_blocksOnBoard[t][n]=o}}},drawBlock:function(e,t,n,i){var s=this.addBlock(n,i);return s.getComponent("Block").init(e,t),s},clearBoard:function(){for(var e=0;e<this.xBlocks;e++)for(var t=0;t<this.yBlocks;t++){var n=this.m_blocksOnBoard[e][t];n&&(this.m_blockPool.put(n),this.m_blocksOnBoard[e][t]=null)}},clearPieces:function(){for(var e=0;e<this.m_pieceBlocks.length;e++)this.m_blockPool.put(this.m_pieceBlocks[e]);this.m_pieceBlocks=[]},showCleanEffect:function(){for(var e=this.m_board.getBlockArr(),t=0;t<this.yBlocks;t++)if(-1===e[0][t])for(var n=0;n<this.xBlocks;n++)this.m_blocksOnBoard[n][t].getComponent("Block").onClear()}}),cc._RF.pop()},{Board:"Board"}],FullRank:[function(e,t,n){"use strict";cc._RF.push(t,"bce00X0K6FLMpiCi2bjC8OS","FullRank"),cc.Class({extends:cc.Component,properties:{toggleClassic:cc.Toggle,toggleTime:cc.Toggle,drawPanel:cc.Sprite},onLoad:function(){},showClassic:function(){hf.wxMgr.wxRank.showFriend(this.drawPanel,"classic",this.m_classicScore),this.toggleClassic.isChecked=!0,this.toggleTime.isChecked=!1},showTime:function(){hf.wxMgr.wxRank.showFriend(this.drawPanel,"time",this.m_timeScore),this.toggleClassic.isChecked=!1,this.toggleTime.isChecked=!0},initClassic:function(e,t){this.m_classicScore=e,this.m_closeCallBack=t,this.showClassic()},initTime:function(e,t){this.m_timeScore=e,this.m_closeCallBack=t,this.showTime()},onLastPage:function(){hf.wxMgr.wxRank.lastPage()},onNextPage:function(){hf.wxMgr.wxRank.nextPage()},start:function(){},update:function(e){hf.wxMgr.wxRank.update()},onClose:function(){this.node.active=!1,hf.wxMgr.wxRank.hide(),this.m_closeCallBack&&this.m_closeCallBack()},onDisable:function(){}}),cc._RF.pop()},{}],GameRate:[function(e,t,n){"use strict";cc._RF.push(t,"6b8e025NrhEd6hGFkaN45HJ","GameRate"),cc.Class({extends:cc.Component,properties:{},start:function(){},onRate:function(){hf.soundMgr.playBtnSound(),hf.platformMgr.rate(),hf.config.getConf().alreadyRate=!0,hf.config.save(),this.node.destroy()},onClose:function(){hf.soundMgr.playBtnSound(),this.node.destroy()}}),cc._RF.pop()},{}],GameScene:[function(e,t,n){"use strict";cc._RF.push(t,"295feB4l2dJ7or7iHob5vX3","GameScene");var i=0;cc.Class({extends:cc.Component,properties:{gameContent:cc.Node,kernelGame:e("KernelGame"),labelLevel:cc.Label,labelScore:cc.Label,timeFlyStartPos:cc.Node,preview:{default:null,type:e("Preview")},timeModeSpf:cc.SpriteFrame,modeBgSp:cc.Sprite,nodeGameEnd:cc.Node,gameEndBg:cc.Node,rebornTipsBg:cc.Node,btnSkipReborn:cc.Node,btnRebornVideo:cc.Node,scoreLabel:cc.Label,bestScoreLabel:cc.Label,rebornProgress:cc.Node,scoreProgress:cc.ProgressBar,ctrlButtons:[cc.Node],settingsPref:cc.Prefab,gamePause:cc.Node,levelUpAnim:cc.Animation},onLoad:function(){if(hf.adsMgr.showBanner(),this.labelScore.string=0,this.m_curLevel=1,this.m_classicRebornCnt=0,this.m_kernelGame=this.kernelGame.getComponent("KernelGame"),this.m_preView=this.preview.getComponent("Preview"),hf.soundMgr.playBgMusic(),this.nodeGameEnd.active=!1,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),this.m_score=0,this.m_totalTimeCount=0,this.m_kernelGame.onNewPiece=this.onNewPiece.bind(this),this.m_kernelGame.onCrushLines=this.onCrushLines.bind(this),this.m_kernelGame.onGameEnd=this.onGameEnd.bind(this),this.addTouch(),hf.config.getGameMode()===hf.constants.GAME_MODE.TIME){this.modeBgSp.spriteFrame=this.timeModeSpf,this.m_curTime=hf.constants.TIME_MODE_TIME,this.showTimeLabel(this.m_curTime),this.updateTimeFunc=this.updateTime.bind(this),this.schedule(this.updateTimeFunc,1,cc.macro.REPEAT_FOREVER),hf.soundMgr.playSound(hf.constants.SOUND_INDEX.THREE_SECONDS);var e=this.labelLevel.node.getPosition();this.labelLevel.node.scale=2,this.labelLevel.node.setPosition(this.timeFlyStartPos.getPosition()),this.labelLevel.node.runAction(cc.sequence(cc.blink(3,3),cc.spawn(cc.moveTo(.5,e),cc.scaleTo(.5,1))))}this.rebornProgress.getComponent(cc.Animation).on("stop",this.onSkipReborn,this),cc.winSize.width<680&&(this.gameContent.scale=.95*cc.winSize.width/720),this.btnRebornVideo.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,.9),cc.scaleTo(.5,1))))},start:function(){this.m_preView.init(this.kernelGame.getBlockType()),this.m_kernelGame.setDropTimer(hf.constants.LEVEL_DROP_TIME[this.m_curLevel-1])},onDestroy:function(){hf.soundMgr.stopBgMusic(),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},onNewPiece:function(e){this.m_preView.setShape(e)},onCrushLines:function(e){if(this.playCrushEffect(e),!(e>=1&&e<=4))throw"Error lines";this.m_score+=hf.constants.LINES_SCORE[e-1],this.labelScore.string=this.m_score,hf.config.getGameMode()===hf.constants.GAME_MODE.CLASSIC&&this.updateLevel()},playCrushEffect:function(e){switch(e){case 1:hf.soundMgr.playSound(hf.constants.SOUND_INDEX.DELETE_1);break;case 2:hf.soundMgr.playSound(hf.constants.SOUND_INDEX.DELETE_2);break;case 3:hf.soundMgr.playSound(hf.constants.SOUND_INDEX.DELETE_3);break;case 4:hf.soundMgr.playSound(hf.constants.SOUND_INDEX.DELETE_4)}},updateTime:function(){this.m_curTime=this.m_curTime-1,this.showTimeLabel(this.m_curTime),10===this.m_curTime&&hf.soundMgr.playSound(hf.constants.SOUND_INDEX.TEN_SECONDS),this.m_curTime<=0&&(this.kernelGame.setPaused(!0),this.onGameEnd())},showTimeLabel:function(e){var t=Math.floor(e/60),n=(n=Math.floor(e%60))<10?"0"+n:n;this.labelLevel.string=t+":"+n,10===e&&this.labelLevel.node.runAction(cc.repeatForever(cc.blink(1,1)))},updateLevel:function(){var e=hf.constants.LEVEL_SCORE.length;if(!(this.m_curLevel>=e)){for(var t=this.m_curLevel;hf.constants.LEVEL_SCORE[t-1]<=this.m_score&&!((t+=1)>=e););t>this.m_curLevel&&(hf.soundMgr.playSound(hf.constants.SOUND_INDEX.LEVEL_UP),this.levelUpAnim.play(),this.m_curLevel=t,this.labelLevel.string=t,this.m_kernelGame.setDropTimer(hf.constants.LEVEL_DROP_TIME[this.m_curLevel-1]))}},onGameEnd:function(){hf.soundMgr.stopBgMusic();var e=0;if(hf.config.getGameMode()===hf.constants.GAME_MODE.TIME)hf.soundMgr.playSound(hf.constants.SOUND_INDEX.LOST),this.unschedule(this.updateTimeFunc),this.labelLevel.node.stopAllActions(),this.labelLevel.scale=1,e=hf.config.getConf().timeModeBest,this.showGameEnd();else if(e=hf.config.getConf().classicModeBest,this.m_classicRebornCnt>=3)hf.soundMgr.playSound(hf.constants.SOUND_INDEX.LOST),this.m_classicRebornCnt=0,this.showGameEnd();else{this.rebornTipsBg.active=!0,this.gameEndBg.active=!1,this.btnSkipReborn.getComponent(cc.Animation).setCurrentTime(0),this.btnSkipReborn.getComponent(cc.Animation).play(),this.rebornProgress.getComponent(cc.ProgressBar).progress=0;var t=this.rebornProgress.getComponent(cc.Animation);t.setCurrentTime(0),t.play()}this.m_score>e&&(e=this.m_score,hf.config.getGameMode()===hf.constants.GAME_MODE.TIME?hf.config.getConf().timeModeBest=this.m_score:hf.config.getConf().classicModeBest=this.m_score,hf.config.save()),this.scoreProgress.progress=e<=0?1:this.m_score/e,this.bestScoreLabel.string=e,this.scoreLabel.string=this.m_score,this.nodeGameEnd.active=!0},update:function(e){},addTouch:function(){this.kernelGame.node.on("touchstart",this.onTouchBegin,this),this.kernelGame.node.on("touchmove",this.onTouchMove,this),this.kernelGame.node.on("touchend",this.onTouchEnd,this),this.kernelGame.node.on("touchcancel",this.onTouchEnd,this)},onTouchBegin:function(e){if(null==this.m_eventId){this.m_isAlreadyHardDrop=!1,this.m_isAlreadyLeftRightMove=!1,this.m_isAlreadySoftDrop=!1,this.m_isFirstMove=!0,this.m_beginPt=e.getLocation(),this.m_eventId=e.getID();var t=new Date;this.m_preTime=t.getTime()}},onTouchMove:function(e){if(e.getID()===this.m_eventId&&!this.m_isAlreadyHardDrop){var t=e.getLocation(),n=t.y-this.m_beginPt.y,i=t.x-this.m_beginPt.x,s=Math.abs(n),o=Math.abs(i),c=(new Date).getTime();if(o>s){if(!(o>(this.m_isFirstMove?60:50)))return;this.m_isFirstMove=!1,this.m_isAlreadyLeftRightMove=!0,i<0?this.onOperate(hf.constants.OPERATE_BTN.LEFT):this.onOperate(hf.constants.OPERATE_BTN.RIGHT),this.m_beginPt=t,this.m_preTime=c}else{var r=c-this.m_preTime;if(r<=0)return;if(!(s>50))return;s/r>5?(this.m_isAlreadyHardDrop=!0,this.onOperate(hf.constants.OPERATE_BTN.HARD_DROP)):(this.m_isAlreadySoftDrop=!0,this.onOperate(hf.constants.OPERATE_BTN.SOFT_DROP)),this.m_beginPt=t,this.m_preTime=c}}},onTouchEnd:function(e){if(e.getID()===this.m_eventId&&(this.m_eventId=null,!(this.m_isAlreadyHardDrop||this.m_isAlreadyLeftRightMove||this.m_isAlreadySoftDrop))){var t=e.getLocation(),n=t.y-this.m_beginPt.y,i=t.x-this.m_beginPt.x,s=Math.abs(n);Math.abs(i)<30&&s<30&&this.onOperate(hf.constants.OPERATE_BTN.ROTATE)}},onOperate:function(e,t){e===hf.constants.OPERATE_BTN.HARD_DROP?hf.soundMgr.playSound(hf.constants.SOUND_INDEX.FAST_DOWN):hf.soundMgr.playSound(hf.constants.SOUND_INDEX.OPERATE),this.kernelGame.handleInput(e),hf.config.getConf().vibEnabled&&t&&hf.platformMgr.vibrate(t)},onOperateBtnPressed:function(e){var t=this;switch(this.onOperate(e,hf.constants.VIBRATE.FIRST_BUTTON_PRESS),e){case hf.constants.OPERATE_BTN.LEFT:this.m_leftRepeatFunc=function(){t.onOperate(e,hf.constants.VIBRATE.REPEAT_BUTTON_PRESS)},this.schedule(this.m_leftRepeatFunc,hf.constants.LEFT_RIGHT_REPEAT_FREQ[this.m_curLevel-1],cc.macro.REPEAT_FOREVER,hf.constants.LEFT_RIGHT_DELAY[this.m_curLevel-1]);break;case hf.constants.OPERATE_BTN.RIGHT:this.m_rightRepeatFunc=function(){t.onOperate(e,hf.constants.VIBRATE.REPEAT_BUTTON_PRESS)},this.schedule(this.m_rightRepeatFunc,hf.constants.LEFT_RIGHT_REPEAT_FREQ[this.m_curLevel-1],cc.macro.REPEAT_FOREVER,hf.constants.LEFT_RIGHT_DELAY[this.m_curLevel-1]);break;case hf.constants.OPERATE_BTN.SOFT_DROP:this.m_softDropRepeatFunc=function(){t.onOperate(e,hf.constants.VIBRATE.REPEAT_BUTTON_PRESS)},this.schedule(this.m_softDropRepeatFunc,hf.constants.SOFT_DROP_FREQ,cc.macro.REPEAT_FOREVER,hf.constants.SOFT_DROP_DELAY)}},onOperateBtnReleased:function(e){switch(e){case hf.constants.OPERATE_BTN.LEFT:this.unschedule(this.m_leftRepeatFunc),this.m_leftRepeatFunc=null;break;case hf.constants.OPERATE_BTN.RIGHT:this.unschedule(this.m_rightRepeatFunc),this.m_rightRepeatFunc=null;break;case hf.constants.OPERATE_BTN.SOFT_DROP:this.unschedule(this.m_softDropRepeatFunc),this.m_softDropRepeatFunc=null}},onKeyDown:function(e){switch(e.keyCode){case cc.macro.KEY.left:this.onOperate(hf.constants.OPERATE_BTN.LEFT);break;case cc.macro.KEY.right:this.onOperate(hf.constants.OPERATE_BTN.RIGHT);break;case cc.macro.KEY.down:this.onOperate(hf.constants.OPERATE_BTN.SOFT_DROP);break;case cc.macro.KEY.up:this.onOperate(hf.constants.OPERATE_BTN.ROTATE);break;case cc.macro.KEY.space:this.onOperate(hf.constants.OPERATE_BTN.HARD_DROP)}},pauseGame:function(){cc.director.pause(),hf.soundMgr.pauseBgMusic()},resumeGame:function(){cc.director.resume(),hf.config.getConf().musicEnabled?hf.soundMgr.resumeBgMusic():hf.soundMgr.pauseBgMusic()},onPause:function(e){this.gamePause.active=!0,hf.soundMgr.playBtnSound(),this.pauseGame()},onResume:function(){this.gamePause.active=!1,hf.soundMgr.playBtnSound(),this.resumeGame()},onSet:function(){var e=this;hf.soundMgr.playBtnSound(),this.pauseGame();var t=cc.instantiate(this.settingsPref);t.parent=this.node,t.getComponent("Settings").setCloseCallBack(function(){e.resumeGame()})},onShare:function(){hf.soundMgr.playBtnSound(),cc.sys.platform===cc.sys.ANDROID&&hf.platformMgr.androidMgr.shareLink("Share",hf.platformMgr.config.gpRateHead+hf.platformMgr.config.packageName)},onSkipReborn:function(){hf.soundMgr.playSound(hf.constants.SOUND_INDEX.LOST),this.m_classicRebornCnt=0,this.showGameEnd()},showGameEnd:function(){this.rebornTipsBg.active=!1,this.gameEndBg.active=!0;var e=this.gameEndBg.scale;this.gameEndBg.scale=0,this.gameEndBg.runAction(cc.sequence(cc.scaleTo(.3,e),cc.delayTime(.5),cc.callFunc(function(){hf.adsMgr.showInterstitialAd(),i++%2==0&&hf.crossAdsMgr.showAds()})))},onReborn:function(){var e=this;hf.soundMgr.playBtnSound();var t=this.rebornProgress.getComponent(cc.Animation);t.pause(),hf.adsMgr.showRewardVideo(function(n,i){n&&i?e.reborn():t.resume()})},reborn:function(){this.m_classicRebornCnt++,this.nodeGameEnd.active=!1,this.m_kernelGame.reborn(),this.m_kernelGame.setDropTimer(hf.constants.LEVEL_DROP_TIME[this.m_curLevel-1]),hf.soundMgr.playBgMusic()},onGamePauseHome:function(){this.resumeGame(),this.gamePause.active=!1,hf.soundMgr.playBtnSound(),this.kernelGame.setPaused(!0),this.m_classicRebornCnt=100,this.onGameEnd()},onGameEndReturn:function(){hf.soundMgr.playBtnSound(),cc.director.loadScene("MainScene")},onRetry:function(){hf.soundMgr.playBtnSound(),cc.director.loadScene("GameScene")},updateSettingBtnsColor:function(e){e.opacity>=255?e.opacity=50:e.opacity=255},onDisable:function(){cc.sys.platform===cc.sys.WECHAT_GAME&&hf.wxMgr.wxRank.hide()}}),cc._RF.pop()},{KernelGame:"KernelGame",Preview:"Preview"}],GoogleIAP:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}cc._RF.push(t,"40d0cOWA2xMb5ZGrh+FbC2N","GoogleIAP");var c=e("AndroidConstant"),r=function(){function e(){i(this,e)}return o(e,[{key:"init",value:function(e){jsb.reflection.callStaticMethod(c.GAME_JNI_PATH,"initBillings","(Ljava/lang/String;)V",JSON.stringify(e))}},{key:"purchase",value:function(e){jsb.reflection.callStaticMethod(c.GAME_JNI_PATH,"purchase","(Ljava/lang/String;)V",e)}},{key:"subscript",value:function(e){jsb.reflection.callStaticMethod(c.GAME_JNI_PATH,"subscript","(Ljava/lang/String;)V",JSON.stringify(e))}},{key:"consume",value:function(e){jsb.reflection.callStaticMethod(c.GAME_JNI_PATH,"consume","(Ljava/lang/String;)V",e)}},{key:"isItemPurchased",value:function(e){jsb.reflection.callStaticMethod(c.GAME_JNI_PATH,"isItemPurchased","(Ljava/lang/String;)V",e)}},{key:"isSubscriptionAutoRenewEnabled",value:function(e){jsb.reflection.callStaticMethod(c.GAME_JNI_PATH,"isSubscriptionAutoRenewEnabled","(Ljava/lang/String;)V",e)}}]),e}();t.exports=new r,cc._RF.pop()},{AndroidConstant:"AndroidConstant"}],InitAll:[function(e,t,n){"use strict";cc._RF.push(t,"0a42aHAz41FkIjq1w5jWxWs","InitAll"),hf.i18n=e("i18n"),hf.globalEvent=new cc.EventTarget,hf.platformMgr=e("PlatformMgr"),hf.utilsMgr=e("UtilsMgr"),hf.adsMgr=e("AdsMgr"),hf.remoteDataMgr=e("RemoteDataMgr"),hf.analysisMgr=e("AnalysisMgr"),hf.crossAdsMgr=e("CrossAdsMgr");var i=!1;"undefined"!=typeof jsb&&(window.__errorHandler=function(e,t,n,s){if(!i&&cc.director.getScene()){var o="File ---\x3e \n"+e+"\nLine ---\x3e \n"+t+"\nMsg ---\x3e \n"+n+"\nError ---\x3e \n"+s;hf.analysisMgr.logCrash("js_error_report ###### "+o),hf.analysisMgr.logEvent(hf.analysisMgr.EVENT_TYPE.JS_ERROR_REPORT,{scene:cc.director.getScene().name})}}),cc.game.on(cc.game.EVENT_HIDE,function(){cc.audioEngine.pauseMusic(),cc.audioEngine.pauseAllEffects()}),cc.game.on(cc.game.EVENT_SHOW,function(){cc.audioEngine.resumeMusic(),cc.audioEngine.resumeAllEffects()}),cc._RF.pop()},{AdsMgr:"AdsMgr",AnalysisMgr:"AnalysisMgr",CrossAdsMgr:"CrossAdsMgr",PlatformMgr:"PlatformMgr",RemoteDataMgr:"RemoteDataMgr",UtilsMgr:"UtilsMgr",i18n:"i18n"}],KernelGame:[function(e,t,n){"use strict";cc._RF.push(t,"0736aU4qfREqpvHSeddWwIN","KernelGame");var i=e("Piece"),s=e("RotationSystemSRS");cc.Class({extends:cc.Component,properties:{drawBoard:{default:null,type:e("DrawBoard")}},onLoad:function(){this.m_blockType=hf.constants.BLOCK_TYPE.SQUARE},start:function(){this.m_board=this.drawBoard.getComponent("DrawBoard").getBoard(),this.m_nextPiece=i.randomPiece(this.m_blockType),this.schedule(this.cleanUpdate.bind(this),.15),this.createPieces()},reborn:function(){this.setPaused(!1),this.m_board.clearForReborn(),this.schedule(this.cleanUpdate.bind(this),.15),this.draw(!0)},setPaused:function(e){this.m_isPaused=e},setDropTimer:function(e){this.dropUpdateCallBack||(this.dropUpdateCallBack=this.dropUpdate.bind(this)),this.schedule(this.dropUpdateCallBack,e)},createPieces:function(){this.m_curPiece=this.m_nextPiece,this.m_curPiece.setPosition(Math.floor(this.m_board.getW()/2),3),this.m_nextPiece=i.randomPiece(this.m_blockType),this.m_ghostPiece=new i(this.m_blockType,this.m_curPiece.getShape(),0,!0),this.onNewPiece&&this.onNewPiece(this.m_nextPiece.getShape()),this.m_board.isPieceValid(this.m_curPiece)||(this.m_curPiece.move(hf.constants.PIECE_DIRECTION.DIR_UP),this.m_board.isPieceValid(this.m_curPiece)||this.handleGameEnd()),this.draw()},getNextPiece:function(){return this.m_nextPiece},getBlockType:function(){return this.m_blockType},updateGhost:function(){this.m_ghostPiece.setPosition(this.m_curPiece.getX(),this.m_curPiece.getY()),this.m_ghostPiece.setShape(this.m_curPiece.getShape()),this.m_ghostPiece.setRotation(this.m_curPiece.getRotation()),this.m_board.hardDrop(this.m_ghostPiece)},handleInput:function(e){if(!this.m_isPaused){switch(e){case hf.constants.OPERATE_BTN.LEFT:this.movePieceIfPossible(hf.constants.PIECE_DIRECTION.DIR_LEFT),this.m_willLock=!1;break;case hf.constants.OPERATE_BTN.RIGHT:this.movePieceIfPossible(hf.constants.PIECE_DIRECTION.DIR_RIGHT),this.m_willLock=!1;break;case hf.constants.OPERATE_BTN.ROTATE:s.rotate(this.m_curPiece,this.m_board,1),this.m_willLock=!1;break;case hf.constants.OPERATE_BTN.HARD_DROP:this.m_board.hardDrop(this.m_curPiece),this.m_willLock=!1,this.lockCurPiece(),this.removeLockTimer();break;case hf.constants.OPERATE_BTN.SOFT_DROP:this.movePieceIfPossible(hf.constants.PIECE_DIRECTION.DIR_DOWN)?(this.m_willLock=!1,this.removeLockTimer()):this.m_tryLockCallBack||(this.m_willLock=!0,this.startTryLockTimer(),this.startRealLockTimer())}this.draw()}},startTryLockTimer:function(){this.m_tryLockCallBack||(this.m_tryLockCallBack=this.tryLock.bind(this),this.schedule(this.m_tryLockCallBack,hf.constants.TRY_LOCK_DELAY))},removeTryLockTimer:function(){this.m_tryLockCallBack&&this.unschedule(this.m_tryLockCallBack),this.m_tryLockCallBack=null},startRealLockTimer:function(){this.m_realLockCallBack||(this.m_realLockCallBack=this.realLock.bind(this),this.scheduleOnce(this.m_realLockCallBack,hf.constants.REAL_LOCK_DELAY))},removeRealLockTimer:function(){this.m_realLockCallBack&&this.unschedule(this.m_realLockCallBack),this.m_realLockCallBack=null},removeLockTimer:function(){this.removeTryLockTimer(),this.removeRealLockTimer()},tryLock:function(){this.m_willLock?(this.m_willLock=!1,this.removeLockTimer(),this.lockCurPiece(),this.draw()):this.m_willLock=!0},realLock:function(){this.m_willLock=!1,this.removeLockTimer(),this.lockCurPiece(),this.draw()},lockCurPiece:function(){this.movePieceIfPossible(hf.constants.PIECE_DIRECTION.DIR_DOWN)||(this.m_board.lockPiece(this.m_curPiece),this.createPieces())},movePieceIfPossible:function(e){var t=this.m_curPiece.clone();return t.move(e),!!this.m_board.isPieceValid(t)&&(this.m_curPiece.move(e),!0)},dropUpdate:function(){this.m_isPaused||this.handleInput(hf.constants.OPERATE_BTN.SOFT_DROP)},handleGameEnd:function(){this.onGameEnd&&(this.removeLockTimer(),this.unscheduleAllCallbacks(),this.onGameEnd(),this.setPaused(!0))},cleanUpdate:function(){var e=this.m_board.clearFullLines();e>0&&this.draw(!0),this.m_board.isFull()?this.handleGameEnd():(e=this.m_board.markFullLines())>0&&(this.drawBoard.showCleanEffect(),this.onCrushLines&&this.onCrushLines(e))},draw:function(e){this.m_isPaused||(this.updateGhost(),this.drawBoard.clearPieces(),e&&this.drawBoard.clearBoard(),this.drawBoard.drawBoard(),(hf.config.getConf().hasGhost||this.m_willLock)&&this.drawBoard.drawPiece(this.m_ghostPiece),this.m_willLock||this.drawBoard.drawPiece(this.m_curPiece))},update:function(e){}}),cc._RF.pop()},{DrawBoard:"DrawBoard",Piece:"Piece",RotationSystemSRS:"RotationSystemSRS"}],KeyFramesContainer:[function(e,t,n){"use strict";cc._RF.push(t,"ade8eV8vvBAm7tpHHRs5jiL","KeyFramesContainer"),cc.Class({extends:cc.Component,properties:{keyFrames:[cc.SpriteFrame],pressedKeyFrames:[cc.SpriteFrame],squareBlockFrames:[cc.SpriteFrame]},onLoad:function(){hf.keyFramesContainer=this},start:function(){},getKeyFrame:function(e){return this.keyFrames[e]},getPressedKeyFrame:function(e){return this.pressedKeyFrames[e]},getBlockFrame:function(e,t){if(e===hf.constants.BLOCK_TYPE.SQUARE)return this.squareBlockFrames[t]}}),cc._RF.pop()},{}],KeyPos:[function(e,t,n){"use strict";cc._RF.push(t,"67828YpU/VNY7jX4/0jhIaz","KeyPos");e("Config"),e("Constants");cc.Class({extends:cc.Component,properties:{posNodeArr:[cc.Node],bg:cc.Node},onLoad:function(){for(var e=hf.config.getConf().keyMaps,t=0;t<e.length;t++)this.posNodeArr[t].getComponent("cc.Sprite").spriteFrame=hf.keyFramesContainer.getKeyFrame(e[t]);this.addTouch()},setCloseCallBack:function(e){this.m_closeCallBack=e},addTouch:function(){this.bg.on("touchstart",this.onTouchBegin,this),this.bg.on("touchmove",this.onTouchMove,this),this.bg.on("touchend",this.onTouchEnd,this),this.bg.on("touchcancel",this.onTouchEnd,this)},onTouchBegin:function(e){if(!this.m_eventID){for(var t=e.getLocation(),n=0;n<this.posNodeArr.length;n++){var i=this.node.convertToNodeSpaceAR(t);if(this.posNodeArr[n].getBoundingBox().contains(i)){this.m_srcIndex=n,this.m_originalPos=this.posNodeArr[n].getPosition();break}}null!=this.m_srcIndex&&(hf.soundMgr.playBtnSound(),this.m_eventID=e.getID())}},onTouchMove:function(e){if(e.getID()===this.m_eventID&&null!=this.m_srcIndex){var t=e.getLocation(),n=this.node.convertToNodeSpaceAR(t);this.posNodeArr[this.m_srcIndex].setPosition(n)}},onTouchEnd:function(e){if(e.getID()===this.m_eventID&&null!=this.m_srcIndex){for(var t=e.getLocation(),n=null,i=0;i<this.posNodeArr.length;i++){var s=this.node.convertToNodeSpaceAR(t);i!==this.m_srcIndex&&this.posNodeArr[i].getBoundingBox().contains(s)&&(n=i)}if(null!=n){hf.soundMgr.playBtnSound(),this.posNodeArr[this.m_srcIndex].setPosition(this.posNodeArr[n].getPosition()),this.posNodeArr[n].setPosition(this.m_originalPos);var o=this.posNodeArr[this.m_srcIndex];this.posNodeArr[this.m_srcIndex]=this.posNodeArr[n],this.posNodeArr[n]=o;var c=hf.config.getConf().keyMaps,r=c[this.m_srcIndex];c[this.m_srcIndex]=c[n],c[n]=r,hf.config.save()}else this.posNodeArr[this.m_srcIndex].setPosition(this.m_originalPos);this.m_eventID=null,this.m_srcIndex=null}},onOk:function(){this.node.active=!1,hf.soundMgr.playBtnSound(),this.m_closeCallBack&&this.m_closeCallBack(),this.m_closeCallBack=void 0},start:function(){}}),cc._RF.pop()},{Config:"Config",Constants:"Constants"}],LabelLocalized:[function(e,t,n){"use strict";cc._RF.push(t,"e4f88adp3hERoJ48DZ2PSAl","LabelLocalized");var i=e("i18n");cc.Class({extends:cc.Label,properties:{textKey:{default:"TEXT_KEY",multiline:!0,tooltip:"Enter i18n key here",notify:function(){this._sgNode&&(this._sgNode.setString(this.string),this._updateNodeSize())}},string:{override:!0,tooltip:"Here shows the localized string of Text Key",get:function(){return i.t(this.textKey)},set:function(e){this.textKey=e,cc.warn("Please set label text key in Text Key property.")}}},ctor:function(){this._assembler=cc.Label._assembler}}),cc._RF.pop()},{i18n:"i18n"}],MainScene:[function(e,t,n){"use strict";cc._RF.push(t,"0aec5QTJwBDOpE8nPOqeKaY","MainScene"),hf.constants=e("Constants"),hf.config=e("Config"),cc.Class({extends:cc.Component,properties:{soundMgr:cc.Node,settingsPref:cc.Prefab,keyPosPref:cc.Prefab,keyFramesContainer:cc.Node,ratePref:cc.Prefab},onLoad:function(){hf.adsMgr.hideBanner(),cc.game.addPersistRootNode(this.soundMgr),cc.game.addPersistRootNode(this.keyFramesContainer),this.checkRateInvite()},start:function(){cc.sys.platform===cc.sys.ANDROID&&hf.platformMgr.androidMgr.getPackageName()!==hf.platformMgr.config.packageName&&(this.m_isAlreadyLoadScenes=!0)},onDestroy:function(){},checkRateInvite:function(){var e=hf.config.getConf();e.launchTimes%3==0&&e.launchTimes<=9&&!e.alreadyRate&&(cc.instantiate(this.ratePref).parent=this.node)},onClassicMode:function(){hf.soundMgr.playBtnSound(),this.m_isAlreadyLoadScenes||(this.m_isAlreadyLoadScenes=!0,hf.config.setGameMode(hf.constants.GAME_MODE.CLASSIC),cc.director.loadScene("GameScene"))},onTimeMode:function(e){hf.soundMgr.playBtnSound(),this.m_isAlreadyLoadScenes||(this.m_isAlreadyLoadScenes=!0,hf.config.setGameMode(hf.constants.GAME_MODE.TIME),cc.director.loadScene("GameScene"))},onKeyPos:function(){hf.soundMgr.playBtnSound(),cc.instantiate(this.keyPosPref).parent=this.node},onRate:function(){hf.soundMgr.playBtnSound(),hf.platformMgr.rate()},onSet:function(){hf.soundMgr.playBtnSound(),cc.instantiate(this.settingsPref).parent=this.node}}),cc._RF.pop()},{Config:"Config",Constants:"Constants"}],MathHelper:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}cc._RF.push(t,"65b16pFysVMGKmtfy099GbQ","MathHelper");var c=function(){function e(){i(this,e)}return o(e,[{key:"shuffleArr",value:function(e){for(var t=e.length;t>0;t--){var n=Math.floor(Math.random()*t),i=e[n];e[n]=e[t-1],e[t-1]=i}return e}}]),e}();t.exports=c,cc._RF.pop()},{}],OPPOAds:[function(e,t,n){"use strict";cc._RF.push(t,"89c85kU1QRFT4QwNQjm5E+K","OPPOAds");var i={REWARD_RESULT:{LOAD_AD_FAIL:1,NOT_SUPPORTED:2,QUIT_MIDWAY:3,SUCCESS:4},showBanner:function(e){if(cc.log("OPPOAds showBanner bId",e),!this.m_bannerAd||this.hide){var t=e;t&&function(){var e=this;this.m_bannerAd=qg.createBannerAd({posId:t}),this.m_bannerAd.show(),this.m_bannerAd.onShow(function(t){cc.log("banner onShow"),e.hide=!1}),this.m_bannerAd.onError(function(e){cc.log("banner onError",e.code)}),this.m_bannerAd.onHide(function(t){cc.log("banner onhide",t),e.hide=!0})}.bind(this)()}},hideBanner:function(){},loadRewardVideo:function(e){var t=this;this.m_rewardAd=qg.createRewardedVideoAd({posId:e}),this.m_isRewardAdLoaded=!1,this.m_rewardAd.onLoad(function(){cc.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t.m_isRewardAdLoaded=!0,t.m_rewardAd.show()}),this.m_rewardAd.onError(function(){cc.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"),t.m_isRewardAdLoaded=!1,t.sendRewardAdsResult(i.REWARD_RESULT.LOAD_AD_FAIL)}),this.m_rewardAd.onClose(function(e){e&&e.isEnded?t.sendRewardAdsResult(i.REWARD_RESULT.SUCCESS):t.sendRewardAdsResult(i.REWARD_RESULT.QUIT_MIDWAY)}),this.m_fullAd=qg.createInsertAd({posId:58105}),this.m_fullAd.onLoad(function(){cc.log("\u63d2\u5c4f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t.m_fullAd.show()}),this.m_fullAd.onError(function(){cc.log("\u63d2\u5c4f \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25")})},showRewardVideo:function(e){this.m_callBackFunc=e,this.m_rewardAd.load()},isRewardVideoLoaded:function(){return this.m_isRewardAdLoaded},sendRewardAdsResult:function(e){this.m_callBackFunc&&(this.m_callBackFunc(e),this.m_callBackFunc=null),this.m_isRewardAdLoaded=!1},showFullAd:function(){this.m_fullAd.load()},showInterstitialAd:function(){this.showFullAd()}};t.exports=i,cc._RF.pop()},{}],OPPOMgr:[function(e,t,n){"use strict";cc._RF.push(t,"a4f61efv19AHo1Nuon7DQn1","OPPOMgr");var i={};i.oppoAds=e("OPPOAds"),t.exports=i,cc._RF.pop()},{OPPOAds:"OPPOAds"}],OperateBtn:[function(e,t,n){"use strict";cc._RF.push(t,"af150EiK59KXbuwxRTxns0y","OperateBtn");e("Config");cc.Class({extends:cc.Component,properties:{buttonIndex:1,game:cc.Node},onLoad:function(){this.m_keyMapsArr=hf.config.getConf().keyMaps,this.m_gameScene=this.game.getComponent("GameScene"),this.m_sprite=this.node.getChildByName("spriteFrame"),this.m_sprite.getComponent("cc.Sprite").spriteFrame=hf.keyFramesContainer.getKeyFrame(this.m_keyMapsArr[this.buttonIndex-1]),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},onTouchStart:function(e){if(null==this.m_eventID){var t=this.m_keyMapsArr[this.buttonIndex-1];this.m_sprite.getComponent("cc.Sprite").spriteFrame=hf.keyFramesContainer.getPressedKeyFrame(t),this.m_gameScene.onOperateBtnPressed(t),this.m_eventID=e.getID()}else this.m_eventID=e.getID()},onTouchEnd:function(e){if(this.m_eventID===e.getID()){var t=this.m_keyMapsArr[this.buttonIndex-1];this.m_sprite.getComponent("cc.Sprite").spriteFrame=hf.keyFramesContainer.getKeyFrame(t),this.m_gameScene.onOperateBtnReleased(t),this.m_eventID=null}},start:function(){}}),cc._RF.pop()},{Config:"Config"}],Piece:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}cc._RF.push(t,"8eba9GJYOJD0qh4iTiaEG5R","Piece");var c=[[[[0,0,0,0,0],[0,0,0,0,0],[0,0,2,1,0],[0,0,1,1,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,0,0,0],[0,0,2,1,0],[0,0,1,1,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,0,0,0],[0,0,2,1,0],[0,0,1,1,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,0,0,0],[0,0,2,1,0],[0,0,1,1,0],[0,0,0,0,0]]],[[[0,0,0,0,0],[0,0,0,0,0],[0,1,2,1,1],[0,0,0,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,1,0,0],[0,0,2,0,0],[0,0,1,0,0],[0,0,1,0,0]],[[0,0,0,0,0],[0,0,0,0,0],[1,1,2,1,0],[0,0,0,0,0],[0,0,0,0,0]],[[0,0,1,0,0],[0,0,1,0,0],[0,0,2,0,0],[0,0,1,0,0],[0,0,0,0,0]]],[[[0,0,0,0,0],[0,0,0,1,0],[0,1,2,1,0],[0,0,0,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,1,0,0],[0,0,2,0,0],[0,0,1,1,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,0,0,0],[0,1,2,1,0],[0,1,0,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,1,1,0,0],[0,0,2,0,0],[0,0,1,0,0],[0,0,0,0,0]]],[[[0,0,0,0,0],[0,1,0,0,0],[0,1,2,1,0],[0,0,0,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,1,1,0],[0,0,2,0,0],[0,0,1,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,0,0,0],[0,1,2,1,0],[0,0,0,1,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,1,0,0],[0,0,2,0,0],[0,1,1,0,0],[0,0,0,0,0]]],[[[0,0,0,0,0],[0,1,1,0,0],[0,0,2,1,0],[0,0,0,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,0,1,0],[0,0,2,1,0],[0,0,1,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,0,0,0],[0,1,2,0,0],[0,0,1,1,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,1,0,0],[0,1,2,0,0],[0,1,0,0,0],[0,0,0,0,0]]],[[[0,0,0,0,0],[0,0,1,1,0],[0,1,2,0,0],[0,0,0,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,1,0,0],[0,0,2,1,0],[0,0,0,1,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,0,0,0],[0,0,2,1,0],[0,1,1,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,1,0,0,0],[0,1,2,0,0],[0,0,1,0,0],[0,0,0,0,0]]],[[[0,0,0,0,0],[0,0,1,0,0],[0,1,2,1,0],[0,0,0,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,1,0,0],[0,0,2,1,0],[0,0,1,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,0,0,0],[0,1,2,1,0],[0,0,1,0,0],[0,0,0,0,0]],[[0,0,0,0,0],[0,0,1,0,0],[0,1,2,0,0],[0,0,1,0,0],[0,0,0,0,0]]]],r=[[[-2,-4],[-2,-4],[-2,-4],[-2,-4]],[[-2,-3],[-2,-4],[-2,-3],[-2,-4]],[[-2,-3],[-2,-3],[-2,-3],[-2,-2]],[[-2,-3],[-2,-2],[-2,-3],[-2,-3]],[[-2,-3],[-2,-3],[-2,-3],[-2,-2]],[[-2,-3],[-2,-3],[-2,-3],[-2,-2]],[[-2,-3],[-2,-3],[-2,-3],[-2,-2]]],a=function(){function e(t,n,s,o){i(this,e),this.m_shape=n,this.m_blockType=t,this.m_rotation=s,this.m_x=0,this.m_y=0,this.m_fixX=r[n][s][0],this.m_fixY=r[n][s][1],this.m_isGhost=o}return o(e,[{key:"isGhost",value:function(){return this.m_isGhost}},{key:"clone",value:function(){var t=new e(this.getBlockType(),this.getShape(),this.getRotation(),this.m_isGhost);return t.setPosition(this.m_x,this.m_y),t}},{key:"setPosition",value:function(e,t){this.m_x=e,this.m_y=t}},{key:"setShape",value:function(e){this.m_shape=e,this.m_fixX=r[this.m_shape][this.m_rotation][0],this.m_fixY=r[this.m_shape][this.m_rotation][1]}},{key:"setBlockType",value:function(e){this.m_blockType=e}},{key:"getX",value:function(){return this.m_x}},{key:"getY",value:function(){return this.m_y}},{key:"getBlockX",value:function(e){return this.m_x+this.m_fixX+e}},{key:"getBlockY",value:function(e){return this.m_y+this.m_fixY+e}},{key:"getBlockType",value:function(){return this.m_blockType}},{key:"getShape",value:function(){return this.m_shape}},{key:"setRotation",value:function(e){this.m_rotation=e,this.m_fixX=r[this.m_shape][this.m_rotation][0],this.m_fixY=r[this.m_shape][this.m_rotation][1]}},{key:"getRotation",value:function(){return this.m_rotation}},{key:"getBlockArr",value:function(){return c[this.m_shape][this.m_rotation]}},{key:"rotate",value:function(e){e<0&&(e+=4),this.m_rotation=(this.m_rotation+e)%4,this.m_fixX=r[this.m_shape][this.m_rotation][0],this.m_fixY=r[this.m_shape][this.m_rotation][1]}},{key:"move",value:function(e){var t=0,n=0;switch(e){case hf.constants.PIECE_DIRECTION.DIR_LEFT:t=-1;break;case hf.constants.PIECE_DIRECTION.DIR_RIGHT:t=1;break;case hf.constants.PIECE_DIRECTION.DIR_DOWN:n=1;break;case hf.constants.PIECE_DIRECTION.DIR_UP:n=-1}this.m_x+=t,this.m_y+=n}},{key:"moveBy",value:function(e,t){this.m_x+=e,this.m_y+=t}},{key:"moveTo",value:function(e,t){this.m_x=x,this.m_y=y}}],[{key:"randomPiece",value:function(t){return new e(t,Math.floor(Math.random()*hf.constants.PIECE_SHAPE.MAX),0)}}]),e}();t.exports=a,cc._RF.pop()},{}],PlatformConfig:[function(e,t,n){"use strict";cc._RF.push(t,"77f2982lv1CoqFSURKPJw1M","PlatformConfig");var i={};cc.sys.platform===cc.sys.WECHAT_GAME?i={}:cc.sys.platform===cc.sys.OPPO_GAME||cc.sys.platform===cc.sys.ANDROID&&(i={packageName:"cn.herofight.classicbricks.tetris",gpRateHead:"https://play.google.com/store/apps/details?id=",ads:{bannerId:"ca-app-pub-5571113908507676/7589904463",rewardId:"ca-app-pub-5571113908507676/4161849243",interstitialId:"ca-app-pub-5571113908507676/2824716843"},iap:{}}),t.exports=i,cc._RF.pop()},{}],PlatformMgr:[function(e,t,n){"use strict";cc._RF.push(t,"3cf466Vs5tH24+39v0N6S8T","PlatformMgr");var i={};i.config=e("PlatformConfig"),i.wxMgr=e("WXMgr"),i.oppoMgr=e("OPPOMgr"),i.androidMgr=e("AndroidMgr"),i.vibrate=function(e){cc.sys.platform===cc.sys.ANDROID&&hf.platformMgr.androidMgr.vibrate(e)},i.rate=function(){cc.sys.platform===cc.sys.ANDROID&&cc.sys.openURL(this.config.gpRateHead+this.config.packageName)},i.isPackageInstall=function(e){return cc.sys.platform===cc.sys.ANDROID&&this.androidMgr.isPackageInstall(e)},i.jumpOtherGame=function(e){cc.sys.platform===cc.sys.ANDROID&&cc.sys.openURL(this.config.gpRateHead+e)},t.exports=i,cc._RF.pop()},{AndroidMgr:"AndroidMgr",OPPOMgr:"OPPOMgr",PlatformConfig:"PlatformConfig",WXMgr:"WXMgr"}],Preview:[function(e,t,n){"use strict";cc._RF.push(t,"0ca42vbd4lBHLke9h65ZsLI","Preview");var i=e("Piece");cc.Class({extends:cc.Component,properties:{drawBoard:{default:null,type:e("DrawBoard")}},onLoad:function(){},init:function(e){this.m_type=e},setShape:function(e){this.m_piece=new i(this.m_type,e,0),this.m_piece.setPosition(1,3),this.draw();var t=this.drawBoard.getBlockSize();switch(this.node.x=0,this.node.y=0,e){case hf.constants.PIECE_SHAPE.I:this.node.y=t.height/2;break;case hf.constants.PIECE_SHAPE.L:case hf.constants.PIECE_SHAPE.J:case hf.constants.PIECE_SHAPE.Z:case hf.constants.PIECE_SHAPE.T:case hf.constants.PIECE_SHAPE.S:this.node.x=t.width/2;break;case hf.constants.PIECE_SHAPE.O:}},start:function(){},updateBoard:function(e){for(var t=this.drawBoard.getComponent("DrawBoard").getBoard(),n=0;n<t.getW();n++)for(var i=0;i<t.getH();i++)t.setBlock(n,i,this.m_type,e)},draw:function(){this.drawBoard.clearBoard(),this.drawBoard.clearPieces(),this.drawBoard.drawBoard(),this.drawBoard.drawPiece(this.m_piece)}}),cc._RF.pop()},{DrawBoard:"DrawBoard",Piece:"Piece"}],RemoteDataMgr:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}cc._RF.push(t,"2ddc4vGaFVJC7yLyEjczXw8","RemoteDataMgr");t.exports=new function e(){i(this,e)},cc._RF.pop()},{}],RotationSystemSRS:[function(e,t,n){"use strict";cc._RF.push(t,"86c75B4KvlImIUeLiI20GZn","RotationSystemSRS");e("Constants");var i=new Object,s=[[[[[0,0],[-1,0],[-1,-1],[0,2],[-1,2]],[[0,0],[1,0],[1,1],[0,-2],[1,-2]],[[0,0],[1,0],[1,-1],[0,2],[1,2]],[[0,0],[-1,0],[-1,1],[0,-2],[-1,-2]]],[[[0,0],[1,0],[1,-1],[0,2],[1,2]],[[0,0],[-1,0],[-1,1],[0,-2],[-1,-2]],[[0,0],[-1,0],[-1,-1],[0,2],[-1,2]],[[0,0],[1,0],[1,1],[0,-2],[1,-2]]]],[[[[-1,0],[1,0],[-2,0],[1,-1],[-2,2]],[[-1,0],[1,-1],[-2,-1],[1,1],[-2,2]],[[1,0],[-1,0],[-2,0],[-1,1],[-2,-2]],[[0,1],[-1,1],[2,1],[-1,-1],[2,2]]],[[[0,-1],[1,-1],[-2,-1],[1,1],[-2,-2]],[[-1,0],[1,0],[-2,0],[1,-1],[-2,2]],[[0,1],[-1,-1],[-2,1],[-1,-1],[2,2]],[[1,1],[-1,1],[2,2],[-2,2],[2,-2]]]]];i.rotate=function(e,t,n){var i=e.clone();if(i.rotate(n),t.isPieceValid(i))e.rotate(n);else{var o,c,r;if(e.getShape()===hf.constants.PIECE_SHAPE.I)o=1,c=i.getRotation();else{if(e.getShape()===hf.constants.PIECE_SHAPE.O)return;o=0,c=i.getRotation()}r=n>0?0:1;for(var a=0;a<5;a++){var h=s[o][r][c][a][0],l=s[o][r][c][a][1];if(i.moveBy(h,l),t.isPieceValid(i))return e.rotate(n),void e.moveBy(h,l);i.moveBy(-h,-l)}}},t.exports=i,cc._RF.pop()},{Constants:"Constants"}],Settings:[function(e,t,n){"use strict";cc._RF.push(t,"c918f6fGnRNya0CTj9JpW3w","Settings");e("Config");cc.Class({extends:cc.Component,properties:{ghostTg:cc.Toggle,musicTg:cc.Toggle,sfxTg:cc.Toggle,vibrateTg:cc.Toggle},onLoad:function(){this.ghostTg.isChecked=hf.config.getConf().hasGhost,this.musicTg.isChecked=hf.config.getConf().musicEnabled,this.sfxTg.isChecked=hf.config.getConf().effectEnabled,this.vibrateTg.isChecked=hf.config.getConf().vibEnabled},start:function(){},setCloseCallBack:function(e){this.m_closeCb=e},onGhost:function(){hf.soundMgr.playBtnSound(),hf.config.getConf().hasGhost=this.ghostTg.isChecked,hf.config.save()},onMusic:function(){hf.soundMgr.playBtnSound(),hf.config.getConf().musicEnabled=this.musicTg.isChecked,hf.config.save()},onSFX:function(){hf.soundMgr.playBtnSound(),hf.config.getConf().effectEnabled=this.sfxTg.isChecked,hf.config.save()},onVibrate:function(){hf.soundMgr.playBtnSound(),hf.config.getConf().vibEnabled=this.vibrateTg.isChecked,hf.config.save(),hf.config.getConf().vibEnabled&&hf.platformMgr.vibrate(hf.constants.VIBRATE.VIBRATE_BUTTON)},onPrivacyLink:function(){cc.sys.openURL("http://www.herofight.cn/privacy/ClassicBricks")},onClose:function(){hf.soundMgr.playBtnSound(),this.node.destroy(),this.m_closeCb&&this.m_closeCb(),this.m_closeCb=void 0}}),cc._RF.pop()},{Config:"Config"}],SoundMgr:[function(e,t,n){"use strict";cc._RF.push(t,"cda4anXGC9NuqA9fpczoIn/","SoundMgr"),cc.Class({extends:cc.Component,properties:{audio:{type:[cc.AudioClip],default:[]}},onLoad:function(){hf.soundMgr=this},start:function(){},playSound:function(e){hf.config.getConf().effectEnabled&&cc.audioEngine.play(this.audio[e],!1,1)},playBtnSound:function(){this.playSound(hf.constants.SOUND_INDEX.MENU)},playBgMusic:function(){if(hf.config.getConf().musicEnabled){var e=[hf.constants.SOUND_INDEX.BG,hf.constants.SOUND_INDEX.BG2],t=e[Math.floor(Math.random()*e.length)];this.bgMusicID=cc.audioEngine.play(this.audio[t],!0,1)}},pauseBgMusic:function(){null!=this.bgMusicID&&cc.audioEngine.pause(this.bgMusicID)},resumeBgMusic:function(){hf.config.getConf().musicEnabled&&(null==this.bgMusicID?this.playBgMusic():cc.audioEngine.resume(this.bgMusicID))},stopBgMusic:function(){cc.audioEngine.stop(this.bgMusicID),this.bgMusicID=null}}),cc._RF.pop()},{}],SplashScene:[function(e,t,n){"use strict";cc._RF.push(t,"444aeKuj7tG0b712am7towa","SplashScene"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=this;this.scheduleOnce(function(){e.m_oneSecondPassed=!0,e.checkSceneJump()},1)},start:function(){var e=this;cc.director.preloadScene("MainScene",function(){e.m_sceneLoaded=!0,e.checkSceneJump()})},checkSceneJump:function(){this.m_sceneLoaded&&this.m_oneSecondPassed&&(cc.director.loadScene("MainScene"),sp.sceneToLoad=void 0)}}),cc._RF.pop()},{}],SpriteLocalized:[function(e,t,n){"use strict";cc._RF.push(t,"6b5e5MipvhOR59c4c2aN6kr","SpriteLocalized");var i=cc.sys.language;"zh"!==i&&(i="en"),cc.Class({extends:cc.Component,properties:{cnFrame:cc.SpriteFrame,enFrame:cc.SpriteFrame,height:70},onLoad:function(){var e=null;"zh"===i?(this.node.getComponent("cc.Sprite").spriteFrame=this.cnFrame,e=this.cnFrame):(this.node.getComponent("cc.Sprite").spriteFrame=this.enFrame,e=this.enFrame);var t=this.height/e.getOriginalSize().height;this.node.width=e.getOriginalSize().width*t,this.node.height=e.getOriginalSize().height*t},start:function(){}}),cc._RF.pop()},{}],UIContainer:[function(e,t,n){"use strict";cc._RF.push(t,"b45dfGg1HJMpqFuIpwcdGlf","UIContainer"),cc.Class({extends:cc.Component,properties:{tips:cc.Node},onLoad:function(){hf.uiContainer=this},start:function(){},showTips:function(e){var t=cc.instantiate(this.tips);t.getChildByName("str").getComponent(cc.Label).string=e;var n=cc.view.getVisibleSize();t.parent=cc.director.getScene(),t.x=n.width/2,t.y=0,t.runAction(cc.sequence(cc.moveTo(.3,cc.v2(n.width/2,n.height/2)),cc.delayTime(.8),cc.moveTo(.3,cc.v2(n.width/2,n.height)),cc.callFunc(function(){t.destroy()})))}}),cc._RF.pop()},{}],UtilsMgr:[function(e,t,n){"use strict";cc._RF.push(t,"573fe2Hoz1GNIwGdAOfXdlC","UtilsMgr");var i=e("MathHelper"),s={};s.mathHelper=new i,t.exports=s,cc._RF.pop()},{MathHelper:"MathHelper"}],WXAds:[function(e,t,n){"use strict";cc._RF.push(t,"cd8b1IBK6lJYqmB/GzbpfsU","WXAds");var i=e("WXTools"),s={REWARD_RESULT:{LOAD_AD_FAIL:1,NOT_SUPPORTED:2,QUIT_MIDWAY:3,SUCCESS:4},config:function(e,t){this.m_bannerId=e,this.m_videoId=t},showBanner:function(e){cc.log("WXAds showBanner bId",e),i.isWXAdsSupported()&&(tt?this.showTTBanner(e):this.showWXBanner(e))},showWXBanner:function(e){var t=this;cc.log("WXAds showWXBanner xxxxxxxxxx"),this.m_bannerAd&&this.m_bannerAd.destroy();var n=e||this.m_bannerId;if(n){var i=wx.getSystemInfoSync();cc.log("bannerId",n),this.m_bannerAd=wx.createBannerAd({adUnitId:n,style:{left:0,top:.8*i.screenHeight,width:i.screenWidth,height:.2*i.screenHeight},adIntervals:60}),this.m_bannerRealHeight=.2*i.screenHeight,this.m_readHeight=parseInt(cc.winSize.height*this.m_bannerRealHeight/i.screenHeight),this.m_bannerAd.onLoad(function(e){cc.log("WXAds showBanner onLoad")}),this.m_bannerAd.onResize(function(e){t.m_bannerRealHeight=t.m_bannerAd.style.realHeight,t.m_bannerAd.style.left=(i.screenWidth-t.m_bannerAd.style.realWidth)/2,t.m_bannerAd.style.top=i.screenHeight-t.m_bannerRealHeight,cc.log("WXAds showBanner bannerRealHeight",t.m_bannerRealHeight),t.m_bannerRealHeight/i.screenHeight>.2&&(t.m_bannerAd.style.width=i.screenWidth*i.screenHeight*.198/t.m_bannerRealHeight);var n=parseInt(cc.winSize.height*t.m_bannerRealHeight/i.screenHeight);cc.director.emit("bannerResize",{height:n}),t.m_readHeight=n}),this.m_bannerAd.onError(function(e){cc.log("WXAds showBanner",e)}),this.m_bannerAd.show()}},showTTBanner:function(e){var t=this;this.m_bannerAd&&this.m_bannerAd.destroy();var n=e||this.m_bannerId;if(n){var i=wx.getSystemInfoSync();this.m_bannerRealHeight=.2*i.screenHeight;var s=16*this.m_bannerRealHeight/9;this.m_readHeight=parseInt(cc.winSize.height*this.m_bannerRealHeight/i.screenHeight),this.m_bannerAd=wx.createBannerAd({adUnitId:n,style:{left:(i.screenWidth-s)/2,top:i.screenHeight-this.m_bannerRealHeight,width:s}}),this.m_bannerAd.onLoad(function(e){cc.log("WXAds showBanner onLoad",s)}),this.m_bannerAd.onResize(function(e){cc.log("WXAds banner onResize",e.width,e.height),s>e.width&&(s=e.width,t.m_bannerRealHeight=e.height,t.m_bannerAd.style.top=i.screenHeight-e.width/16*9,t.m_bannerAd.style.left=(i.screenWidth-e.width)/2);var n=parseInt(cc.winSize.height*t.m_bannerRealHeight/i.screenHeight);t.m_readHeight=n,cc.director.emit("bannerResize",{height:n})}),this.m_bannerAd.onError(function(e){cc.log("WXAds showBanner",e)}),this.m_bannerAd.show()}},getRealBannerHeight:function(){return this.m_readHeight},hideBanner:function(){i.isWXAdsSupported()&&this.m_bannerAd&&(this.m_bannerAd.destroy(),this.m_bannerAd=void 0)},loadRewardVideo:function(e){var t=this;this.m_rewardAd=wx.createRewardedVideoAd({adUnitId:e}),this.m_isRewardAdLoaded=!1,this.m_rewardAd.onLoad(function(){cc.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t.m_isRewardAdLoaded=!0}),this.m_rewardAd.onError(function(){cc.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"),t.m_isRewardAdLoaded=!1}),this.m_rewardAd.onClose(function(e){e&&e.isEnded||void 0===e?t.sendRewardAdsResult(s.REWARD_RESULT.SUCCESS):t.sendRewardAdsResult(s.REWARD_RESULT.QUIT_MIDWAY)})},showRewardVideo:function(e){var t=this;i.isWXAdsSupported()?(this.m_callBackFunc=e,this.m_rewardAd.load().then(function(){t.m_rewardAd.show()}).catch(function(e){t.sendRewardAdsResult(s.REWARD_RESULT.LOAD_AD_FAIL)})):e(s.REWARD_RESULT.NOT_SUPPORTED)},isRewardVideoLoaded:function(){return this.m_isRewardAdLoaded},sendRewardAdsResult:function(e){this.m_callBackFunc&&(this.m_callBackFunc(e),this.m_callBackFunc=null),this.m_isRewardAdLoaded=!1},loadInterstitialAd:function(e){this.m_interstitialAd=wx.createInterstitialAd({adUnitId:e}),this.m_interstitialAd.onLoad(function(){cc.log("\u63d2\u5c4f \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),this.m_interstitialAd.onError(function(){cc.log("\u63d2\u5c4f \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25")}),this.m_interstitialAd.onClose(function(e){})},showInterstitialAd:function(){i.isWXAdsSupported()&&this.m_interstitialAd&&this.m_interstitialAd.show().catch(function(e){console.error("showInterstitialAd",e)})},createIconAd:function(e){var t;if(wx.createGameIcon){var n=wx.getSystemInfoSync();t=wx.createGameIcon({adUnitId:e,count:2,style:[{left:10,top:.225*n.screenHeight,size:50},{left:n.screenWidth-80,top:.225*n.screenHeight,size:50}]})}return t},showIconAd:function(e){e&&e.load().then(function(){e.show(),console.log("showIconAd success",e)}).catch(function(e){console.error("WXAds showIconAd",e)})},hideIconAd:function(e){e&&e.hide().then(function(){console.log("hideIconAd success",e)}).catch(function(e){console.error("WXAds hideIconAd",e)})},destroyIconAd:function(e){console.log("destroyIconAd",e),e&&e.destroy().then(function(){}).catch(function(e){console.error("WXAds destroyIconAd",e)})},createPortalAd:function(e){wx.createGamePortal&&(this.m_portalAd=wx.createGamePortal({adUnitId:e}))},showPortalAd:function(e){var t=this;this.m_portalAd&&this.m_portalAd.load().then(function(){t.m_portalAd.show(),e&&e(!0)}).catch(function(t){console.error(t),e&&e(!1)})}};t.exports=s,cc._RF.pop()},{WXTools:"WXTools"}],WXMgr:[function(e,t,n){"use strict";cc._RF.push(t,"3fdb43XlftFQK9HjW6KLmFE","WXMgr");var i={};i.wxRank=e("WXRank"),i.wxAds=e("WXAds"),i.wxTools=e("WXTools"),t.exports=i,cc._RF.pop()},{WXAds:"WXAds",WXRank:"WXRank",WXTools:"WXTools"}],WXRankConstants:[function(e,t,n){"use strict";cc._RF.push(t,"d0d9e95YI5NLqZGpond3XPU","WXRankConstants");var i={CMD_TYPE:{SHOW_FRIEND:0,SHOW_GROUP:1,SUBMIT_SCORE:2,SHOW_THREE_PLAYER:3,TOUCH_MOVE:4,NEXT_PAGE:5,LAST_PAGE:6,SHOW_FIRST:7,SET_MY_DATA:8}};t.exports=i,cc._RF.pop()},{}],WXRank:[function(e,t,n){"use strict";cc._RF.push(t,"47f102rvr5ASo19wXhGpX4T","WXRank");var i=e("WXRankConstants"),s=new Object;s.setMyData=function(e){wx.postMessage({cmd:i.CMD_TYPE.SET_MY_DATA,data:e})},s.showFriend=function(e,t){cc.log("WXRank.showFriend"),this.init(e),wx.postMessage({cmd:i.CMD_TYPE.SHOW_FRIEND,data:t})},s.showGroup=function(e,t){cc.log("WXRank.showGroup"),wx.postMessage({cmd:i.CMD_TYPE.SHOW_GROUP,data:{shareTicket:shareTicket,key:t}}),this.init(e)},s.showThreePlayer=function(e,t,n){this.init(e),wx.postMessage({cmd:i.CMD_TYPE.SHOW_THREE_PLAYER,data:{key:t,score:n}})},s.showFirstPlayer=function(e,t){cc.log("WXRank.showFirstPlayer"),this.init(e),t.avatarSize=t.avatarSize||e.node.width,wx.postMessage({cmd:i.CMD_TYPE.SHOW_FIRST,data:t})},s.submitScore=function(e,t,n,s){wx.postMessage({cmd:i.CMD_TYPE.SUBMIT_SCORE,data:{key:e,value:t,isMainRank:n,keepBigValue:s}})},s.nextPage=function(){wx.postMessage({cmd:i.CMD_TYPE.NEXT_PAGE})},s.lastPage=function(){wx.postMessage({cmd:i.CMD_TYPE.LAST_PAGE})},s.init=function(e){e.spriteFrame||(e.spriteFrame=new cc.SpriteFrame),this.m_tex=new cc.Texture2D,this.m_isShow=!0,this.m_spriteRank=e,this.m_spriteRank.node.active=!0,this.initSubDomain()},s.initSubDomain=function(){var e=wx.getOpenDataContext().canvas;e.width=this.m_spriteRank.node.width,e.height=this.m_spriteRank.node.height},s.hide=function(){this.m_isShow&&(this.m_tex=null,this.m_isShow=!1,this.m_spriteRank.node.active=!1)},s.isShow=function(){return this.m_isShow},s.update=function(){this.updateSubDomainCanvas()},s.updateSubDomainCanvas=function(){if(this.m_tex){var e=wx.getOpenDataContext().canvas;this.m_tex.initWithElement(e),this.m_tex.handleLoadedTexture(),this.m_spriteRank.spriteFrame=new cc.SpriteFrame(this.m_tex)}},t.exports=s,cc._RF.pop()},{WXRankConstants:"WXRankConstants"}],WXTools:[function(e,t,n){"use strict";cc._RF.push(t,"1ada1Av8nNM6YbN4JZ3ttgh","WXTools");var i={};function s(e,t){e=e.split("."),t=t.split(".");for(var n=Math.max(e.length,t.length);e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(var i=0;i<n;i++){var s=parseInt(e[i]),o=parseInt(t[i]);if(s>o)return 1;if(s<o)return-1}return 0}i.isWXRankSupported=function(){var e;return e=tt?"1.3.0":"1.9.92",-1!==s(wx.getSystemInfoSync().SDKVersion,e)},i.isWXAdsSupported=function(){var e;return e=tt?"1.11.0":"2.0.4",-1!==s(wx.getSystemInfoSync().SDKVersion,e)},i.isGameClubSupported=function(){return cc.sys.platform===cc.sys.WECHAT_GAME&&-1!==s(wx.getSystemInfoSync().SDKVersion,"2.0.3")},i.registerOnShow=function(e,t){var n=this;this.m_registerFuncArr||(this.m_registerFuncArr=[],wx.onShow(function(e){for(var t=0;t<n.m_registerFuncArr.length;t++)for(var i=n.m_registerFuncArr[t],s=0;s<i.m_wxOnShowRegTargetArr.length;s++){var o=i.m_wxOnShowRegTargetArr[s];i.apply(o,[e])}})),this.m_registerFuncArr.indexOf(e)>=0?e.m_wxOnShowRegTargetArr.push(t):e.m_wxOnShowRegTargetArr?cc.error('WXTools.registerOnShow Func already have a "m_wxOnShowRegTargetArr" name key, please change it'):(this.m_registerFuncArr.push(e),e.m_wxOnShowRegTargetArr=[],e.m_wxOnShowRegTargetArr.push(t))},i.unRegisterOnShow=function(e,t){var n=this.m_registerFuncArr.indexOf(e);if(n>=0){var i=this.m_registerFuncArr[n].m_wxOnShowRegTargetArr,s=i.indexOf(t);s>=0?(i.splice(s,1),i.length<=0&&this.m_registerFuncArr.splice(n,1)):cc.error("impossible !")}else cc.error("WXTools.unRegisterOnShow func not registered !")},i.saveImageToPhotosAlbum=function(e,t){cc.sys.platform===cc.sys.WECHAT_GAME&&wx.authorize({scope:"scope.writePhotosAlbum",success:function(){wx.saveImageToPhotosAlbum({filePath:e,success:function(){t(0)},fail:function(){t(-1)}})},fail:function(){t(-2)}})},i.getNodeBoundBoxInCanvas=function(e){console.log("getNodeBoundBoxInCanvas",canvas.width,canvas.height);var t=e.getBoundingBoxToWorld(),n=t.width*canvas.width/cc.winSize.width,i=t.height*canvas.height/cc.winSize.height;return{x:t.xMin*canvas.width/cc.winSize.width,y:(cc.winSize.height-t.yMax)*canvas.height/cc.winSize.height,width:n,height:i}},i.wxCaptureNodeAreaSync=function(e,t,n){var i=this.getNodeBoundBoxInCanvas(e),s=1;return null!=t?s=i.height>t?t/i.height:1:null!=n&&(s=i.width>n?n/i.width:1),i.destWidth=parseInt(i.width*s),i.destHeight=parseInt(i.height*s),i.fileType="png",i.quality=.5,console.log("wxCaptureNodeAreaSync",i),canvas.toTempFilePathSync(i)},i.initGameClub=function(e){if(i.isGameClubSupported()){var t=e&&e.icon||"green",n=wx.getSystemInfoSync(),s=e&&e.style||{left:10,top:.5*n.screenHeight,width:40,height:40};this.m_gameClubButton?cc.error("WXTools iniGameClub already exist !"):this.m_gameClubButton=wx.createGameClubButton({type:"image",icon:t,style:s}),this.m_isGameClubVisible=!0}},i.showGameClub=function(){this.m_gameClubButton&&(this.m_gameClubButton.show(),this.m_isGameClubVisible=!0)},i.isGameClubExist=function(){return null!=this.m_gameClubButton},i.isGameClubVisible=function(){return this.m_isGameClubVisible},i.hideGameClub=function(){i.isGameClubSupported()&&this.m_gameClubButton&&(this.m_gameClubButton.hide(),this.m_isGameClubVisible=!1)},t.exports=i,cc._RF.pop()},{}],en:[function(e,t,n){"use strict";cc._RF.push(t,"920c5VLzJxKjYCAoIUwUHym","en"),t.exports={level:"Level",score:"Score",time:"Time",static:"Static",ghost:"Ghost",music:"Music",effect:"Effect",pause:"Pause",next:"Next",home:"Home",retry:"Retry",share:"Share",challenge:"Challenge",shareVideo:"Share Video",reborn:"Reborn",best:"Best : ",gameEndTitle:"Game Over",skipReborn:"Skip Reborn",failedToLoadRewardVideo:"reward video load failed, please try later",rebornSuccess:"success to reborn",canNotSkipVideo:"skip the video can not reborn",videoNotSupported:"reborn not supported",functionNotSupported:"Not supported yet !"},cc._RF.pop()},{}],i18n:[function(e,t,n){"use strict";cc._RF.push(t,"93789C/shtIL6entYsZPjee","i18n");var i=e("polyglot"),s=cc.sys.language;"zh"!==s&&(s="en");var o=e(s),c=new i({phrases:o,allowMissing:!0});t.exports={init:function(t){o=e(s=t),c.replace(o)},t:function(e,t){return c.t(e,t)}},cc._RF.pop()},{polyglot:"polyglot"}],polyglot:[function(e,t,n){(function(e){"use strict";function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}cc._RF.push(t,"69decSgpRlE1rzEKp0RzG3V","polyglot"),function(e,s){"function"==typeof define&&define.amd?define([],function(){return s(e)}):"object"===(void 0===n?"undefined":i(n))?t.exports=s(e):e.Polyglot=s(e)}(void 0!==e?e:void 0,function(e){var t=String.prototype.replace;function n(e){e=e||{},this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en",this.allowMissing=!!e.allowMissing,this.warn=e.warn||g}n.VERSION="1.0.0",n.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},n.prototype.extend=function(e,t){var n;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],t&&(s=t+"."+s),"object"===i(n)?this.extend(n,s):this.phrases[s]=n)},n.prototype.unset=function(e,t){var n;if("string"==typeof e)delete this.phrases[e];else for(var s in e)e.hasOwnProperty(s)&&(n=e[s],t&&(s=t+"."+s),"object"===i(n)?this.unset(n,s):delete this.phrases[s])},n.prototype.clear=function(){this.phrases={}},n.prototype.replace=function(e){this.clear(),this.extend(e)},n.prototype.t=function(e,t){var n,i;return"number"==typeof(t=null==t?{}:t)&&(t={smart_count:t}),"string"==typeof this.phrases[e]?n=this.phrases[e]:"string"==typeof t._?n=t._:this.allowMissing?n=e:(this.warn('Missing translation for key: "'+e+'"'),i=e),"string"==typeof n&&(t=p(t),i=_(i=l(n,this.currentLocale,t.smart_count),t)),i},n.prototype.has=function(e){return e in this.phrases};var s="||||",o={chinese:function(e){return 0},german:function(e){return 1!==e?1:0},french:function(e){return e>1?1:0},russian:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},czech:function(e){return 1===e?0:e>=2&&e<=4?1:2},polish:function(e){return 1===e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0}},c={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs","sk"],polish:["pl"],icelandic:["is"]};function r(e){var t,n,i,s={};for(t in e)if(e.hasOwnProperty(t))for(i in n=e[t])s[n[i]]=t;return s}var a=/^\s+|\s+$/g;function h(e){return t.call(e,a,"")}function l(e,t,n){var i;return null!=n&&e?h((i=e.split(s))[u(t,n)]||i[0]):e}function d(e){var t=r(c);return t[e]||t.en}function u(e,t){return o[d(e)](t)}var f=/\$/g,m="$$$$";function _(e,n){for(var i in n)if("_"!==i&&n.hasOwnProperty(i)){var s=n[i];"string"==typeof s&&(s=t.call(n[i],f,m)),e=t.call(e,new RegExp("%\\{"+i+"\\}","g"),s)}return e}function g(t){e.console&&e.console.warn&&e.console.warn("WARNING: "+t)}function p(e){var t={};for(var n in e)t[n]=e[n];return t}return n}),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],zh:[function(e,t,n){"use strict";cc._RF.push(t,"87f1fs0gohHDIfNg4aePXbt","zh"),t.exports={level:"\u7b49\u7ea7",score:"\u5206\u6570",time:"\u65f6\u95f4",static:"\u9759\u6b62",ghost:"\u5f71\u5b50",music:"\u97f3\u4e50",effect:"\u97f3\u6548",pause:"\u6682\u505c",next:"\u4e0b\u4e00\u4e2a",home:"\u4e3b\u9875",reborn:"\u25b6\u514d\u8d39\u590d\u6d3b",retry:"\u91cd\u73a9",share:"\u5206\u4eab\u597d\u53cb",challenge:"\u6311\u6218\u597d\u53cb",shareVideo:"\u5206\u4eab\u89c6\u9891",best:"\u672c\u5730\u6700\u9ad8\u5206 : ",gameEndTitle:"\u6e38\u620f\u7ed3\u675f",skipReborn:"\u8df3\u8fc7\u590d\u6d3b",failedToLoadRewardVideo:"\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",rebornSuccess:"\u590d\u6d3b\u6210\u529f",canNotSkipVideo:"\u5b8c\u6574\u89c2\u770b\u89c6\u9891\u624d\u53ef\u4ee5\u590d\u6d3b",videoNotSupported:"\u5fae\u4fe1\u7248\u672c\u8fc7\u4f4e\uff0c\u8bf7\u5347\u7ea7",functionNotSupported:"\u6b64\u529f\u80fd\u5c1a\u672a\u5f00\u653e\uff0c\u8bf7\u7a0d\u7b49"},cc._RF.pop()},{}]},{},["LabelLocalized","en","zh","i18n","polyglot","CrossAds","BackGround","Block","Board","Config","Constants","DrawBoard","FullRank","GameRate","GameScene","KernelGame","KeyFramesContainer","KeyPos","MainScene","OperateBtn","Piece","Preview","RotationSystemSRS","Settings","SoundMgr","SplashScene","SpriteLocalized","UIContainer","InitAll","AdsMgr","CrossAdsMgr","CPCheck","AnalysisConstant","AnalysisMgr","RemoteDataMgr","PlatformConfig","PlatformMgr","AdmobAndroid","AndroidConstant","AndroidMgr","GoogleIAP","AdmobIOS","OPPOAds","OPPOMgr","WXAds","WXMgr","WXRank","WXRankConstants","WXTools","MathHelper","UtilsMgr"]);